<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:;">
    <title>Daisy Tracker</title>

    <!-- PWA Manifest - Makes this installable as a standalone app -->
    <link rel="manifest" href="manifest.json">

    <!-- App Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    <link rel="apple-touch-icon" href="icon-192.png">

    <!-- Cordova (only loads if building native app) -->
    <script type="text/javascript" src="cordova.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background-color: #000000;
            color: #4bff21;
            line-height: 1.6;
            padding: 10px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: #0a0a0a;
            border: 2px solid #4bff21;
            border-radius: 10px;
            overflow: hidden;
        }

        .header {
            text-align: center;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            padding: 20px;
            border-bottom: 2px solid #4bff21;
        }

        .header h1 {
            font-size: 2em;
            color: #f8e602;
            text-shadow: 0 0 10px #f8e602;
            margin-bottom: 5px;
        }

        .header p {
            color: #4bff21;
            font-size: 0.9em;
        }

        /* Tab Navigation */
        .tab-nav {
            display: flex;
            flex-wrap: wrap;
            background-color: #1a1a1a;
            border-bottom: 2px solid #4bff21;
            overflow-x: auto;
        }

        .tab-button {
            flex: 1;
            min-width: 150px;
            padding: 15px 10px;
            background-color: #0a0a0a;
            color: #4bff21;
            border: none;
            border-right: 1px solid #333;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.9em;
            transition: all 0.3s ease;
            text-align: center;
        }

        .tab-button:hover {
            background-color: #1a1a1a;
            color: #f8e602;
        }

        .tab-button.active {
            background-color: #4bff21;
            color: #000000;
            font-weight: bold;
        }

        /* Tab Content */
        .tab-content {
            display: none;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Form Styling */
        .form-section {
            background-color: #1a1a1a;
            border: 2px solid #4bff21;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .section-title {
            color: #f8e602;
            font-size: 1.2em;
            margin-bottom: 15px;
            border-bottom: 1px solid #f8e602;
            padding-bottom: 5px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-group {
            margin-bottom: 10px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #00f0ff;
            font-size: 0.9em;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 8px;
            background-color: #000;
            border: 1px solid #4bff21;
            color: #4bff21;
            border-radius: 3px;
            font-family: inherit;
            font-size: 0.9em;
        }

        /* Checkbox Groups */
        .checkbox-section {
            background-color: #0a0a0a;
            border: 1px solid #772289;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .checkbox-section h4 {
            color: #f4d5fd;
            margin-bottom: 10px;
            font-size: 1em;
        }

        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 5px;
            transition: all 0.2s ease;
        }

        .checkbox-item:hover {
            background-color: rgba(119, 34, 137, 0.1);
        }

        input[type="checkbox"] {
            min-width: 18px;
            min-height: 18px;
            margin-right: 8px;
            cursor: pointer;
            accent-color: #00f0ff;
        }

        .checkbox-item label {
            color: #ccc;
            cursor: pointer;
            font-size: 0.9em;
        }

        /* Investigation Notes */
        .notes-section {
            background-color: #1a1a1a;
            border: 2px solid #772289;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .notes-section h3 {
            color: #f4d5fd;
            margin-bottom: 10px;
        }

        .notes-section textarea {
            width: 100%;
            min-height: 100px;
            background-color: #0a0a0a;
            border: 1px solid #772289;
            color: #f4d5fd;
            padding: 10px;
            border-radius: 3px;
            font-family: inherit;
        }

        /* Buttons */
        .button-row {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
            padding: 15px;
            background-color: #1a1a1a;
            border-radius: 5px;
            position: sticky;
            bottom: 0;
            z-index: 100;
        }

        .btn {
            padding: 12px 20px;
            background-color: #003300;
            color: #4bff21;
            border: 2px solid #4bff21;
            border-radius: 5px;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.9em;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn:hover {
            background-color: #4bff21;
            color: #000;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(75, 255, 33, 0.3);
        }

        .btn-primary {
            background-color: #772289;
            border-color: #f4d5fd;
            color: #f4d5fd;
        }

        .btn-primary:hover {
            background-color: #f4d5fd;
            color: #772289;
        }

        .btn-warning {
            background-color: #664400;
            border-color: #f8e602;
            color: #f8e602;
        }

        .btn-warning:hover {
            background-color: #f8e602;
            color: #000;
        }

        /* Results Display */
        .results {
            background-color: #0a0a0a;
            border: 2px solid #00f0ff;
            border-radius: 5px;
            padding: 15px;
            margin-top: 20px;
            max-height: 500px;
            overflow-y: auto;
            display: none;
        }

        .results.active {
            display: block;
        }

        .results h3 {
            color: #00f0ff;
            margin-bottom: 15px;
        }

        .query-item {
            background-color: #1a1a1a;
            border-left: 4px solid #4bff21;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 3px;
        }

        .query-category {
            color: #f8e602;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .query-text {
            color: #4bff21;
            word-break: break-all;
            font-size: 0.85em;
            line-height: 1.4;
        }

        /* File Manager */
        .file-manager {
            background-color: #1a1a1a;
            border: 2px solid #f8e602;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .file-list {
            max-height: 200px;
            overflow-y: auto;
            margin-top: 10px;
        }

        .file-item {
            background-color: #0a0a0a;
            border: 1px solid #333;
            padding: 10px;
            margin-bottom: 5px;
            border-radius: 3px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .file-name {
            color: #4bff21;
            flex: 1;
        }

        .file-actions {
            display: flex;
            gap: 5px;
        }

        .file-btn {
            padding: 5px 10px;
            font-size: 0.75em;
            background-color: #003300;
            color: #4bff21;
            border: 1px solid #4bff21;
            border-radius: 3px;
            cursor: pointer;
        }

        .file-btn:hover {
            background-color: #4bff21;
            color: #000;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }

            .tab-button {
                min-width: 100px;
                padding: 10px 5px;
                font-size: 0.8em;
            }

            .checkbox-grid {
                grid-template-columns: 1fr;
            }

            .button-row {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #0a0a0a;
        }

        ::-webkit-scrollbar-thumb {
            background: #4bff21;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #00f0ff;
        }

        /* Help Modal Styles */
        .help-button {
            background: #f8e602;
            color: #000;
            border: none;
            padding: 8px 20px;
            border-radius: 5px;
            font-weight: bold;
            font-size: 0.85em;
            cursor: pointer;
            margin-top: 10px;
        }
        .help-button:hover {
            background: #ffd700;
        }
        .help-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 10000;
            overflow-y: auto;
            padding: 20px;
        }
        .help-modal-content {
            max-width: 900px;
            margin: 50px auto;
            background: #0a0a0a;
            border: 3px solid #f8e602;
            border-radius: 10px;
            padding: 30px;
        }
        .help-modal h2 {
            color: #f8e602;
            margin-bottom: 20px;
            font-size: 2em;
            text-align: center;
        }
        .help-section {
            background: rgba(75, 255, 33, 0.1);
            border-left: 4px solid #4bff21;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .help-section h3 {
            color: #4bff21;
            margin-bottom: 10px;
        }
        .help-section p {
            color: #e0e0e0;
            margin: 5px 0;
            font-size: 0.95em;
        }
        .close-help {
            background: #ff4444;
            color: #fff;
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            display: block;
            margin: 20px auto 0;
        }
        .close-help:hover {
            background: #cc0000;
        }
    </style>
</head>
<body>
    <!-- Help Modal -->
    <div id="help-modal" class="help-modal">
        <div class="help-modal-content">
            <h2>📖 Daisy Tracker - Quick Reference Guide</h2>

            <div class="help-section">
                <h3>💾 File Saving & Exporting</h3>
                <p>• Exports automatically save to your <strong>Downloads</strong> folder</p>
                <p>• Imports let you pick files from anywhere on your device</p>
                <p>• All data stored locally - works 100% offline</p>
                <p>• Perfect for classroom training - no complicated setup needed!</p>
            </div>

            <div class="help-section">
                <h3>📁 Files & Subjects Tab</h3>
                <p>• View and manage saved subject files</p>
                <p>• Import previously exported subject markdown files (.md)</p>
                <p>• Use "Refresh Files" to see newly saved subjects</p>
                <p>• Queries are displayed for you to copy and use</p>
                <p>• To save your inputs as a file for later, use "Save inputs as file" button in User Input tab</p>
            </div>

            <div class="help-section">
                <h3>👤 Subjects Management</h3>
                <p>• View, search, and manage your saved subjects</p>
                <p>• Add photos, track gang affiliations, criminal history, and social media accounts</p>
                <p>• <strong>To add a new subject:</strong> Go to "User Input" tab, fill out fields, scroll to "Subject Profile Tracking" section</p>
                <p>• Add category, gang info, priors, social accounts, and photos</p>
                <p>• Click "Save as Subject Profile" when done</p>
            </div>

            <div class="help-section">
                <h3>📝 User Input Tab</h3>
                <p>• Fill in known information about the subject</p>
                <p>• Investigation notes are <strong>private</strong> - NOT used in queries, only for your documentation</p>
                <p>• All other fields will be used to generate OSINT search queries</p>
                <p>• Leave fields blank if you don't have that information</p>
            </div>

            <div class="help-section">
                <h3>📱 Social Media Accounts (User Input)</h3>
                <p>• These fields are for <strong>reference/notes only</strong></p>
                <p>• To generate OSINT queries, use the platform checkboxes in <strong>☑️ Checkboxes tab</strong></p>
                <p>• Use "Add Another" to track multiple platforms</p>
            </div>

            <div class="help-section">
                <h3>☑️ Checkboxes Tab</h3>
                <p>• Select which platforms and search engines to generate queries for</p>
                <p>• Check "Select All" boxes to quickly enable all options</p>
                <p>• Click "Generate Queries" to create searchable OSINT queries</p>
                <p>• Queries appear in the Files & Subjects tab</p>
            </div>

            <div class="help-section">
                <h3>💡 Pro Tips</h3>
                <p>• Save your work frequently using "Save as Subject Profile"</p>
                <p>• Export subjects as markdown files for sharing or backup</p>
                <p>• Use meaningful names for your subjects and cases</p>
                <p>• The more information you provide, the better the generated queries</p>
                <p>• Works great for teaching OSINT investigation techniques!</p>
            </div>

            <button class="close-help" onclick="toggleHelp()">Close Help</button>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1>🌼 Daisy Tracker</h1>
            <p>Daisy Chain Digital Footprints With Dorking</p>
            <button class="help-button" onclick="toggleHelp()">❓ HELP</button>
        </div>

        <!-- Tab Navigation -->
        <div class="tab-nav">
            <button class="tab-button active" onclick="showTab('import-export')">📁 Files & Subjects</button>
            <button class="tab-button" onclick="showTab('user-input')">📝 User Input</button>
            <button class="tab-button" onclick="showTab('checkboxes')">☑️ Checkboxes</button>
            <button class="tab-button" onclick="showTab('queries')">🔍 Queries</button>
            <button class="tab-button" onclick="showTab('dork-learning')">📚 Dork Templates & Learning</button>
        </div>

        <!-- TAB 1: IMPORT/EXPORT -->
        <div id="import-export" class="tab-content active">
            <div class="file-manager">
                <h3 style="color: #f8e602; margin-bottom: 15px;">📁 File Management</h3>

                <div class="form-row">
                    <button class="btn" onclick="loadFiles()" style="margin-bottom: 15px;">🔄 Refresh Files</button>
                </div>
                <div class="file-list" id="file-list">
                    <p style="color: #888;">No saved subject files yet. Use "Save inputs as file" in the User Input tab to create files.</p>
                </div>
            </div>

            <div class="results" id="results-display">
                <h3>🔍 Generated Queries</h3>
                <div class="button-row" style="margin-bottom: 15px;">
                    <button class="btn btn-primary" onclick="copyAllQueries()">📋 Copy All Queries</button>
                </div>
                <div id="query-results"></div>
            </div>

            <!-- SUBJECTS MANAGEMENT SECTION -->
            <div style="padding: 20px; background-color: #1a1a1a; border: 2px solid #4bff21; border-radius: 5px; margin-top: 30px;">
                <h2 style="color: #4bff21; margin-bottom: 15px;">👤 Subjects Management</h2>
                <div style="margin-bottom: 20px;">
                    <button class="btn btn-primary" onclick="showTab('user-input')" style="font-size: 1em; padding: 12px 20px;">📝 Go to User Input (Add Subject)</button>
                    <button class="btn btn-success" onclick="viewSubjectsList()" style="margin-left: 10px; font-size: 1em; padding: 12px 20px;">👥 View All Subjects</button>
                </div>

                <!-- Import Subject -->
                <div style="padding: 15px; background-color: #0a0a0a; border: 2px solid #00f0ff; border-radius: 5px;">
                    <h3 style="color: #00f0ff; margin-bottom: 10px;">📥 Import Subject from Text File</h3>
                    <input type="file" id="subject-import-input" accept=".txt" style="display: none;" onchange="importSubjectFromMarkdown(event)">
                    <button class="btn btn-primary" onclick="document.getElementById('subject-import-input').click()">📂 Select TXT File to Import</button>
                </div>

                <!-- Subjects List Section -->
                <div id="subjects-list" style="margin-top: 20px; padding: 20px; background-color: #0a0a0a; border: 2px solid #4bff21; border-radius: 5px; display: none;">
                    <h3 style="color: #f8e602; margin-bottom: 15px;">👥 Saved Subjects</h3>

                    <!-- Search Box -->
                    <div style="margin-bottom: 15px;">
                        <input type="text" id="subjects-search" placeholder="🔍 Search subjects by name, gang, category..." onkeyup="searchSubjects()" style="width: 100%; padding: 10px; background-color: #1a1a1a; border: 2px solid #00f0ff; color: #4bff21; border-radius: 3px;">
                    </div>

                    <!-- Filter by Category -->
                    <div style="margin-bottom: 15px;">
                        <label style="color: #f8e602;">Filter by Category:</label>
                        <select id="subjects-category-filter" onchange="filterSubjectsByCategory()" style="width: 100%; padding: 10px; background-color: #1a1a1a; border: 1px solid #4bff21; color: #4bff21; border-radius: 3px;">
                            <option value="">All Categories</option>
                        </select>
                    </div>

                    <div id="subjects-list-container">
                        <!-- Subjects will be listed here -->
                    </div>

                    <button class="btn" onclick="hideSubjectsList()" style="margin-top: 15px;">Close List</button>
                </div>
            </div>

            <div class="button-row" style="margin-top: 20px;">
                <button class="btn btn-primary" onclick="showTab('user-input')">Next: User Input →</button>
            </div>
        </div>

        <!-- TAB 2: USER INPUT -->
        <div id="user-input" class="tab-content">
            <div class="notes-section">
                <h3>📝 Investigation Notes (Private - Not Used in Queries)</h3>
                <input type="text" id="case-name" placeholder="Case/Subject Name" style="margin-bottom: 10px; background-color: #0a0a0a; border: 1px solid #772289; color: #f4d5fd; padding: 10px; border-radius: 3px; width: 100%;">
                <textarea id="investigation-notes" placeholder="Enter private investigation notes, observations, timeline, evidence tracking...&#10;&#10;These notes will NOT be used in search queries - they are for your documentation only."></textarea>
            </div>

            <div class="form-section">
                <div class="section-title">👤 Person Information</div>
                <div class="form-row">
                    <div class="form-group">
                        <label>First Name:</label>
                        <input type="text" id="first-name" placeholder="First name">
                    </div>
                    <div class="form-group">
                        <label>Last Name:</label>
                        <input type="text" id="last-name" placeholder="Last name">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Middle Name/Initial:</label>
                        <input type="text" id="middle-name" placeholder="Middle name">
                    </div>
                    <div class="form-group">
                        <label>Aliases/Nicknames:</label>
                        <input type="text" id="aliases" placeholder="Nicknames/aliases (comma separated for multiple)">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Date of Birth:</label>
                        <input type="text" id="dob" placeholder="MM/DD/YYYY">
                    </div>
                    <div class="form-group">
                        <label>Age/Age Range:</label>
                        <input type="text" id="age" placeholder="e.g., 25 or 25-30">
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title">📍 Contact & Location</div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Email Address:</label>
                        <input type="email" id="email" placeholder="Email address">
                    </div>
                    <div class="form-group">
                        <label>Phone Number:</label>
                        <input type="tel" id="phone" placeholder="Phone number">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Username/Handle:</label>
                        <input type="text" id="username" placeholder="Username (comma separated for multiple)">
                    </div>
                    <div class="form-group">
                        <label>Account ID:</label>
                        <input type="text" id="account-id" placeholder="Numeric ID or identifier">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Street Address:</label>
                        <input type="text" id="address" placeholder="Street address">
                    </div>
                    <div class="form-group" style="opacity: 0; pointer-events: none;">
                        <!-- Spacer for alignment -->
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>City:</label>
                        <input type="text" id="city" placeholder="City">
                    </div>
                    <div class="form-group">
                        <label>State/Province:</label>
                        <input type="text" id="state" placeholder="State">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Country:</label>
                        <input type="text" id="country" placeholder="Country">
                    </div>
                    <div class="form-group">
                        <label>ZIP/Postal Code:</label>
                        <input type="text" id="zip" placeholder="ZIP code">
                    </div>
                </div>
            </div>

            <div class="form-section" style="background-color: #0a0a1a; border: 1px solid #00f0ff;">
                <div class="section-title" style="color: #00f0ff;">📱 Social Media Accounts</div>

                <div id="investigation-social-accounts-container">
                    <div class="social-account-entry" id="inv-social-entry-1">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Platform:</label>
                                <input type="text" class="inv-social-platform" placeholder="Facebook, Instagram, Twitter..." data-entry="1">
                            </div>
                            <div class="form-group">
                                <label>Username/Handle:</label>
                                <input type="text" class="inv-social-username" placeholder="@username" data-entry="1">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Account ID:</label>
                                <input type="text" class="inv-social-account-id" placeholder="Numeric ID or unique identifier" data-entry="1">
                            </div>
                            <div class="form-group">
                                <label>Profile URL:</label>
                                <input type="text" class="inv-social-url" placeholder="https://..." data-entry="1">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Display Name:</label>
                                <input type="text" class="inv-social-display-name" placeholder="Name shown on profile" data-entry="1">
                            </div>
                        </div>
                    </div>
                </div>
                <button class="btn" onclick="addInvestigationSocialAccount()" style="margin-top: 8px; background-color: #00f0ff; color: #000; font-size: 0.9em;">➕ Add Another Social Account</button>
            </div>

            <div class="form-section">
                <div class="section-title">💼 Professional & Education</div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Occupation/Job Title:</label>
                        <input type="text" id="occupation" placeholder="Job title">
                    </div>
                    <div class="form-group">
                        <label>Employer/Company:</label>
                        <input type="text" id="employer" placeholder="Company name">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>School/University:</label>
                        <input type="text" id="school" placeholder="Educational institution">
                    </div>
                    <div class="form-group">
                        <label>Interests/Hobbies:</label>
                        <input type="text" id="interests" placeholder="Interests (comma separated)">
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title">🏠 Property (Residence/Business)</div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Property Address:</label>
                        <input type="text" id="property-address" placeholder="Street address of property">
                    </div>
                    <div class="form-group">
                        <label>Property Type:</label>
                        <input type="text" id="property-type" placeholder="e.g., Residence, Business, Apartment">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Property Owner:</label>
                        <input type="text" id="property-owner" placeholder="Owner name">
                    </div>
                    <div class="form-group">
                        <label>Business Name (if applicable):</label>
                        <input type="text" id="business-name" placeholder="Business name at location">
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title">🚗 Vehicles</div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Vehicle VIN:</label>
                        <input type="text" id="vehicle-vin" placeholder="Vehicle Identification Number">
                    </div>
                    <div class="form-group">
                        <label>License Plate:</label>
                        <input type="text" id="license-plate" placeholder="License plate number">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Vehicle Make:</label>
                        <input type="text" id="vehicle-make" placeholder="e.g., Toyota, Ford, Honda">
                    </div>
                    <div class="form-group">
                        <label>Vehicle Model:</label>
                        <input type="text" id="vehicle-model" placeholder="e.g., Camry, F-150, Civic">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Vehicle Year:</label>
                        <input type="text" id="vehicle-year" placeholder="Vehicle year">
                    </div>
                    <div class="form-group">
                        <label>Vehicle Color:</label>
                        <input type="text" id="vehicle-color" placeholder="Vehicle color">
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title">📦 Misc Property</div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Serial Number:</label>
                        <input type="text" id="serial-number" placeholder="Serial number">
                    </div>
                    <div class="form-group">
                        <label>Make:</label>
                        <input type="text" id="misc-make" placeholder="e.g., Apple, Sony, Samsung">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Model:</label>
                        <input type="text" id="misc-model" placeholder="e.g., MacBook Pro, PlayStation 5">
                    </div>
                    <div class="form-group">
                        <label>Description:</label>
                        <input type="text" id="property-description" placeholder="e.g., Electronics, Jewelry, Tools">
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title">🔍 Additional Information</div>
                <div class="form-group">
                    <label>Known Associates:</label>
                    <input type="text" id="associates" placeholder="Names of associates, friends, family (comma separated)">
                </div>
                <div class="form-group">
                    <label>IP Address (for technical investigation):</label>
                    <input type="text" id="ip-address" placeholder="IP address">
                </div>
                <div class="form-group">
                    <label>Domain/Website:</label>
                    <input type="text" id="domain" placeholder="Domain or website URL">
                </div>
                <div class="form-group">
                    <label>Keywords for Search:</label>
                    <input type="text" id="keywords" placeholder="Additional keywords (comma separated)">
                </div>
            </div>

            <!-- SAVE INPUTS AS FILE SECTION -->
            <div class="form-section" style="border: 3px solid #f8e602; background-color: #1a1a0a; margin-top: 20px;" id="save-inputs-section">
                <div class="section-title" style="color: #f8e602;">💾 Save All Inputs as Subject Profile</div>
                <p style="color: #888; font-size: 0.9em; margin-bottom: 15px;">
                    <strong style="color: #4bff21;">Ready to save your investigation?</strong><br>
                    This will save ALL the information you entered above (person info, contact details, property, vehicles, etc.) plus your Case Name and Investigation Notes from the top of this page as a TXT file.
                </p>

                <div style="margin-top: 15px;">
                    <button class="btn btn-success" onclick="saveSubject()" style="font-size: 1em; padding: 12px 20px;">💾 Save as Subject Profile (TXT File)</button>
                </div>
            </div>

            <div class="button-row">
                <button class="btn" onclick="showTab('import-export')">← Back: Import/Export</button>
                <button class="btn btn-primary" onclick="showTab('checkboxes')">Next: Checkboxes →</button>
                <button class="btn btn-warning" onclick="generateQueries()">🔍 Generate Queries</button>
            </div>
        </div>

        <!-- TAB 3: CHECKBOXES (ALL CHECKBOXES) -->
        <div id="checkboxes" class="tab-content">
            <div class="checkbox-section">
                <!-- BASIC SEARCHES - Core Queries -->
                <details open style="margin-bottom: 10px; border: 2px solid #4bff21; border-radius: 5px; padding: 15px; background: rgba(75, 255, 33, 0.05);">
                    <summary style="color: #4bff21; cursor: pointer; font-weight: bold; font-size: 1.1em; padding: 5px;">🔍 Basic Searches (4 core queries)</summary>
                    <p style="color: #888; font-size: 0.85em; margin: 10px 0;">Foundation searches - usually checked for most investigations</p>

                <div class="checkbox-grid">
                    <!-- Core Base Searches -->
                    <div class="checkbox-item">
                        <input type="checkbox" id="base-general" checked>
                        <label for="base-general">📝 General Person Search</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="base-records" checked>
                        <label for="base-records">📄 Official Records & Documents</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="base-news" checked>
                        <label for="base-news">📰 News & Media Coverage</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="base-government" checked>
                        <label for="base-government">🏛️ Government & Public Records</label>
                    </div>
                </div>
                </details>

                <!-- PERSON CATEGORIES - Job/Role Specific -->
                <details style="margin-bottom: 10px; border: 2px solid #f4d5fd; border-radius: 5px; padding: 15px; background: rgba(244, 213, 253, 0.05);">
                    <summary style="color: #f4d5fd; cursor: pointer; font-weight: bold; font-size: 1.1em; padding: 5px;">👤 Person Categories (9 specialized roles)</summary>
                    <p style="color: #888; font-size: 0.85em; margin: 10px 0;">Check if investigating someone in a specific profession</p>

                <div class="checkbox-grid">
                    <div class="checkbox-item">
                        <input type="checkbox" id="person-politician">
                        <label for="person-politician">🏛️ Politician/Public Official</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="person-law-enforcement">
                        <label for="person-law-enforcement">👮 Law Enforcement Officer</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="person-military">
                        <label for="person-military">🪖 Military Personnel</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="person-judge">
                        <label for="person-judge">⚖️ Judge/Legal Professional</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="person-doctor">
                        <label for="person-doctor">🩺 Medical Professional</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="person-ceo">
                        <label for="person-ceo">💼 CEO/Business Executive</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="person-professor">
                        <label for="person-professor">🎓 Professor/Academic</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="person-journalist">
                        <label for="person-journalist">📰 Journalist/Reporter</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="person-celebrity">
                        <label for="person-celebrity">⭐ Celebrity/Influencer</label>
                    </div>
                </div>
                </details>

                <!-- INVESTIGATION FOCUS - What to search for -->
                <details style="margin-bottom: 10px; border: 2px solid #00f0ff; border-radius: 5px; padding: 15px; background: rgba(0, 240, 255, 0.05);">
                    <summary style="color: #00f0ff; cursor: pointer; font-weight: bold; font-size: 1.1em; padding: 5px;">🎯 Investigation Focus (8 search types)</summary>
                    <p style="color: #888; font-size: 0.85em; margin: 10px 0;">What specific information are you looking for?</p>

                <div class="checkbox-grid">
                    <div class="checkbox-item">
                        <input type="checkbox" id="people-background">
                        <label for="people-background">📋 Background Information</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="people-family">
                        <label for="people-family">👨‍👩‍👧‍👦 Family Connections</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="people-address">
                        <label for="people-address">🏠 Address History</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="people-phone">
                        <label for="people-phone">📞 Phone Records</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="people-email">
                        <label for="people-email">📧 Email Traces</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="people-social">
                        <label for="people-social">👥 Social Connections</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="people-associates">
                        <label for="people-associates">🤝 Known Associates</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="people-professional">
                        <label for="people-professional">💼 Professional Networks</label>
                    </div>
                </div>
                </details>

                <!-- ORGANIZATION AFFILIATIONS -->
                <details style="margin-bottom: 10px; border: 2px solid #f8e602; border-radius: 5px; padding: 15px; background: rgba(248, 230, 2, 0.05);">
                    <summary style="color: #f8e602; cursor: pointer; font-weight: bold; font-size: 1.1em; padding: 5px;">🏢 Organization Affiliations (9 types)</summary>
                    <p style="color: #888; font-size: 0.85em; margin: 10px 0;">Organizations the person might be affiliated with</p>

                <div class="checkbox-grid">
                    <div class="checkbox-item">
                        <input type="checkbox" id="org-corporate">
                        <label for="org-corporate">🏢 Corporate Entities</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="org-business">
                        <label for="org-business">🚀 Business/Startup</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="org-educational">
                        <label for="org-educational">🎓 Educational Institutions (Schools, Universities, Colleges)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="org-nonprofit">
                        <label for="org-nonprofit">🤝 Non-Profit Organizations</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="org-religious">
                        <label for="org-religious">⛪ Religious Organizations</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="org-club">
                        <label for="org-club">🎭 Club/Society</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="org-hospital">
                        <label for="org-hospital">🏥 Hospital/Medical</label>
                    </div>
                </div>
                </details>

                <!-- CRIMINAL RECORDS -->
                <details style="margin-bottom: 10px; border: 2px solid #dc3545; border-radius: 5px; padding: 15px; background: rgba(220, 53, 69, 0.05);">
                    <summary style="color: #dc3545; cursor: pointer; font-weight: bold; font-size: 1.1em; padding: 5px;">🚨 Criminal Records (6 types)</summary>
                    <p style="color: #888; font-size: 0.85em; margin: 10px 0;">Search for criminal history and legal records</p>

                <div class="checkbox-grid">
                    <div class="checkbox-item">
                        <input type="checkbox" id="criminal-all-records">
                        <label for="criminal-all-records">📋 ALL Criminal Records (Arrest, Mugshots, Court, Warrants)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="criminal-arrests">
                        <label for="criminal-arrests">🚨 Arrest Records</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="criminal-mugshots">
                        <label for="criminal-mugshots">📸 Mugshots</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="criminal-court">
                        <label for="criminal-court">⚖️ Court Records</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="criminal-warrants">
                        <label for="criminal-warrants">📜 Active Warrants</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="criminal-sex-offender">
                        <label for="criminal-sex-offender">⚠️ Sex Offender Registry</label>
                    </div>
                </div>
                </details>

                <!-- PROPERTY & ASSETS -->
                <details style="margin-bottom: 10px; border: 2px solid #28a745; border-radius: 5px; padding: 15px; background: rgba(40, 167, 69, 0.05);">
                    <summary style="color: #28a745; cursor: pointer; font-weight: bold; font-size: 1.1em; padding: 5px;">🏡 Property & Assets (5 types)</summary>
                    <p style="color: #888; font-size: 0.85em; margin: 10px 0;">Search for property ownership and asset records</p>

                <div class="checkbox-grid">
                    <div class="checkbox-item">
                        <input type="checkbox" id="property-real-estate">
                        <label for="property-real-estate">🏡 Real Estate Records (Ownership, Sales, Tax)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="property-vehicles">
                        <label for="property-vehicles">🚗 Vehicle Records (Registration, VIN, Title)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="property-business">
                        <label for="property-business">🏢 Business Ownership (LLC, Corporation, Partnership)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="property-boats">
                        <label for="property-boats">⛵ Boats & Marine Vessels</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="property-aircraft">
                        <label for="property-aircraft">✈️ Aircraft Registration</label>
                    </div>
                </div>
                </details>

                <!-- IP INVESTIGATION -->
                <details style="margin-bottom: 10px; border: 2px solid #17a2b8; border-radius: 5px; padding: 15px; background: rgba(23, 162, 184, 0.05);">
                    <summary style="color: #17a2b8; cursor: pointer; font-weight: bold; font-size: 1.1em; padding: 5px;">🌐 IP Investigation (1 type)</summary>
                    <p style="color: #888; font-size: 0.85em; margin: 10px 0;">Search for IP address information</p>

                <div class="checkbox-grid">
                    <div class="checkbox-item">
                        <input type="checkbox" id="tech-ip-all">
                        <label for="tech-ip-all">🔍 IP Investigation (WHOIS, Geolocation, Owner)</label>
                    </div>
                </div>
                </details>
            </div>

            <div class="checkbox-section">
                <h4>🌐 Social Media Platforms - Select Individual Platforms</h4>
                <p style="color: #888; font-size: 0.85em; margin-bottom: 10px;">Check only the platforms your target uses.</p>
                <p style="color: #4bff21; font-size: 0.85em; margin-bottom: 15px; padding: 8px; background: rgba(75, 255, 33, 0.1); border-left: 3px solid #4bff21;">
                    ✨ <strong>Auto-Searches Per Platform:</strong> Profile Info, Recent Posts, Comments & Replies, Photos & Videos, Liked/Shared Content, Mentions, Bio/About Section, Contact Info, Friends/Followers, Groups/Communities, Activity Timeline, Professional Info, Location Check-Ins
                </p>

                <div style="margin-bottom: 15px;">
                    <button class="btn" style="padding: 8px 15px; font-size: 0.85em;" onclick="checkAllSocial(true)">✓ Check All</button>
                    <button class="btn" style="padding: 8px 15px; font-size: 0.85em;" onclick="checkAllSocial(false)">✗ Uncheck All</button>
                </div>

                <!-- Collapsible: Major Social Media -->
                <details style="margin-bottom: 10px; border: 1px solid #f8e602; border-radius: 5px; padding: 10px; background: rgba(248, 230, 2, 0.05);">
                    <summary style="color: #f8e602; cursor: pointer; font-weight: bold; padding: 5px;">📱 Major Social Media (6 platforms) - Click to expand</summary>
                    <div class="checkbox-grid" style="margin-top: 10px;">
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-facebook" class="social-platform">
                        <label for="platform-facebook">Facebook</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-instagram" class="social-platform">
                        <label for="platform-instagram">Instagram</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-twitter" class="social-platform">
                        <label for="platform-twitter">Twitter / X</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-tiktok" class="social-platform">
                        <label for="platform-tiktok">TikTok</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-snapchat" class="social-platform">
                        <label for="platform-snapchat">Snapchat</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-tumblr" class="social-platform">
                        <label for="platform-tumblr">Tumblr</label>
                    </div>
                    </div>
                </details>

                <!-- Collapsible: Professional Networks & Development -->
                <details style="margin-bottom: 10px; border: 1px solid #f8e602; border-radius: 5px; padding: 10px; background: rgba(248, 230, 2, 0.05);">
                    <summary style="color: #f8e602; cursor: pointer; font-weight: bold; padding: 5px;">💼 Professional Networks & Development (8 platforms) - Click to expand</summary>
                    <div class="checkbox-grid" style="margin-top: 10px;">
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-linkedin" class="social-platform">
                        <label for="platform-linkedin">LinkedIn</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-indeed" class="social-platform">
                        <label for="platform-indeed">Indeed</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-glassdoor" class="social-platform">
                        <label for="platform-glassdoor">Glassdoor</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-github" class="social-platform">
                        <label for="platform-github">GitHub</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-gitlab" class="social-platform">
                        <label for="platform-gitlab">GitLab</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-stackoverflow" class="social-platform">
                        <label for="platform-stackoverflow">Stack Overflow</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-medium" class="social-platform">
                        <label for="platform-medium">Medium</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-substack" class="social-platform">
                        <label for="platform-substack">Substack</label>
                    </div>
                    </div>
                </details>

                <!-- Collapsible: Video Platforms -->
                <details style="margin-bottom: 10px; border: 1px solid #f8e602; border-radius: 5px; padding: 10px; background: rgba(248, 230, 2, 0.05);">
                    <summary style="color: #f8e602; cursor: pointer; font-weight: bold; padding: 5px;">📹 Video Platforms (8 platforms) - Click to expand</summary>
                    <div class="checkbox-grid" style="margin-top: 10px;">
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-youtube" class="social-platform">
                        <label for="platform-youtube">YouTube</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-twitch" class="social-platform">
                        <label for="platform-twitch">Twitch</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-vimeo" class="social-platform">
                        <label for="platform-vimeo">Vimeo</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-rumble" class="social-platform">
                        <label for="platform-rumble">Rumble</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-dailymotion" class="social-platform">
                        <label for="platform-dailymotion">Dailymotion</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-bitchute" class="social-platform">
                        <label for="platform-bitchute">BitChute</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-odysee" class="social-platform">
                        <label for="platform-odysee">Odysee</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-triller" class="social-platform">
                        <label for="platform-triller">Triller</label>
                    </div>
                    </div>
                </details>

                <!-- Collapsible: Gaming & Communities -->
                <details style="margin-bottom: 10px; border: 1px solid #f8e602; border-radius: 5px; padding: 10px; background: rgba(248, 230, 2, 0.05);">
                    <summary style="color: #f8e602; cursor: pointer; font-weight: bold; padding: 5px;">🎮 Gaming & Communities (11 platforms) - Click to expand</summary>
                    <div class="checkbox-grid" style="margin-top: 10px;">
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-discord" class="social-platform">
                        <label for="platform-discord">Discord</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-steam" class="social-platform">
                        <label for="platform-steam">Steam</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-xbox" class="social-platform">
                        <label for="platform-xbox">Xbox Live</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-playstation" class="social-platform">
                        <label for="platform-playstation">PlayStation Network</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-reddit" class="social-platform">
                        <label for="platform-reddit">Reddit</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-4chan" class="social-platform">
                        <label for="platform-4chan">4chan</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-quora" class="social-platform">
                        <label for="platform-quora">Quora</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-kick" class="social-platform">
                        <label for="platform-kick">Kick</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-roblox" class="social-platform">
                        <label for="platform-roblox">Roblox</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-epicgames" class="social-platform">
                        <label for="platform-epicgames">Epic Games</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-battlenet" class="social-platform">
                        <label for="platform-battlenet">Battle.net</label>
                    </div>
                    </div>
                </details>

                <!-- Collapsible: Messaging Apps -->
                <details style="margin-bottom: 10px; border: 1px solid #f8e602; border-radius: 5px; padding: 10px; background: rgba(248, 230, 2, 0.05);">
                    <summary style="color: #f8e602; cursor: pointer; font-weight: bold; padding: 5px;">💬 Messaging Apps (6 platforms) - Click to expand</summary>
                    <div class="checkbox-grid" style="margin-top: 10px;">
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-telegram" class="social-platform">
                        <label for="platform-telegram">Telegram</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-whatsapp" class="social-platform">
                        <label for="platform-whatsapp">WhatsApp</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-signal" class="social-platform">
                        <label for="platform-signal">Signal</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-viber" class="social-platform">
                        <label for="platform-viber">Viber</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-kik" class="social-platform">
                        <label for="platform-kik">Kik</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-skype" class="social-platform">
                        <label for="platform-skype">Skype</label>
                    </div>
                    </div>
                </details>

                <!-- Collapsible: Dating Platforms -->
                <details style="margin-bottom: 10px; border: 1px solid #f8e602; border-radius: 5px; padding: 10px; background: rgba(248, 230, 2, 0.05);">
                    <summary style="color: #f8e602; cursor: pointer; font-weight: bold; padding: 5px;">❤️ Dating Platforms (8 platforms) - Click to expand</summary>
                    <div class="checkbox-grid" style="margin-top: 10px;">
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-tinder" class="social-platform">
                        <label for="platform-tinder">Tinder</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-bumble" class="social-platform">
                        <label for="platform-bumble">Bumble</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-match" class="social-platform">
                        <label for="platform-match">Match.com</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-hinge" class="social-platform">
                        <label for="platform-hinge">Hinge</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-okcupid" class="social-platform">
                        <label for="platform-okcupid">OKCupid</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-pof" class="social-platform">
                        <label for="platform-pof">POF</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-grindr" class="social-platform">
                        <label for="platform-grindr">Grindr</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-badoo" class="social-platform">
                        <label for="platform-badoo">Badoo</label>
                    </div>
                    </div>
                </details>

                <!-- Collapsible: Creative & Portfolio -->
                <details style="margin-bottom: 10px; border: 1px solid #f8e602; border-radius: 5px; padding: 10px; background: rgba(248, 230, 2, 0.05);">
                    <summary style="color: #f8e602; cursor: pointer; font-weight: bold; padding: 5px;">🎨 Creative & Portfolio (4 platforms) - Click to expand</summary>
                    <div class="checkbox-grid" style="margin-top: 10px;">
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-pinterest" class="social-platform">
                        <label for="platform-pinterest">Pinterest</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-deviantart" class="social-platform">
                        <label for="platform-deviantart">DeviantArt</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-behance" class="social-platform">
                        <label for="platform-behance">Behance</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-dribbble" class="social-platform">
                        <label for="platform-dribbble">Dribbble</label>
                    </div>
                    </div>
                </details>

                <!-- Collapsible: International Platforms -->
                <details style="margin-bottom: 10px; border: 1px solid #f8e602; border-radius: 5px; padding: 10px; background: rgba(248, 230, 2, 0.05);">
                    <summary style="color: #f8e602; cursor: pointer; font-weight: bold; padding: 5px;">🌏 International Platforms (7 platforms) - Click to expand</summary>
                    <div class="checkbox-grid" style="margin-top: 10px;">
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-vk" class="social-platform">
                        <label for="platform-vk">VK (Russia)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-wechat" class="social-platform">
                        <label for="platform-wechat">WeChat (China)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-qq" class="social-platform">
                        <label for="platform-qq">QQ (China)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-weibo" class="social-platform">
                        <label for="platform-weibo">Weibo (China)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-line" class="social-platform">
                        <label for="platform-line">LINE (Japan)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-ok" class="social-platform">
                        <label for="platform-ok">OK (Odnoklassniki - Russia)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-baidu" class="social-platform">
                        <label for="platform-baidu">Baidu (China)</label>
                    </div>
                    </div>
                </details>

                <!-- Collapsible: Alternative/Free Speech Platforms -->
                <details style="margin-bottom: 10px; border: 1px solid #f8e602; border-radius: 5px; padding: 10px; background: rgba(248, 230, 2, 0.05);">
                    <summary style="color: #f8e602; cursor: pointer; font-weight: bold; padding: 5px;">🗣️ Alternative/Free Speech Platforms (5 platforms) - Click to expand</summary>
                    <div class="checkbox-grid" style="margin-top: 10px;">
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-parler" class="social-platform">
                        <label for="platform-parler">Parler</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-gab" class="social-platform">
                        <label for="platform-gab">Gab</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-truthsocial" class="social-platform">
                        <label for="platform-truthsocial">Truth Social</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-gettr" class="social-platform">
                        <label for="platform-gettr">Gettr</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="platform-minds" class="social-platform">
                        <label for="platform-minds">Minds</label>
                    </div>
                    </div>
                </details>
            </div>

            <!-- MARKETPLACE/CLASSIFIEDS SECTION -->
            <div class="checkbox-section">
                <details style="margin-bottom: 10px; border: 2px solid #4bff21; border-radius: 5px; padding: 15px; background: rgba(75, 255, 33, 0.05);">
                    <summary style="color: #4bff21; cursor: pointer; font-weight: bold; font-size: 1.1em; padding: 5px;">🛒 Marketplace & Classifieds Platforms - Click to expand/collapse</summary>
                    <p style="color: #888; font-size: 0.85em; margin: 10px 0;">Search marketplaces for items being sold by the target - great for tracking personal property, vehicles, stolen items, and more</p>

                <div class="checkbox-grid">
                    <div class="checkbox-item">
                        <input type="checkbox" id="marketplace-facebook" class="marketplace-platform">
                        <label for="marketplace-facebook">Facebook Marketplace</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="marketplace-craigslist" class="marketplace-platform">
                        <label for="marketplace-craigslist">Craigslist</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="marketplace-offerup" class="marketplace-platform">
                        <label for="marketplace-offerup">OfferUp</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="marketplace-ebay" class="marketplace-platform">
                        <label for="marketplace-ebay">eBay</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="marketplace-mercari" class="marketplace-platform">
                        <label for="marketplace-mercari">Mercari</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="marketplace-poshmark" class="marketplace-platform">
                        <label for="marketplace-poshmark">Poshmark</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="marketplace-letgo" class="marketplace-platform">
                        <label for="marketplace-letgo">LetGo</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="marketplace-varagesale" class="marketplace-platform">
                        <label for="marketplace-varagesale">VarageSale</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="marketplace-nextdoor" class="marketplace-platform">
                        <label for="marketplace-nextdoor">Nextdoor</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="marketplace-kijiji" class="marketplace-platform">
                        <label for="marketplace-kijiji">Kijiji (Canada)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="stolen-all-marketplaces">
                        <label for="stolen-all-marketplaces">🛒 ALL Marketplaces (search all at once)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="stolen-auctions">
                        <label for="stolen-auctions">🔨 Auction Sites (Government, Liquidation, Pawn)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="stolen-specialized">
                        <label for="stolen-specialized">🎯 Specialized Sites (Auto, Electronics, Collectibles)</label>
                    </div>
                </div>
                </details>
            </div>


            <div class="checkbox-section">
                <h4>🌍 International Domain Searches - Select Individual Countries</h4>
                <p style="color: #888; font-size: 0.85em; margin-bottom: 10px;">Check only the countries relevant to your investigation (e.g., if target is in UK, check only UK)</p>

                <!-- Collapsible: Americas -->
                <details style="margin-bottom: 10px; border: 1px solid #00f0ff; border-radius: 5px; padding: 10px; background: rgba(0, 240, 255, 0.05);">
                    <summary style="color: #00f0ff; cursor: pointer; font-weight: bold; padding: 5px;">🌎 Americas (10 countries) - Click to expand</summary>
                    <div class="checkbox-grid" style="margin-top: 10px;">
                        <div class="checkbox-item"><input type="checkbox" id="domain-us" class="domain-checkbox"><label for="domain-us">🇺🇸 United States (.us)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-ca" class="domain-checkbox"><label for="domain-ca">🇨🇦 Canada (.ca)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-br" class="domain-checkbox"><label for="domain-br">🇧🇷 Brazil (.br)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-mx" class="domain-checkbox"><label for="domain-mx">🇲🇽 Mexico (.mx)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-ar" class="domain-checkbox"><label for="domain-ar">🇦🇷 Argentina (.ar)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-cl" class="domain-checkbox"><label for="domain-cl">🇨🇱 Chile (.cl)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-co" class="domain-checkbox"><label for="domain-co">🇨🇴 Colombia (.co)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-pe" class="domain-checkbox"><label for="domain-pe">🇵🇪 Peru (.pe)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-ve" class="domain-checkbox"><label for="domain-ve">🇻🇪 Venezuela (.ve)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-pr" class="domain-checkbox"><label for="domain-pr">🇵🇷 Puerto Rico (.pr)</label></div>
                    </div>
                </details>

                <!-- Collapsible: Europe -->
                <details style="margin-bottom: 10px; border: 1px solid #00f0ff; border-radius: 5px; padding: 10px; background: rgba(0, 240, 255, 0.05);">
                    <summary style="color: #00f0ff; cursor: pointer; font-weight: bold; padding: 5px;">🇪🇺 Europe (25 countries) - Click to expand</summary>
                    <div class="checkbox-grid" style="margin-top: 10px;">
                        <div class="checkbox-item"><input type="checkbox" id="domain-uk" class="domain-checkbox"><label for="domain-uk">🇬🇧 United Kingdom (.uk)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-de" class="domain-checkbox"><label for="domain-de">🇩🇪 Germany (.de)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-fr" class="domain-checkbox"><label for="domain-fr">🇫🇷 France (.fr)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-it" class="domain-checkbox"><label for="domain-it">🇮🇹 Italy (.it)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-es" class="domain-checkbox"><label for="domain-es">🇪🇸 Spain (.es)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-nl" class="domain-checkbox"><label for="domain-nl">🇳🇱 Netherlands (.nl)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-se" class="domain-checkbox"><label for="domain-se">🇸🇪 Sweden (.se)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-no" class="domain-checkbox"><label for="domain-no">🇳🇴 Norway (.no)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-dk" class="domain-checkbox"><label for="domain-dk">🇩🇰 Denmark (.dk)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-fi" class="domain-checkbox"><label for="domain-fi">🇫🇮 Finland (.fi)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-pl" class="domain-checkbox"><label for="domain-pl">🇵🇱 Poland (.pl)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-cz" class="domain-checkbox"><label for="domain-cz">🇨🇿 Czech Republic (.cz)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-at" class="domain-checkbox"><label for="domain-at">🇦🇹 Austria (.at)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-ch" class="domain-checkbox"><label for="domain-ch">🇨🇭 Switzerland (.ch)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-be" class="domain-checkbox"><label for="domain-be">🇧🇪 Belgium (.be)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-pt" class="domain-checkbox"><label for="domain-pt">🇵🇹 Portugal (.pt)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-gr" class="domain-checkbox"><label for="domain-gr">🇬🇷 Greece (.gr)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-ie" class="domain-checkbox"><label for="domain-ie">🇮🇪 Ireland (.ie)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-ru" class="domain-checkbox"><label for="domain-ru">🇷🇺 Russia (.ru)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-ua" class="domain-checkbox"><label for="domain-ua">🇺🇦 Ukraine (.ua)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-ro" class="domain-checkbox"><label for="domain-ro">🇷🇴 Romania (.ro)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-hu" class="domain-checkbox"><label for="domain-hu">🇭🇺 Hungary (.hu)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-bg" class="domain-checkbox"><label for="domain-bg">🇧🇬 Bulgaria (.bg)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-tr" class="domain-checkbox"><label for="domain-tr">🇹🇷 Turkey (.tr)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-is" class="domain-checkbox"><label for="domain-is">🇮🇸 Iceland (.is)</label></div>
                    </div>
                </details>

                <!-- Collapsible: Asia & Pacific -->
                <details style="margin-bottom: 10px; border: 1px solid #00f0ff; border-radius: 5px; padding: 10px; background: rgba(0, 240, 255, 0.05);">
                    <summary style="color: #00f0ff; cursor: pointer; font-weight: bold; padding: 5px;">🌏 Asia & Pacific (20 countries) - Click to expand</summary>
                    <div class="checkbox-grid" style="margin-top: 10px;">
                        <div class="checkbox-item"><input type="checkbox" id="domain-cn" class="domain-checkbox"><label for="domain-cn">🇨🇳 China (.cn)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-jp" class="domain-checkbox"><label for="domain-jp">🇯🇵 Japan (.jp)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-kr" class="domain-checkbox"><label for="domain-kr">🇰🇷 South Korea (.kr)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-in" class="domain-checkbox"><label for="domain-in">🇮🇳 India (.in)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-au" class="domain-checkbox"><label for="domain-au">🇦🇺 Australia (.au)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-nz" class="domain-checkbox"><label for="domain-nz">🇳🇿 New Zealand (.nz)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-sg" class="domain-checkbox"><label for="domain-sg">🇸🇬 Singapore (.sg)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-th" class="domain-checkbox"><label for="domain-th">🇹🇭 Thailand (.th)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-my" class="domain-checkbox"><label for="domain-my">🇲🇾 Malaysia (.my)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-id" class="domain-checkbox"><label for="domain-id">🇮🇩 Indonesia (.id)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-ph" class="domain-checkbox"><label for="domain-ph">🇵🇭 Philippines (.ph)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-vn" class="domain-checkbox"><label for="domain-vn">🇻🇳 Vietnam (.vn)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-tw" class="domain-checkbox"><label for="domain-tw">🇹🇼 Taiwan (.tw)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-hk" class="domain-checkbox"><label for="domain-hk">🇭🇰 Hong Kong (.hk)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-pk" class="domain-checkbox"><label for="domain-pk">🇵🇰 Pakistan (.pk)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-bd" class="domain-checkbox"><label for="domain-bd">🇧🇩 Bangladesh (.bd)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-lk" class="domain-checkbox"><label for="domain-lk">🇱🇰 Sri Lanka (.lk)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-np" class="domain-checkbox"><label for="domain-np">🇳🇵 Nepal (.np)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-kh" class="domain-checkbox"><label for="domain-kh">🇰🇭 Cambodia (.kh)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-mm" class="domain-checkbox"><label for="domain-mm">🇲🇲 Myanmar (.mm)</label></div>
                    </div>
                </details>

                <!-- Collapsible: Middle East -->
                <details style="margin-bottom: 10px; border: 1px solid #00f0ff; border-radius: 5px; padding: 10px; background: rgba(0, 240, 255, 0.05);">
                    <summary style="color: #00f0ff; cursor: pointer; font-weight: bold; padding: 5px;">🌍 Middle East (12 countries) - Click to expand</summary>
                    <div class="checkbox-grid" style="margin-top: 10px;">
                        <div class="checkbox-item"><input type="checkbox" id="domain-ae" class="domain-checkbox"><label for="domain-ae">🇦🇪 UAE (.ae)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-sa" class="domain-checkbox"><label for="domain-sa">🇸🇦 Saudi Arabia (.sa)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-il" class="domain-checkbox"><label for="domain-il">🇮🇱 Israel (.il)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-ir" class="domain-checkbox"><label for="domain-ir">🇮🇷 Iran (.ir)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-iq" class="domain-checkbox"><label for="domain-iq">🇮🇶 Iraq (.iq)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-jo" class="domain-checkbox"><label for="domain-jo">🇯🇴 Jordan (.jo)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-lb" class="domain-checkbox"><label for="domain-lb">🇱🇧 Lebanon (.lb)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-kw" class="domain-checkbox"><label for="domain-kw">🇰🇼 Kuwait (.kw)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-qa" class="domain-checkbox"><label for="domain-qa">🇶🇦 Qatar (.qa)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-bh" class="domain-checkbox"><label for="domain-bh">🇧🇭 Bahrain (.bh)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-om" class="domain-checkbox"><label for="domain-om">🇴🇲 Oman (.om)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-ye" class="domain-checkbox"><label for="domain-ye">🇾🇪 Yemen (.ye)</label></div>
                    </div>
                </details>

                <!-- Collapsible: Africa -->
                <details style="margin-bottom: 10px; border: 1px solid #00f0ff; border-radius: 5px; padding: 10px; background: rgba(0, 240, 255, 0.05);">
                    <summary style="color: #00f0ff; cursor: pointer; font-weight: bold; padding: 5px;">🌍 Africa (10 countries) - Click to expand</summary>
                    <div class="checkbox-grid" style="margin-top: 10px;">
                        <div class="checkbox-item"><input type="checkbox" id="domain-za" class="domain-checkbox"><label for="domain-za">🇿🇦 South Africa (.za)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-ng" class="domain-checkbox"><label for="domain-ng">🇳🇬 Nigeria (.ng)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-eg" class="domain-checkbox"><label for="domain-eg">🇪🇬 Egypt (.eg)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-ke" class="domain-checkbox"><label for="domain-ke">🇰🇪 Kenya (.ke)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-gh" class="domain-checkbox"><label for="domain-gh">🇬🇭 Ghana (.gh)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-tz" class="domain-checkbox"><label for="domain-tz">🇹🇿 Tanzania (.tz)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-ug" class="domain-checkbox"><label for="domain-ug">🇺🇬 Uganda (.ug)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-ma" class="domain-checkbox"><label for="domain-ma">🇲🇦 Morocco (.ma)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-dz" class="domain-checkbox"><label for="domain-dz">🇩🇿 Algeria (.dz)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="domain-tn" class="domain-checkbox"><label for="domain-tn">🇹🇳 Tunisia (.tn)</label></div>
                    </div>
                </details>
            </div>

            <!-- DOCUMENT FILE TYPES SECTION -->
            <div class="checkbox-section">
                <details open style="margin-bottom: 10px; border: 2px solid #f8e602; border-radius: 5px; padding: 15px; background: rgba(248, 230, 2, 0.05);">
                    <summary style="color: #f8e602; cursor: pointer; font-weight: bold; font-size: 1.1em; padding: 5px;">📄 Document File Types - Click to expand/collapse</summary>
                    <p style="color: #888; font-size: 0.85em; margin: 10px 0;">Auto-searches for documents containing the person's name, username, or email - great for finding resumes, presentations, spreadsheets, etc.</p>

                <details style="margin-bottom: 10px; border: 1px solid #00f0ff; border-radius: 5px; padding: 10px; background: rgba(0, 240, 255, 0.05);">
                    <summary style="color: #00f0ff; cursor: pointer; font-weight: bold; padding: 5px;">📁 Office Documents (5 types) - Click to expand</summary>
                    <div class="checkbox-grid" style="margin-top: 10px;">
                        <div class="checkbox-item">
                            <input type="checkbox" id="doc-pdf">
                            <label for="doc-pdf">PDF Documents (.pdf)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="doc-word">
                            <label for="doc-word">Microsoft Word (.doc, .docx)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="doc-excel">
                            <label for="doc-excel">Microsoft Excel (.xls, .xlsx)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="doc-powerpoint">
                            <label for="doc-powerpoint">Microsoft PowerPoint (.ppt, .pptx)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="doc-text">
                            <label for="doc-text">Text Files (.txt, .rtf)</label>
                        </div>
                    </div>
                </details>

                <details style="margin-bottom: 10px; border: 1px solid #00f0ff; border-radius: 5px; padding: 10px; background: rgba(0, 240, 255, 0.05);">
                    <summary style="color: #00f0ff; cursor: pointer; font-weight: bold; padding: 5px;">🎬 Media Files (3 types) - Click to expand</summary>
                    <div class="checkbox-grid" style="margin-top: 10px;">
                        <div class="checkbox-item">
                            <input type="checkbox" id="doc-images">
                            <label for="doc-images">Image Files (.jpg, .jpeg, .png, .gif, .bmp)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="doc-videos">
                            <label for="doc-videos">Video Files (.mp4, .avi, .mov, .wmv, .flv)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="doc-audio">
                            <label for="doc-audio">Audio Files (.mp3, .wav, .flac, .aac, .ogg)</label>
                        </div>
                    </div>
                </details>
                </details>
            </div>

            <div class="button-row">
                <button class="btn" onclick="showTab('user-input')">← Back: User Input</button>
                <button class="btn btn-primary" onclick="showTab('subjects')">Next: Subjects →</button>
                <button class="btn btn-warning" onclick="generateQueries()">🔍 Generate Queries</button>
            </div>
        </div>

        <!-- TAB 4: QUERIES -->
        <div id="queries" class="tab-content">
            <div style="padding: 20px;">
                <h2 style="color: #f8e602; text-align: center; margin-bottom: 10px;">🔍 Generated Queries</h2>
                <p style="color: #888; text-align: center; margin-bottom: 20px;">Your custom Google dork queries based on the information you entered</p>

                <div class="button-row" style="margin-bottom: 20px; text-align: center;">
                    <button class="btn btn-warning" onclick="generateQueries()" style="font-size: 1.1em; padding: 15px 30px;">🔄 Regenerate Queries</button>
                    <button class="btn btn-primary" onclick="copyAllQueries()" style="margin-left: 10px;">📋 Copy All Queries</button>
                </div>

                <div id="queries-container" style="margin-top: 20px;">
                    <p style="color: #888; text-align: center; padding: 40px;">No queries generated yet. Fill in the User Input form, select your checkboxes, then click "Generate Queries".</p>
                </div>
            </div>
        </div>

        <!-- TAB 5: DORK TEMPLATES & LEARNING -->
        <div id="dork-learning" class="tab-content">
            <div style="padding: 20px;">
                <h2 style="color: #f8e602; text-align: center; margin-bottom: 10px;">📚 Google Dork Templates & Learning Guide</h2>
                <p style="color: #888; text-align: center; margin-bottom: 30px;">Learn how to construct powerful OSINT search queries - Self-teaching reference guide</p>

                <!-- Basic Operators Section -->
                <details open style="margin-bottom: 15px; border: 2px solid #4bff21; border-radius: 5px; padding: 15px; background: rgba(75, 255, 33, 0.05);">
                    <summary style="color: #4bff21; cursor: pointer; font-weight: bold; font-size: 1.2em; padding: 5px;">📖 BASIC OPERATORS - Foundation of Google Dorking</summary>
                    <div style="margin-top: 15px;">

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #00f0ff; border-radius: 3px;">
                            <h4 style="color: #00f0ff; margin-bottom: 8px;">site:</h4>
                            <p style="color: #ccc; margin-bottom: 8px;"><strong>What it does:</strong> Searches within a specific website or domain</p>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">site:facebook.com "John Smith"</p>
                            <p style="color: #888; font-size: 0.9em;">Finds all Facebook pages containing "John Smith"</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #00f0ff; border-radius: 3px;">
                            <h4 style="color: #00f0ff; margin-bottom: 8px;">filetype:</h4>
                            <p style="color: #ccc; margin-bottom: 8px;"><strong>What it does:</strong> Searches for specific file types (PDF, DOC, XLS, etc.)</p>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">filetype:pdf "John Smith" resume</p>
                            <p style="color: #888; font-size: 0.9em;">Finds PDF files containing "John Smith" and "resume"</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #00f0ff; border-radius: 3px;">
                            <h4 style="color: #00f0ff; margin-bottom: 8px;">inurl:</h4>
                            <p style="color: #ccc; margin-bottom: 8px;"><strong>What it does:</strong> Searches for keywords in the URL</p>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">inurl:profile "John Smith"</p>
                            <p style="color: #888; font-size: 0.9em;">Finds pages with "profile" in the URL and "John Smith" on the page</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #00f0ff; border-radius: 3px;">
                            <h4 style="color: #00f0ff; margin-bottom: 8px;">intitle:</h4>
                            <p style="color: #ccc; margin-bottom: 8px;"><strong>What it does:</strong> Searches for keywords in the page title</p>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">intitle:"John Smith" profile</p>
                            <p style="color: #888; font-size: 0.9em;">Finds pages with "John Smith" in the title and "profile" anywhere on the page</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #00f0ff; border-radius: 3px;">
                            <h4 style="color: #00f0ff; margin-bottom: 8px;">intext:</h4>
                            <p style="color: #ccc; margin-bottom: 8px;"><strong>What it does:</strong> Searches for keywords in the body text of pages</p>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">intext:"John Smith" Chicago</p>
                            <p style="color: #888; font-size: 0.9em;">Finds pages with "John Smith" and "Chicago" in the body text</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #00f0ff; border-radius: 3px;">
                            <h4 style="color: #00f0ff; margin-bottom: 8px;">" " (Quotes)</h4>
                            <p style="color: #ccc; margin-bottom: 8px;"><strong>What it does:</strong> Searches for exact phrase match</p>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">"John Smith" Chicago</p>
                            <p style="color: #888; font-size: 0.9em;">Finds pages with the exact phrase "John Smith" (first and last name together)</p>
                        </div>

                    </div>
                </details>

                <!-- Advanced Operators Section -->
                <details style="margin-bottom: 15px; border: 2px solid #772289; border-radius: 5px; padding: 15px; background: rgba(119, 34, 137, 0.05);">
                    <summary style="color: #f4d5fd; cursor: pointer; font-weight: bold; font-size: 1.2em; padding: 5px;">⚡ ADVANCED OPERATORS - Power User Techniques</summary>
                    <div style="margin-top: 15px;">

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #f4d5fd; border-radius: 3px;">
                            <h4 style="color: #f4d5fd; margin-bottom: 8px;">OR</h4>
                            <p style="color: #ccc; margin-bottom: 8px;"><strong>What it does:</strong> Searches for either term (must be UPPERCASE)</p>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">"John Smith" OR "Johnny Smith" Chicago</p>
                            <p style="color: #888; font-size: 0.9em;">Finds pages with either "John Smith" OR "Johnny Smith" in Chicago</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #f4d5fd; border-radius: 3px;">
                            <h4 style="color: #f4d5fd; margin-bottom: 8px;">- (Minus/Exclude)</h4>
                            <p style="color: #ccc; margin-bottom: 8px;"><strong>What it does:</strong> Excludes results containing the term</p>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">"John Smith" -linkedin -facebook</p>
                            <p style="color: #888; font-size: 0.9em;">Finds "John Smith" but excludes LinkedIn and Facebook results</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #f4d5fd; border-radius: 3px;">
                            <h4 style="color: #f4d5fd; margin-bottom: 8px;">* (Wildcard)</h4>
                            <p style="color: #ccc; margin-bottom: 8px;"><strong>What it does:</strong> Matches any word or phrase</p>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">"John * Smith" Chicago</p>
                            <p style="color: #888; font-size: 0.9em;">Finds "John [anything] Smith" like "John Michael Smith", "John J Smith", etc.</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #f4d5fd; border-radius: 3px;">
                            <h4 style="color: #f4d5fd; margin-bottom: 8px;">.. (Number Range)</h4>
                            <p style="color: #ccc; margin-bottom: 8px;"><strong>What it does:</strong> Searches within a number range</p>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">"John Smith" 2020..2024</p>
                            <p style="color: #888; font-size: 0.9em;">Finds "John Smith" in content from years 2020 through 2024</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #f4d5fd; border-radius: 3px;">
                            <h4 style="color: #f4d5fd; margin-bottom: 8px;">( ) (Grouping)</h4>
                            <p style="color: #ccc; margin-bottom: 8px;"><strong>What it does:</strong> Groups terms together</p>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">site:(facebook.com OR instagram.com) "John Smith"</p>
                            <p style="color: #888; font-size: 0.9em;">Searches both Facebook OR Instagram for "John Smith"</p>
                        </div>

                    </div>
                </details>

                <!-- Person Investigation Templates -->
                <details style="margin-bottom: 15px; border: 2px solid #f8e602; border-radius: 5px; padding: 15px; background: rgba(248, 230, 2, 0.05);">
                    <summary style="color: #f8e602; cursor: pointer; font-weight: bold; font-size: 1.2em; padding: 5px;">👤 PERSON INVESTIGATION - Finding People Online</summary>
                    <div style="margin-top: 15px;">

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #f8e602; border-radius: 3px;">
                            <h4 style="color: #f8e602; margin-bottom: 8px;">Basic Person Search</h4>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">"John Smith" Chicago</p>
                            <p style="color: #888; font-size: 0.9em;"><strong>Used in Daisy Tracker:</strong> When you enter First Name, Last Name, and Location, this generates basic queries to find the person</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #f8e602; border-radius: 3px;">
                            <h4 style="color: #f8e602; margin-bottom: 8px;">Social Media Profile Search</h4>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">site:facebook.com "John Smith" Chicago</p>
                            <p style="color: #888; font-size: 0.9em;"><strong>Used in Daisy Tracker:</strong> When you check Facebook in the Checkboxes tab, queries like this are generated</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #f8e602; border-radius: 3px;">
                            <h4 style="color: #f8e602; margin-bottom: 8px;">Multiple Name Variations</h4>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">("John Smith" OR "Johnny Smith" OR "J Smith") Chicago</p>
                            <p style="color: #888; font-size: 0.9em;"><strong>Used in Daisy Tracker:</strong> When you provide an Alias/AKA, the tool generates OR queries to search multiple name variations</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #f8e602; border-radius: 3px;">
                            <h4 style="color: #f8e602; margin-bottom: 8px;">Email + Person Search</h4>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">"john.smith@email.com" OR "John Smith"</p>
                            <p style="color: #888; font-size: 0.9em;"><strong>Used in Daisy Tracker:</strong> When you provide both name and email, the tool creates cross-reference queries</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #f8e602; border-radius: 3px;">
                            <h4 style="color: #f8e602; margin-bottom: 8px;">Phone Number Lookups</h4>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">"(773) 555-1234" OR "773-555-1234" OR "7735551234"</p>
                            <p style="color: #888; font-size: 0.9em;"><strong>Used in Daisy Tracker:</strong> When you enter a phone number, the tool searches multiple formatting variations</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #f8e602; border-radius: 3px;">
                            <h4 style="color: #f8e602; margin-bottom: 8px;">Cross-Platform Search</h4>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">site:(facebook.com OR instagram.com OR twitter.com) "John Smith"</p>
                            <p style="color: #888; font-size: 0.9em;"><strong>Used in Daisy Tracker:</strong> When you select multiple platforms, the tool creates combined queries to search across all selected platforms</p>
                        </div>

                    </div>
                </details>

                <!-- Social Media Specific -->
                <details style="margin-bottom: 15px; border: 2px solid #00f0ff; border-radius: 5px; padding: 15px; background: rgba(0, 240, 255, 0.05);">
                    <summary style="color: #00f0ff; cursor: pointer; font-weight: bold; font-size: 1.2em; padding: 5px;">📱 SOCIAL MEDIA - Platform-Specific Techniques</summary>
                    <div style="margin-top: 15px;">

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #00f0ff; border-radius: 3px;">
                            <h4 style="color: #00f0ff; margin-bottom: 8px;">Facebook Dorking</h4>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">site:facebook.com "John Smith" lives in "Chicago"</p>
                            <p style="color: #888; font-size: 0.9em;">Finds Facebook profiles with specific location information</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #00f0ff; border-radius: 3px;">
                            <h4 style="color: #00f0ff; margin-bottom: 8px;">LinkedIn Dorking</h4>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">site:linkedin.com "John Smith" "Software Engineer"</p>
                            <p style="color: #888; font-size: 0.9em;">Finds LinkedIn profiles with specific job titles or skills</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #00f0ff; border-radius: 3px;">
                            <h4 style="color: #00f0ff; margin-bottom: 8px;">Instagram Dorking</h4>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">site:instagram.com "John Smith" Chicago</p>
                            <p style="color: #888; font-size: 0.9em;">Finds Instagram profiles (limited - Instagram blocks many searches)</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #00f0ff; border-radius: 3px;">
                            <h4 style="color: #00f0ff; margin-bottom: 8px;">Twitter/X Dorking</h4>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">site:(twitter.com OR x.com) "John Smith" Chicago</p>
                            <p style="color: #888; font-size: 0.9em;">Searches both old Twitter domain and new X domain</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #00f0ff; border-radius: 3px;">
                            <h4 style="color: #00f0ff; margin-bottom: 8px;">Reddit Dorking</h4>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">site:reddit.com "John Smith" Chicago</p>
                            <p style="color: #888; font-size: 0.9em;">Finds Reddit posts and comments by or about the person</p>
                        </div>

                    </div>
                </details>

                <!-- Property & Location -->
                <details style="margin-bottom: 15px; border: 2px solid #4bff21; border-radius: 5px; padding: 15px; background: rgba(75, 255, 33, 0.05);">
                    <summary style="color: #4bff21; cursor: pointer; font-weight: bold; font-size: 1.2em; padding: 5px;">🏠 PROPERTY & LOCATION - Finding Assets and Addresses</summary>
                    <div style="margin-top: 15px;">

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #4bff21; border-radius: 3px;">
                            <h4 style="color: #4bff21; margin-bottom: 8px;">Property Records</h4>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">"John Smith" (property OR real estate OR deed OR ownership) Chicago</p>
                            <p style="color: #888; font-size: 0.9em;">Finds property ownership records and real estate transactions</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #4bff21; border-radius: 3px;">
                            <h4 style="color: #4bff21; margin-bottom: 8px;">Address Search</h4>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">"123 Main Street" "Chicago" "John Smith"</p>
                            <p style="color: #888; font-size: 0.9em;">Connects a person to a specific address</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #4bff21; border-radius: 3px;">
                            <h4 style="color: #4bff21; margin-bottom: 8px;">Vehicle Records</h4>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">"John Smith" (vehicle OR car OR license plate) "ABC1234"</p>
                            <p style="color: #888; font-size: 0.9em;">Links person to vehicle records or license plates</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #4bff21; border-radius: 3px;">
                            <h4 style="color: #4bff21; margin-bottom: 8px;">Business Ownership</h4>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">"John Smith" (business OR company OR LLC OR corporation) Chicago</p>
                            <p style="color: #888; font-size: 0.9em;">Finds businesses owned or operated by the person</p>
                        </div>

                    </div>
                </details>

                <!-- Document Searches -->
                <details style="margin-bottom: 15px; border: 2px solid #ff6b6b; border-radius: 5px; padding: 15px; background: rgba(255, 107, 107, 0.05);">
                    <summary style="color: #ff6b6b; cursor: pointer; font-weight: bold; font-size: 1.2em; padding: 5px;">📄 DOCUMENT SEARCHES - Finding Files and Records</summary>
                    <div style="margin-top: 15px;">

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #ff6b6b; border-radius: 3px;">
                            <h4 style="color: #ff6b6b; margin-bottom: 8px;">Resume/CV Search</h4>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">filetype:pdf "John Smith" (resume OR CV)</p>
                            <p style="color: #888; font-size: 0.9em;">Finds PDF resumes and CVs</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #ff6b6b; border-radius: 3px;">
                            <h4 style="color: #ff6b6b; margin-bottom: 8px;">Court Documents</h4>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">filetype:pdf "John Smith" (court OR case OR defendant OR plaintiff)</p>
                            <p style="color: #888; font-size: 0.9em;">Finds court records and legal documents</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #ff6b6b; border-radius: 3px;">
                            <h4 style="color: #ff6b6b; margin-bottom: 8px;">News Articles</h4>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">"John Smith" Chicago (news OR article OR press OR media)</p>
                            <p style="color: #888; font-size: 0.9em;">Finds news coverage and media mentions</p>
                        </div>

                        <div style="background: #1a1a1a; padding: 15px; margin: 10px 0; border-left: 4px solid #ff6b6b; border-radius: 3px;">
                            <h4 style="color: #ff6b6b; margin-bottom: 8px;">Government Records</h4>
                            <p style="color: #f8e602; font-family: monospace; background: #0a0a0a; padding: 8px; border-radius: 3px; margin-bottom: 8px;">site:gov "John Smith" Chicago</p>
                            <p style="color: #888; font-size: 0.9em;">Searches government websites for public records</p>
                        </div>

                    </div>
                </details>

                <!-- Tips & Best Practices -->
                <div style="background: #1a1a1a; padding: 20px; margin: 20px 0; border: 2px solid #4bff21; border-radius: 5px;">
                    <h3 style="color: #4bff21; margin-bottom: 15px;">💎 PRO TIPS & BEST PRACTICES</h3>

                    <div style="margin: 10px 0; padding-left: 15px;">
                        <p style="color: #ccc; margin: 8px 0;">✓ <strong>Start broad, then narrow:</strong> Begin with simple queries, then add more operators as needed</p>
                        <p style="color: #ccc; margin: 8px 0;">✓ <strong>Use quotes for exact matches:</strong> Always put names in quotes: "John Smith" not John Smith</p>
                        <p style="color: #ccc; margin: 8px 0;">✓ <strong>Try multiple variations:</strong> People use different names online - search for all variations</p>
                        <p style="color: #ccc; margin: 8px 0;">✓ <strong>Exclude noise:</strong> Use the minus sign (-) to filter out irrelevant results</p>
                        <p style="color: #ccc; margin: 8px 0;">✓ <strong>Combine operators:</strong> The power comes from combining multiple operators</p>
                        <p style="color: #ccc; margin: 8px 0;">✓ <strong>Check multiple platforms:</strong> Don't rely on just one social media platform</p>
                        <p style="color: #ccc; margin: 8px 0;">✓ <strong>Document your findings:</strong> Keep notes on what queries work and what they find</p>
                        <p style="color: #ccc; margin: 8px 0;">✓ <strong>Be patient:</strong> OSINT investigations take time - not every query will produce results</p>
                        <p style="color: #ccc; margin: 8px 0;">✓ <strong>Verify information:</strong> Always cross-reference findings across multiple sources</p>
                    </div>
                </div>

                <!-- How Daisy Tracker Uses These -->
                <div style="background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%); padding: 20px; margin: 20px 0; border: 3px solid #f8e602; border-radius: 5px;">
                    <h3 style="color: #f8e602; margin-bottom: 15px; text-align: center;">🌼 How Daisy Tracker Uses These Templates</h3>

                    <div style="margin: 15px 0;">
                        <p style="color: #ccc; margin-bottom: 10px;">When you use Daisy Tracker:</p>
                        <ol style="color: #4bff21; margin-left: 20px; line-height: 1.8;">
                            <li><strong>Enter person details</strong> in the "User Input" tab (name, location, email, phone, etc.)</li>
                            <li><strong>Select platforms and searches</strong> in the "Checkboxes" tab (Facebook, LinkedIn, property records, etc.)</li>
                            <li><strong>Click "Generate Queries"</strong> and Daisy Tracker automatically creates queries using these templates</li>
                            <li><strong>Copy the queries</strong> from the "Files & Subjects" tab and paste into Google</li>
                            <li><strong>Document your findings</strong> using the Subject Profile Tracking feature</li>
                        </ol>

                        <p style="color: #00f0ff; margin-top: 15px; padding: 10px; background: rgba(0, 240, 255, 0.1); border-left: 4px solid #00f0ff; border-radius: 3px;">
                            <strong>Example:</strong> If you enter "John Smith" as the name, "Chicago" as the location, and check the Facebook checkbox, Daisy Tracker will generate: <code style="color: #f8e602;">site:facebook.com "John Smith" Chicago</code>
                        </p>
                    </div>
                </div>

                <div class="button-row" style="margin-top: 20px;">
                    <button class="btn btn-primary" onclick="showTab('import-export')">← Back to Files & Subjects</button>
                    <button class="btn btn-success" onclick="showTab('user-input')">Start Investigation (User Input) →</button>
                </div>
            </div>
        </div>

        <!-- TAB 5: SUBJECTS (Person Tracking) -->
        <!-- TAB 5: SUBJECTS (List & Management) -->
        <div id="subjects" class="tab-content">
            <div style="padding: 20px; background-color: #1a1a1a; border: 2px solid #f8e602; border-radius: 5px; margin-bottom: 20px;">
                <h2 style="color: #f8e602; margin-bottom: 15px;">👤 Subjects Management</h2>
                <p style="color: #888; font-size: 1em; margin-bottom: 15px;">
                    This tab is for viewing, searching, and managing your saved subjects.
                </p>
                <p style="color: #4bff21; font-size: 1em; margin-bottom: 15px;">
                    ➡️ To <strong>add a new subject</strong>, go to the <strong>"User Input"</strong> tab (Tab 2), fill out the investigation fields, then scroll down to the "Subject Profile Tracking" section to add category, gang info, priors, social accounts, and photos. Then click "Save as Subject Profile".
                </p>
                <div>
                    <button class="btn btn-primary" onclick="showTab('user-input')" style="font-size: 1em; padding: 12px 20px;">📝 Go to User Input (Add Subject)</button>
                    <button class="btn btn-success" onclick="viewSubjectsList()" style="margin-left: 10px; font-size: 1em; padding: 12px 20px;">👥 View All Subjects</button>
                </div>
            </div>

            <!-- Import Subject -->
            <div style="padding: 20px; background-color: #0a0a0a; border: 2px solid #00f0ff; border-radius: 5px;">
                <h3 style="color: #00f0ff; margin-bottom: 10px;">📥 Import Subject from Markdown</h3>
                <p style="color: #888; font-size: 0.9em; margin-bottom: 15px;">Import a previously exported subject markdown file (.md)</p>
                <input type="file" id="subject-import-input" accept=".md,.txt" style="display: none;" onchange="importSubjectFromMarkdown(event)">
                <button class="btn btn-primary" onclick="document.getElementById('subject-import-input').click()">📂 Select Markdown File to Import</button>
            </div>

            <!-- Subjects List Section -->
            <div id="subjects-list" style="margin-top: 30px; padding: 20px; background-color: #0a0a0a; border: 2px solid #4bff21; border-radius: 5px; display: none;">
                <h3 style="color: #f8e602; margin-bottom: 15px;">👥 Saved Subjects</h3>

                <!-- Search Box -->
                <div style="margin-bottom: 15px;">
                    <input type="text" id="subjects-search" placeholder="🔍 Search subjects by name, gang, category..." onkeyup="searchSubjects()" style="width: 100%; padding: 10px; background-color: #1a1a1a; border: 2px solid #00f0ff; color: #4bff21; border-radius: 3px;">
                </div>

                <!-- Filter by Category -->
                <div style="margin-bottom: 15px;">
                    <label style="color: #f8e602;">Filter by Category:</label>
                    <select id="subjects-category-filter" onchange="filterSubjectsByCategory()" style="width: 100%; padding: 10px; background-color: #1a1a1a; border: 1px solid #4bff21; color: #4bff21; border-radius: 3px;">
                        <option value="">All Categories</option>
                    </select>
                </div>

                <div id="subjects-list-container">
                    <!-- Subjects will be listed here -->
                </div>

                <button class="btn" onclick="hideSubjectsList()" style="margin-top: 15px;">Close List</button>
            </div>
        </div>
    </div>

    <script>
        // Tab Management
        function showTab(tabId) {
            // Hide all tabs
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));

            // Remove active from all buttons
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(btn => btn.classList.remove('active'));

            // Show selected tab
            document.getElementById(tabId).classList.add('active');

            // Highlight active button
            const tabNames = ['data-input', 'person-social', 'docs-darkweb', 'criminal-property', 'technical', 'results'];
            const index = tabNames.indexOf(tabId);
            if (index !== -1) {
                buttons[index].classList.add('active');
            }

            // Scroll to top
            window.scrollTo(0, 0);
        }

        // Help Modal Toggle
        function toggleHelp() {
            const modal = document.getElementById('help-modal');
            if (modal.style.display === 'block') {
                modal.style.display = 'none';
            } else {
                modal.style.display = 'block';
            }
        }

        // Helper: Check/Uncheck All Social Platforms
        function checkAllSocial(checked) {
            const checkboxes = document.querySelectorAll('.social-platform');
            checkboxes.forEach(cb => cb.checked = checked);
        }

        // Platform Database - Complete configuration for each platform
        const PLATFORMS = {
            'facebook': {
                name: 'Facebook',
                site: 'facebook.com',
                icon: '📘',
                queries: ['profile', 'posts', 'comments', 'photos', 'friends', 'groups', 'pages', 'location']
            },
            'instagram': {
                name: 'Instagram',
                site: 'instagram.com',
                icon: '📷',
                queries: ['profile', 'posts', 'comments', 'tagged', 'followers', 'following', 'stories', 'reels', 'location']
            },
            'twitter': {
                name: 'Twitter/X',
                site: 'twitter.com',
                icon: '🐦',
                queries: ['profile', 'tweets', 'replies', 'media', 'likes', 'followers', 'following', 'lists', 'location']
            },
            'tiktok': {
                name: 'TikTok',
                site: 'tiktok.com',
                icon: '🎵',
                queries: ['profile', 'videos', 'comments', 'likes', 'followers', 'following', 'hashtags', 'location']
            },
            'snapchat': {
                name: 'Snapchat',
                site: 'snapchat.com',
                icon: '👻',
                queries: ['profile', 'stories', 'snap map', 'friends']
            },
            'linkedin': {
                name: 'LinkedIn',
                site: 'linkedin.com',
                icon: '💼',
                queries: ['profile', 'posts', 'activity', 'connections', 'employment', 'recommendations', 'groups']
            },
            'indeed': {
                name: 'Indeed',
                site: 'indeed.com',
                icon: '💼',
                queries: ['profile', 'resumes', 'reviews']
            },
            'glassdoor': {
                name: 'Glassdoor',
                site: 'glassdoor.com',
                icon: '💼',
                queries: ['profile', 'reviews', 'salaries']
            },
            'youtube': {
                name: 'YouTube',
                site: 'youtube.com',
                icon: '📹',
                queries: ['channel', 'videos', 'comments', 'playlists', 'subscribers', 'community']
            },
            'twitch': {
                name: 'Twitch',
                site: 'twitch.tv',
                icon: '🎮',
                queries: ['channel', 'streams', 'clips', 'videos', 'followers', 'following']
            },
            'vimeo': {
                name: 'Vimeo',
                site: 'vimeo.com',
                icon: '📹',
                queries: ['profile', 'videos', 'likes', 'followers']
            },
            'rumble': {
                name: 'Rumble',
                site: 'rumble.com',
                icon: '📹',
                queries: ['channel', 'videos', 'followers']
            },
            'discord': {
                name: 'Discord',
                site: 'discord.com',
                icon: '💬',
                queries: ['profile', 'servers', 'messages', 'friends']
            },
            'steam': {
                name: 'Steam',
                site: 'steamcommunity.com',
                icon: '🎮',
                queries: ['profile', 'games', 'friends', 'groups', 'screenshots', 'reviews']
            },
            'xbox': {
                name: 'Xbox Live',
                site: 'xbox.com',
                icon: '🎮',
                queries: ['profile', 'gamertag', 'achievements', 'friends']
            },
            'playstation': {
                name: 'PlayStation',
                site: 'playstation.com',
                icon: '🎮',
                queries: ['profile', 'trophies', 'friends']
            },
            'reddit': {
                name: 'Reddit',
                site: 'reddit.com',
                icon: '🤖',
                queries: ['user', 'posts', 'comments', 'subreddits', 'karma']
            },
            '4chan': {
                name: '4chan',
                site: '4chan.org',
                icon: '💭',
                queries: ['posts', 'threads']
            },
            'quora': {
                name: 'Quora',
                site: 'quora.com',
                icon: '❓',
                queries: ['profile', 'answers', 'questions', 'followers']
            },
            'telegram': {
                name: 'Telegram',
                site: 'telegram.org',
                icon: '✈️',
                queries: ['profile', 'channels', 'groups', 'messages']
            },
            'whatsapp': {
                name: 'WhatsApp',
                site: 'web.whatsapp.com',
                icon: '💬',
                queries: ['profile', 'groups']
            },
            'signal': {
                name: 'Signal',
                site: 'signal.org',
                icon: '🔒',
                queries: ['profile', 'groups']
            },
            'viber': {
                name: 'Viber',
                site: 'viber.com',
                icon: '💬',
                queries: ['profile', 'communities']
            },
            'tinder': {
                name: 'Tinder',
                site: 'tinder.com',
                icon: '❤️',
                queries: ['profile', 'matches']
            },
            'bumble': {
                name: 'Bumble',
                site: 'bumble.com',
                icon: '🐝',
                queries: ['profile', 'matches']
            },
            'match': {
                name: 'Match.com',
                site: 'match.com',
                icon: '❤️',
                queries: ['profile', 'matches']
            },
            'hinge': {
                name: 'Hinge',
                site: 'hinge.co',
                icon: '❤️',
                queries: ['profile', 'matches']
            },
            'okcupid': {
                name: 'OKCupid',
                site: 'okcupid.com',
                icon: '❤️',
                queries: ['profile', 'matches', 'questions']
            },
            'pinterest': {
                name: 'Pinterest',
                site: 'pinterest.com',
                icon: '📌',
                queries: ['profile', 'pins', 'boards', 'followers']
            },
            'deviantart': {
                name: 'DeviantArt',
                site: 'deviantart.com',
                icon: '🎨',
                queries: ['profile', 'gallery', 'favorites', 'watchers']
            },
            'behance': {
                name: 'Behance',
                site: 'behance.net',
                icon: '🎨',
                queries: ['profile', 'projects', 'followers']
            },
            'dribbble': {
                name: 'Dribbble',
                site: 'dribbble.com',
                icon: '🎨',
                queries: ['profile', 'shots', 'followers']
            },
            'vk': {
                name: 'VK',
                site: 'vk.com',
                icon: '🇷🇺',
                queries: ['profile', 'posts', 'photos', 'friends', 'groups']
            },
            'wechat': {
                name: 'WeChat',
                site: 'wechat.com',
                icon: '🇨🇳',
                queries: ['profile', 'moments', 'contacts']
            },
            'qq': {
                name: 'QQ',
                site: 'qq.com',
                icon: '🇨🇳',
                queries: ['profile', 'qzone', 'friends']
            },
            'weibo': {
                name: 'Weibo',
                site: 'weibo.com',
                icon: '🇨🇳',
                queries: ['profile', 'posts', 'followers', 'following']
            },
            'line': {
                name: 'LINE',
                site: 'line.me',
                icon: '🇯🇵',
                queries: ['profile', 'timeline', 'friends']
            },
            'parler': {
                name: 'Parler',
                site: 'parler.com',
                icon: '🗣️',
                queries: ['profile', 'posts', 'followers']
            },
            'gab': {
                name: 'Gab',
                site: 'gab.com',
                icon: '🗣️',
                queries: ['profile', 'gabs', 'followers']
            },
            'truthsocial': {
                name: 'Truth Social',
                site: 'truthsocial.com',
                icon: '🗣️',
                queries: ['profile', 'truths', 'followers']
            },
            'gettr': {
                name: 'Gettr',
                site: 'gettr.com',
                icon: '🗣️',
                queries: ['profile', 'posts', 'followers']
            }
        };

        // Generate platform-specific queries automatically
        function generatePlatformQueries(platformKey, data) {
            const platform = PLATFORMS[platformKey];
            if (!platform) return [];

            const queries = [];
            const searchTarget = data.username || data.fullName;
            if (!searchTarget) return [];

            const icon = platform.icon;
            const queryTypes = platform.queries;

            // Generate specific queries based on platform capabilities
            queryTypes.forEach(type => {
                let query = '';
                let category = `${icon} ${platform.name} - ${type.charAt(0).toUpperCase() + type.slice(1)}`;

                switch(type) {
                    case 'profile':
                        query = `site:${platform.site} "${searchTarget}"`;
                        break;
                    case 'posts':
                    case 'tweets':
                    case 'gabs':
                    case 'truths':
                    case 'videos':
                    case 'pins':
                        query = `site:${platform.site} "${searchTarget}" (post OR status OR update OR published OR uploaded)`;
                        break;
                    case 'comments':
                    case 'replies':
                        query = `site:${platform.site} "${searchTarget}" (comment OR reply OR responded)`;
                        break;
                    case 'photos':
                    case 'media':
                    case 'gallery':
                    case 'shots':
                        query = `site:${platform.site} "${searchTarget}" (photo OR image OR picture OR media)`;
                        break;
                    case 'followers':
                    case 'following':
                    case 'friends':
                    case 'connections':
                    case 'watchers':
                    case 'subscribers':
                        query = `site:${platform.site} "${searchTarget}" (follower OR following OR friend OR connection OR subscriber)`;
                        break;
                    case 'groups':
                    case 'communities':
                    case 'servers':
                    case 'channels':
                    case 'subreddits':
                        query = `site:${platform.site} "${searchTarget}" (group OR community OR server OR channel)`;
                        break;
                    case 'location':
                        if (data.personLocation) {
                            query = `site:${platform.site} "${searchTarget}" "${data.personLocation}"`;
                        }
                        break;
                    case 'employment':
                        if (data.employer) {
                            query = `site:${platform.site} "${searchTarget}" "${data.employer}"`;
                        }
                        break;
                    case 'tagged':
                        query = `site:${platform.site} "tagged" "${searchTarget}"`;
                        break;
                    default:
                        query = `site:${platform.site} "${searchTarget}" ${type}`;
                }

                if (query) {
                    queries.push({ category, query });
                }
            });

            return queries;
        }

        // Sock Puppet Detection - ALWAYS runs for cross-platform analysis
        function generateSockPuppetQueries(data) {
            const queries = [];

            // Build list of ALL checked social media platforms dynamically
            const platformDomains = [];
            const platformCheckboxes = document.querySelectorAll('.social-platform:checked');

            // Map platform IDs to their domain names
            const platformDomainMap = {
                'platform-facebook': 'facebook.com',
                'platform-instagram': 'instagram.com',
                'platform-twitter': 'twitter.com',
                'platform-tiktok': 'tiktok.com',
                'platform-snapchat': 'snapchat.com',
                'platform-tumblr': 'tumblr.com',
                'platform-linkedin': 'linkedin.com',
                'platform-indeed': 'indeed.com',
                'platform-glassdoor': 'glassdoor.com',
                'platform-github': 'github.com',
                'platform-gitlab': 'gitlab.com',
                'platform-stackoverflow': 'stackoverflow.com',
                'platform-medium': 'medium.com',
                'platform-substack': 'substack.com',
                'platform-youtube': 'youtube.com',
                'platform-vimeo': 'vimeo.com',
                'platform-twitch': 'twitch.tv',
                'platform-rumble': 'rumble.com',
                'platform-reddit': 'reddit.com',
                'platform-discord': 'discord.com',
                'platform-telegram': 'telegram.org',
                'platform-whatsapp': 'whatsapp.com',
                'platform-pinterest': 'pinterest.com',
                'platform-flickr': 'flickr.com',
                'platform-deviantart': 'deviantart.com',
                'platform-behance': 'behance.net',
                'platform-soundcloud': 'soundcloud.com',
                'platform-spotify': 'spotify.com',
                'platform-bandcamp': 'bandcamp.com',
                'platform-onlyfans': 'onlyfans.com',
                'platform-patreon': 'patreon.com',
                'platform-cashapp': 'cash.app',
                'platform-venmo': 'venmo.com',
                'platform-truthsocial': 'truthsocial.com',
                'platform-gettr': 'gettr.com',
                'platform-minds': 'minds.com'
            };

            // Collect all checked platform domains
            platformCheckboxes.forEach(checkbox => {
                const domain = platformDomainMap[checkbox.id];
                if (domain) {
                    platformDomains.push(domain);
                }
            });

            // If no platforms checked, use a default set
            if (platformDomains.length === 0) {
                platformDomains.push('facebook.com', 'instagram.com', 'twitter.com', 'linkedin.com', 'reddit.com');
            }

            // Username cross-reference - ALWAYS run if username exists and platforms are checked
            if (data.username && platformDomains.length > 0) {
                queries.push({
                    category: '🔗 Username Cross-Reference - Checked Platforms',
                    query: `"${data.username}" (site:${platformDomains.join(' OR site:')})`
                });

                queries.push({
                    category: '🔗 Username Variations',
                    query: `("${data.username}" OR "${data.username}123" OR "${data.username}_" OR "_${data.username}")`
                });

                // Cross-reference username across each checked platform individually
                platformDomains.forEach(domain => {
                    const platformName = domain.split('.')[0].charAt(0).toUpperCase() + domain.split('.')[0].slice(1);
                    queries.push({
                        category: `🔗 Username on ${platformName}`,
                        query: `site:${domain} "${data.username}"`
                    });
                });
            }

            // Email cross-reference - ALWAYS run if email exists and platforms are checked
            if (data.email && platformDomains.length > 0) {
                queries.push({
                    category: '🔗 Email Cross-Reference',
                    query: `"${data.email}" (account OR profile OR registered OR user)`
                });

                queries.push({
                    category: '🔗 Email on Checked Social Platforms',
                    query: `"${data.email}" (site:${platformDomains.join(' OR site:')})`
                });

                // Cross-reference email across each checked platform individually
                platformDomains.forEach(domain => {
                    const platformName = domain.split('.')[0].charAt(0).toUpperCase() + domain.split('.')[0].slice(1);
                    queries.push({
                        category: `🔗 Email on ${platformName}`,
                        query: `site:${domain} "${data.email}"`
                    });
                });
            }

            // Phone cross-reference - ALWAYS run if phone exists and platforms are checked
            if (data.phone && platformDomains.length > 0) {
                queries.push({
                    category: '🔗 Phone Number Cross-Reference',
                    query: `"${data.phone}" (account OR profile OR contact OR registered)`
                });

                queries.push({
                    category: '🔗 Phone on Checked Social Platforms',
                    query: `"${data.phone}" (site:${platformDomains.join(' OR site:')})`
                });

                // Cross-reference phone across each checked platform individually
                platformDomains.forEach(domain => {
                    const platformName = domain.split('.')[0].charAt(0).toUpperCase() + domain.split('.')[0].slice(1);
                    queries.push({
                        category: `🔗 Phone on ${platformName}`,
                        query: `site:${domain} "${data.phone}"`
                    });
                });
            }

            // Name variations - ALWAYS run if name exists and platforms are checked
            if (data.fullName && platformDomains.length > 0) {
                const nameParts = data.fullName.split(' ');
                if (nameParts.length >= 2) {
                    const firstName = nameParts[0];
                    const lastName = nameParts[nameParts.length - 1];

                    queries.push({
                        category: '🔗 Name Variation - Username Format',
                        query: `("${firstName}${lastName}" OR "${firstName}.${lastName}" OR "${firstName}_${lastName}" OR "${lastName}${firstName}")`
                    });

                    queries.push({
                        category: '🔗 Name Variation - Nicknames',
                        query: `("${firstName.substring(0, 3)}${lastName}" OR "${firstName}${lastName.substring(0, 3)}")`
                    });

                    // Cross-reference name variations across each checked platform
                    platformDomains.forEach(domain => {
                        const platformName = domain.split('.')[0].charAt(0).toUpperCase() + domain.split('.')[0].slice(1);
                        queries.push({
                            category: `🔗 Name Variation on ${platformName}`,
                            query: `site:${domain} ("${firstName}${lastName}" OR "${firstName}.${lastName}" OR "${firstName}_${lastName}")`
                        });
                    });
                }
            }

            return queries;
        }

        // Generate Queries Function
        function generateQueries() {
            const queries = [];

            try {
                // Get all form data - use optional chaining to prevent crashes
                const data = {
                    firstName: document.getElementById('first-name')?.value.trim() || '',
                    lastName: document.getElementById('last-name')?.value.trim() || '',
                    middleName: document.getElementById('middle-name')?.value.trim() || '',
                    aliases: document.getElementById('aliases')?.value.trim() || '',
                    dob: document.getElementById('dob')?.value.trim() || '',
                    age: document.getElementById('age')?.value.trim() || '',
                    email: document.getElementById('email')?.value.trim() || '',
                    phone: document.getElementById('phone')?.value.trim() || '',
                    username: document.getElementById('username')?.value.trim() || '',
                    accountId: document.getElementById('account-id')?.value.trim() || '',
                    address: document.getElementById('address')?.value.trim() || '',
                    city: document.getElementById('city')?.value.trim() || '',
                    state: document.getElementById('state')?.value.trim() || '',
                    country: document.getElementById('country')?.value.trim() || '',
                    zip: document.getElementById('zip')?.value.trim() || '',
                    occupation: document.getElementById('occupation')?.value.trim() || '',
                    employer: document.getElementById('employer')?.value.trim() || '',
                    school: document.getElementById('school')?.value.trim() || '',
                    interests: document.getElementById('interests')?.value.trim() || '',
                    associates: document.getElementById('associates')?.value.trim() || '',
                    ipAddress: document.getElementById('ip-address')?.value.trim() || '',
                    domain: document.getElementById('domain')?.value.trim() || '',
                    keywords: document.getElementById('keywords')?.value.trim() || '',
                    // Property (Residence/Business)
                    propertyAddress: document.getElementById('property-address')?.value.trim() || '',
                    propertyType: document.getElementById('property-type')?.value.trim() || '',
                    propertyOwner: document.getElementById('property-owner')?.value.trim() || '',
                    businessName: document.getElementById('business-name')?.value.trim() || '',
                    // Vehicles
                    vehicleVin: document.getElementById('vehicle-vin')?.value.trim() || '',
                    licensePlate: document.getElementById('license-plate')?.value.trim() || '',
                    vehicleMake: document.getElementById('vehicle-make')?.value.trim() || '',
                    vehicleModel: document.getElementById('vehicle-model')?.value.trim() || '',
                    vehicleYear: document.getElementById('vehicle-year')?.value.trim() || '',
                    vehicleColor: document.getElementById('vehicle-color')?.value.trim() || '',
                    // Misc Property
                    serialNumber: document.getElementById('serial-number')?.value.trim() || '',
                    miscMake: document.getElementById('misc-make')?.value.trim() || '',
                    miscModel: document.getElementById('misc-model')?.value.trim() || '',
                    propertyDescription: document.getElementById('property-description')?.value.trim() || ''
                };

            // Build full name
            const fullName = [data.firstName, data.middleName, data.lastName].filter(x => x).join(' ');
            const personLocation = [data.city, data.state, data.country].filter(x => x).join(', ');

            // Parse comma-separated usernames and aliases for sockpuppet/multi-account analysis
            const usernames = data.username ? data.username.split(',').map(u => u.trim()).filter(u => u) : [];
            const aliases = data.aliases ? data.aliases.split(',').map(a => a.trim()).filter(a => a) : [];

            // Build search targets array (includes full name, usernames, and aliases)
            const searchTargets = [];
            if (fullName) searchTargets.push(fullName);
            searchTargets.push(...usernames);
            searchTargets.push(...aliases);

            // Helper function to safely check if checkbox is checked
            const isChecked = (id) => {
                const element = document.getElementById(id);
                return element && element.checked;
            };

            // Base Person Searches
            if (isChecked('base-general') && fullName) {
                queries.push({
                    category: '👤 Person - General Search',
                    query: `"${fullName}" ${personLocation}`
                });
            }

            if (isChecked('base-records') && fullName) {
                queries.push({
                    category: '📄 Person - Official Records',
                    query: `"${fullName}" (records OR documents OR official) ${personLocation}`
                });
            }

            if (isChecked('base-news') && fullName) {
                queries.push({
                    category: '📰 Person - News Coverage',
                    query: `"${fullName}" (news OR article OR press OR media) ${personLocation}`
                });
            }

            if (isChecked('base-government') && fullName) {
                queries.push({
                    category: '🏛️ Person - Government Records',
                    query: `"${fullName}" (government OR public OR court OR legal) ${personLocation}`
                });
            }

            // AUTOMATIC CATCH-ALL PEOPLE SEARCH SITES (no checkbox needed - generates based on available data)

            // TruePeopleSearch - Name + Location search (requires name)
            if (data.firstName && data.lastName && (data.city || data.state)) {
                const locationFormatted = [data.city, data.state].filter(x => x).join(', ');
                const truePeopleSearchUrl = `https://www.truepeoplesearch.com/results?name=${encodeURIComponent(data.firstName)}%20${encodeURIComponent(data.lastName)}&citystatezip=${encodeURIComponent(locationFormatted)}`;
                queries.push({
                    category: '🔍 TruePeopleSearch - Name + Location',
                    query: truePeopleSearchUrl
                });
            }

            // TruePeopleSearch - Phone search (works without name)
            if (data.phone) {
                const digitsOnly = data.phone.replace(/\D/g, '');
                if (digitsOnly.length >= 10) {
                    const formattedPhone = `(${digitsOnly.slice(0, 3)})${digitsOnly.slice(3, 6)}-${digitsOnly.slice(6, 10)}`;
                    const phoneSearchUrl = `https://www.truepeoplesearch.com/resultphone?phoneno=${encodeURIComponent(formattedPhone)}`;
                    queries.push({
                        category: '🔍 TruePeopleSearch - Phone',
                        query: phoneSearchUrl
                    });
                }
            }

            // TruePeopleSearch - Address search (works without name)
            if (data.address && (data.city || data.state || data.zip)) {
                const locationParts = [data.city, data.state, data.zip].filter(x => x);
                const locationFormatted = locationParts.join(', ');
                const addressSearchUrl = `https://www.truepeoplesearch.com/resultaddress?streetaddress=${encodeURIComponent(data.address)}&citystatezip=${encodeURIComponent(locationFormatted)}`;
                queries.push({
                    category: '🔍 TruePeopleSearch - Address',
                    query: addressSearchUrl
                });
            }

            // IDCrawl - Direct URL searches (requires name)
            if (data.firstName && data.lastName && data.state) {
                const nameComponent = `${data.firstName.toLowerCase()}-${data.lastName.toLowerCase()}`;
                const stateComponent = data.state.toLowerCase();
                const idCrawlUrl = `https://www.idcrawl.com/${encodeURIComponent(nameComponent)}/${encodeURIComponent(stateComponent)}`;
                queries.push({
                    category: '🔍 IDCrawl - Direct Link',
                    query: idCrawlUrl
                });

                // With middle name if available
                if (data.middleName) {
                    const nameWithMiddle = `${data.firstName.toLowerCase()}-${data.middleName.toLowerCase()}-${data.lastName.toLowerCase()}`;
                    const idCrawlUrlWithMiddle = `https://www.idcrawl.com/${encodeURIComponent(nameWithMiddle)}/${encodeURIComponent(stateComponent)}`;
                    queries.push({
                        category: '🔍 IDCrawl - Full Name',
                        query: idCrawlUrlWithMiddle
                    });
                }
            }

            // WebMii - Direct URL searches (requires name)
            if (data.firstName && data.lastName) {
                const encodedName = encodeURIComponent(`"${fullName}"`);
                const webMiiUrl = `https://webmii.com/people?n=${encodedName}#gsc.tab=0&gsc.q=${encodedName}&gsc.sort=date`;
                queries.push({
                    category: '🔍 WebMii - Direct Link',
                    query: webMiiUrl
                });

                // With location if available
                if (data.city || data.state) {
                    const locationParts = [data.city, data.state].filter(x => x);
                    const nameWithLocation = `${fullName} ${locationParts.join(', ')}`;
                    const encodedNameWithLocation = encodeURIComponent(`"${nameWithLocation}"`);
                    const webMiiLocationUrl = `https://webmii.com/people?n=${encodedNameWithLocation}#gsc.tab=0&gsc.q=${encodedNameWithLocation}&gsc.sort=date`;
                    queries.push({
                        category: '🔍 WebMii - Name + Location',
                        query: webMiiLocationUrl
                    });
                }
            }

            // That's Them - Name search (requires name)
            if (data.firstName && data.lastName) {
                const thatsThemUrl = `https://thatsthem.com/name/${encodeURIComponent(data.firstName.toLowerCase())}-${encodeURIComponent(data.lastName.toLowerCase())}`;
                queries.push({
                    category: '🔍 That\'s Them - Name',
                    query: thatsThemUrl
                });
            }

            // That's Them - Phone search (works without name)
            if (data.phone) {
                const digitsOnly = data.phone.replace(/\D/g, '');
                if (digitsOnly.length >= 10) {
                    const phoneUrl = `https://thatsthem.com/phone/${digitsOnly}`;
                    queries.push({
                        category: '🔍 That\'s Them - Phone',
                        query: phoneUrl
                    });
                }
            }

            // That's Them - Address search (works without name)
            if (data.address && data.city && data.state) {
                const addressUrl = `https://thatsthem.com/address/${encodeURIComponent(data.address.toLowerCase())}/${encodeURIComponent(data.city.toLowerCase())}/${encodeURIComponent(data.state.toLowerCase())}`;
                queries.push({
                    category: '🔍 That\'s Them - Address',
                    query: addressUrl
                });
            }

            // That's Them - Email search (works without name)
            if (data.email) {
                const emailUrl = `https://thatsthem.com/email/${encodeURIComponent(data.email.toLowerCase())}`;
                queries.push({
                    category: '🔍 That\'s Them - Email',
                    query: emailUrl
                });
            }

            // FamilyTreeNow - Direct URL (requires name)
            if (data.firstName && data.lastName) {
                let familyTreeNowUrl = `https://www.familytreenow.com/search/genealogy/results?first=${encodeURIComponent(data.firstName)}&last=${encodeURIComponent(data.lastName)}`;

                // Add location if available
                if (data.city || data.state) {
                    const locationParts = [];
                    if (data.city) locationParts.push(data.city);
                    if (data.state) locationParts.push(data.state);
                    const locationFormatted = locationParts.join(', ');
                    familyTreeNowUrl += `&citystatezip=${encodeURIComponent(locationFormatted)}`;
                }

                queries.push({
                    category: '🔍 FamilyTreeNow - Direct Link',
                    query: familyTreeNowUrl
                });
            }

            // Unmask - Direct URL searches (requires name)
            if (data.firstName && data.lastName) {
                // Basic name search
                const unmaskUrl = `https://unmask.com/${encodeURIComponent(data.firstName)}-${encodeURIComponent(data.lastName)}/`;
                queries.push({
                    category: '🔍 Unmask - Direct Link',
                    query: unmaskUrl
                });

                // With middle name if provided
                if (data.middleName) {
                    const unmaskUrlWithMiddle = `https://unmask.com/${encodeURIComponent(data.firstName)}-${encodeURIComponent(data.middleName)}-${encodeURIComponent(data.lastName)}/`;
                    queries.push({
                        category: '🔍 Unmask - Full Name',
                        query: unmaskUrlWithMiddle
                    });
                }

                // Try aliases if provided
                if (data.aliases) {
                    const aliasesList = data.aliases.split(',').map(alias => alias.trim()).filter(alias => alias);
                    aliasesList.forEach(alias => {
                        const aliasParts = alias.split(/\s+/).filter(part => part);
                        if (aliasParts.length >= 2) {
                            const unmaskAliasUrl = `https://unmask.com/${aliasParts.map(part => encodeURIComponent(part)).join('-')}/`;
                            queries.push({
                                category: `🔍 Unmask - Alias (${alias})`,
                                query: unmaskAliasUrl
                            });
                        }
                    });
                }
            }

            // CyberBackgroundChecks - Direct URL searches (requires name)
            if (data.firstName && data.lastName && (data.city || data.state)) {
                // Build name component
                let nameComponent = data.firstName.toLowerCase();
                if (data.middleName) {
                    nameComponent += `-${data.middleName.toLowerCase()}`;
                }
                nameComponent += `-${data.lastName.toLowerCase()}`;

                // Build location component
                let locationComponent = '';
                if (data.state && data.city) {
                    const stateFormatted = data.state.toLowerCase().replace(/\s+/g, '-');
                    const cityFormatted = data.city.toLowerCase().replace(/\s+/g, '-');
                    locationComponent = `${stateFormatted}/${cityFormatted}`;
                } else if (data.state) {
                    const stateFormatted = data.state.toLowerCase().replace(/\s+/g, '-');
                    locationComponent = `${stateFormatted}`;
                }

                if (locationComponent) {
                    const cyberBackgroundUrl = `https://www.cyberbackgroundchecks.com/people/${nameComponent}/${locationComponent}`;
                    queries.push({
                        category: '🔍 CyberBackgroundChecks - Direct Link',
                        query: cyberBackgroundUrl
                    });
                }

                // Try without middle name as separate query
                if (!data.middleName && locationComponent) {
                    const nameNoMiddle = `${data.firstName.toLowerCase()}-${data.lastName.toLowerCase()}`;
                    const cyberBackgroundUrlNoMiddle = `https://www.cyberbackgroundchecks.com/people/${nameNoMiddle}/${locationComponent}`;
                    queries.push({
                        category: '🔍 CyberBackgroundChecks - No Middle',
                        query: cyberBackgroundUrlNoMiddle
                    });
                }

                // Try aliases if provided
                if (data.aliases && locationComponent) {
                    const aliasesList = data.aliases.split(',').map(alias => alias.trim()).filter(alias => alias);
                    aliasesList.forEach(alias => {
                        const aliasParts = alias.split(/\s+/).filter(part => part);
                        if (aliasParts.length >= 2) {
                            const aliasNameComponent = aliasParts.map(part => part.toLowerCase()).join('-');
                            const cyberBackgroundAliasUrl = `https://www.cyberbackgroundchecks.com/people/${aliasNameComponent}/${locationComponent}`;
                            queries.push({
                                category: `🔍 CyberBackgroundChecks - Alias (${alias})`,
                                query: cyberBackgroundAliasUrl
                            });
                        }
                    });
                }
            }

            // CyberBackgroundChecks - Address search (works without name)
            if (data.address && data.city && data.state) {
                const addressFormatted = data.address.toLowerCase()
                    .replace(/\s+/g, '-')
                    .replace(/[^\w\-]/g, '');
                const cityFormatted = data.city.toLowerCase().replace(/\s+/g, '-');
                const stateFormatted = data.state.toLowerCase().replace(/\s+/g, '-');

                const cyberBackgroundAddressUrl = `https://www.cyberbackgroundchecks.com/address/${encodeURIComponent(addressFormatted)}/${encodeURIComponent(cityFormatted)}/${encodeURIComponent(stateFormatted)}`;
                queries.push({
                    category: '🔍 CyberBackgroundChecks - Address',
                    query: cyberBackgroundAddressUrl
                });
            }

            // CyberBackgroundChecks - Phone search (works without name)
            if (data.phone) {
                const digitsOnly = data.phone.replace(/\D/g, '');
                if (digitsOnly.length >= 10) {
                    const formattedPhone = `${digitsOnly.slice(0, 3)}-${digitsOnly.slice(3, 6)}-${digitsOnly.slice(6, 10)}`;
                    const cyberBackgroundPhoneUrl = `https://www.cyberbackgroundchecks.com/phone/${encodeURIComponent(formattedPhone)}`;
                    queries.push({
                        category: '🔍 CyberBackgroundChecks - Phone',
                        query: cyberBackgroundPhoneUrl
                    });
                }
            }

            // CyberBackgroundChecks - Email search (works without name)
            if (data.email) {
                const cyberBackgroundEmailUrl = `https://www.cyberbackgroundchecks.com/email/${encodeURIComponent(data.email)}`;
                queries.push({
                    category: '🔍 CyberBackgroundChecks - Email',
                    query: cyberBackgroundEmailUrl
                });
            }

            // Add fullName and personLocation to data object for platform queries
            data.fullName = fullName;
            data.personLocation = personLocation;

            // SOCIAL MEDIA PLATFORM QUERIES - Auto-generate for each checked platform
            const checkedPlatforms = document.querySelectorAll('.social-platform:checked');
            checkedPlatforms.forEach(checkbox => {
                const platformId = checkbox.id;
                const platformName = checkbox.nextElementSibling.textContent; // Get label text
                const searchTerm = fullName || data.username || '';

                if (searchTerm) {
                    // Extract domain from platform ID
                    const domainMap = {
                        'platform-facebook': 'facebook.com',
                        'platform-instagram': 'instagram.com',
                        'platform-twitter': 'twitter.com',
                        'platform-tiktok': 'tiktok.com',
                        'platform-snapchat': 'snapchat.com',
                        'platform-tumblr': 'tumblr.com',
                        'platform-linkedin': 'linkedin.com',
                        'platform-indeed': 'indeed.com',
                        'platform-glassdoor': 'glassdoor.com',
                        'platform-github': 'github.com',
                        'platform-gitlab': 'gitlab.com',
                        'platform-stackoverflow': 'stackoverflow.com',
                        'platform-medium': 'medium.com',
                        'platform-substack': 'substack.com',
                        'platform-youtube': 'youtube.com',
                        'platform-vimeo': 'vimeo.com',
                        'platform-twitch': 'twitch.tv',
                        'platform-rumble': 'rumble.com',
                        'platform-reddit': 'reddit.com',
                        'platform-discord': 'discord.com',
                        'platform-telegram': 'telegram.org',
                        'platform-whatsapp': 'whatsapp.com',
                        'platform-pinterest': 'pinterest.com',
                        'platform-flickr': 'flickr.com',
                        'platform-deviantart': 'deviantart.com',
                        'platform-behance': 'behance.net',
                        'platform-soundcloud': 'soundcloud.com',
                        'platform-spotify': 'spotify.com',
                        'platform-bandcamp': 'bandcamp.com',
                        'platform-onlyfans': 'onlyfans.com',
                        'platform-patreon': 'patreon.com',
                        'platform-cashapp': 'cash.app',
                        'platform-venmo': 'venmo.com',
                        'platform-truthsocial': 'truthsocial.com',
                        'platform-gettr': 'gettr.com',
                        'platform-minds': 'minds.com'
                    };

                    const domain = domainMap[platformId];
                    if (domain) {
                        // INSTAGRAM - Platform-specific URL patterns for better results
                        if (platformId === 'platform-instagram') {
                            // Profile search
                            queries.push({
                                category: `📱 ${platformName} - Profile`,
                                query: `site:${domain} "${searchTerm}"`
                            });

                            // Posts (using Instagram URL structure /p/)
                            queries.push({
                                category: `📱 ${platformName} - Posts`,
                                query: `site:${domain} "${searchTerm}" inurl:p/`
                            });

                            // Tagged photos (using Instagram URL structure /tagged/)
                            queries.push({
                                category: `📱 ${platformName} - Tagged Photos`,
                                query: `site:${domain} "${searchTerm}" inurl:tagged/`
                            });

                            // If username provided, use direct URL patterns
                            if (data.username) {
                                queries.push({
                                    category: `📱 ${platformName} - User Posts`,
                                    query: `site:${domain}/${data.username}/`
                                });

                                queries.push({
                                    category: `📱 ${platformName} - Followers`,
                                    query: `site:${domain}/${data.username}/followers`
                                });

                                queries.push({
                                    category: `📱 ${platformName} - Following`,
                                    query: `site:${domain}/${data.username}/following`
                                });
                            }
                        }
                        // REDDIT - Platform-specific URL patterns
                        else if (platformId === 'platform-reddit') {
                            // Profile search
                            queries.push({
                                category: `📱 ${platformName} - Profile`,
                                query: `site:${domain} "${searchTerm}"`
                            });

                            // User posts
                            if (data.username) {
                                queries.push({
                                    category: `📱 ${platformName} - User Posts`,
                                    query: `site:${domain}/user/${data.username}`
                                });

                                queries.push({
                                    category: `📱 ${platformName} - Comments`,
                                    query: `site:${domain} author:${data.username}`
                                });
                            }
                        }
                        // TWITTER/X - Platform-specific patterns
                        else if (platformId === 'platform-twitter') {
                            // Profile search on both domains
                            queries.push({
                                category: `📱 ${platformName} - Profile (Twitter)`,
                                query: `site:twitter.com "${searchTerm}"`
                            });

                            queries.push({
                                category: `📱 ${platformName} - Profile (X.com)`,
                                query: `site:x.com "${searchTerm}"`
                            });

                            // Username-specific queries
                            if (data.username) {
                                queries.push({
                                    category: `📱 ${platformName} - Tweets`,
                                    query: `(site:twitter.com OR site:x.com) from:${data.username}`
                                });

                                queries.push({
                                    category: `📱 ${platformName} - Replies`,
                                    query: `(site:twitter.com OR site:x.com) to:${data.username}`
                                });

                                queries.push({
                                    category: `📱 ${platformName} - Mentions`,
                                    query: `(site:twitter.com OR site:x.com) @${data.username}`
                                });
                            }
                        }
                        // FACEBOOK - Platform-specific URL patterns
                        else if (platformId === 'platform-facebook') {
                            queries.push({
                                category: `📱 ${platformName} - Profile`,
                                query: `site:${domain} "${searchTerm}"`
                            });

                            if (data.username) {
                                queries.push({
                                    category: `📱 ${platformName} - Posts`,
                                    query: `site:${domain}/${data.username}/posts`
                                });

                                queries.push({
                                    category: `📱 ${platformName} - Photos`,
                                    query: `site:${domain}/${data.username}/photos`
                                });

                                queries.push({
                                    category: `📱 ${platformName} - Videos`,
                                    query: `site:${domain}/${data.username}/videos`
                                });

                                queries.push({
                                    category: `📱 ${platformName} - Friends`,
                                    query: `site:${domain}/${data.username}/friends`
                                });
                            }

                            // Location-based search
                            queries.push({
                                category: `📱 ${platformName} - Location Search`,
                                query: `site:${domain} "${searchTerm}" "lives in"`
                            });
                        }
                        // TIKTOK - Platform-specific URL patterns
                        else if (platformId === 'platform-tiktok') {
                            queries.push({
                                category: `📱 ${platformName} - Profile`,
                                query: `site:${domain} "${searchTerm}"`
                            });

                            if (data.username) {
                                queries.push({
                                    category: `📱 ${platformName} - User Page`,
                                    query: `site:${domain}/@${data.username}`
                                });

                                queries.push({
                                    category: `📱 ${platformName} - Videos`,
                                    query: `site:${domain}/@${data.username}/video`
                                });
                            }
                        }
                        // YOUTUBE - Platform-specific URL patterns
                        else if (platformId === 'platform-youtube') {
                            queries.push({
                                category: `📱 ${platformName} - Profile`,
                                query: `site:${domain} "${searchTerm}"`
                            });

                            if (data.username) {
                                queries.push({
                                    category: `📱 ${platformName} - Channel (@username)`,
                                    query: `site:${domain}/@${data.username}`
                                });

                                queries.push({
                                    category: `📱 ${platformName} - Channel (user)`,
                                    query: `site:${domain}/user/${data.username}`
                                });

                                queries.push({
                                    category: `📱 ${platformName} - Channel (c/)`,
                                    query: `site:${domain}/c/${data.username}`
                                });

                                queries.push({
                                    category: `📱 ${platformName} - Videos`,
                                    query: `site:${domain} "${data.username}" inurl:/watch`
                                });
                            }
                        }
                        // LINKEDIN - Platform-specific URL patterns
                        else if (platformId === 'platform-linkedin') {
                            queries.push({
                                category: `📱 ${platformName} - Profile`,
                                query: `site:${domain} "${searchTerm}"`
                            });

                            if (data.username) {
                                queries.push({
                                    category: `📱 ${platformName} - Profile Page`,
                                    query: `site:${domain}/in/${data.username}`
                                });

                                queries.push({
                                    category: `📱 ${platformName} - Experience`,
                                    query: `site:${domain}/in/${data.username}/detail/experience`
                                });

                                queries.push({
                                    category: `📱 ${platformName} - Skills`,
                                    query: `site:${domain}/in/${data.username}/detail/skills`
                                });
                            }

                            // Job title search
                            if (data.occupation) {
                                queries.push({
                                    category: `📱 ${platformName} - Job Title`,
                                    query: `site:${domain} "${searchTerm}" "${data.occupation}"`
                                });
                            }
                        }
                        // GITHUB - Platform-specific URL patterns
                        else if (platformId === 'platform-github') {
                            queries.push({
                                category: `📱 ${platformName} - Profile`,
                                query: `site:${domain} "${searchTerm}"`
                            });

                            if (data.username) {
                                queries.push({
                                    category: `📱 ${platformName} - User Profile`,
                                    query: `site:${domain}/${data.username}`
                                });

                                queries.push({
                                    category: `📱 ${platformName} - Repositories`,
                                    query: `site:${domain}/${data.username}?tab=repositories`
                                });

                                queries.push({
                                    category: `📱 ${platformName} - Stars`,
                                    query: `site:${domain}/${data.username}?tab=stars`
                                });

                                queries.push({
                                    category: `📱 ${platformName} - Followers`,
                                    query: `site:${domain}/${data.username}?tab=followers`
                                });

                                queries.push({
                                    category: `📱 ${platformName} - Following`,
                                    query: `site:${domain}/${data.username}?tab=following`
                                });
                            }
                        }
                        // ALL OTHER PLATFORMS - Generic queries
                        else {
                            // Profile search
                            queries.push({
                                category: `📱 ${platformName} - Profile`,
                                query: `site:${domain} "${searchTerm}"`
                            });

                            // Posts/Activity
                            queries.push({
                                category: `📱 ${platformName} - Posts/Activity`,
                                query: `site:${domain} "${searchTerm}" (post OR status OR update OR published)`
                            });

                            // Comments/Interactions
                            queries.push({
                                category: `📱 ${platformName} - Comments`,
                                query: `site:${domain} "${searchTerm}" (comment OR reply OR responded)`
                            });
                        }
                    }
                }
            });

            // SOCK PUPPET DETECTION - Cross-reference queries
            const sockPuppetQueries = generateSockPuppetQueries(data);
            queries.push(...sockPuppetQueries);

            // USERNAME/ALIAS/ACCOUNT ID QUERIES - For sockpuppet detection and account linking
            if (usernames.length > 0) {
                usernames.forEach(username => {
                    queries.push({
                        category: '🎭 Username Search - All Platforms',
                        query: `"${username}" (profile OR account OR user OR @${username})`
                    });

                    queries.push({
                        category: '🎭 Username Search - Social Media',
                        query: `"${username}" (site:facebook.com OR site:instagram.com OR site:twitter.com OR site:tiktok.com OR site:reddit.com OR site:linkedin.com)`
                    });

                    queries.push({
                        category: '🎭 Username Search - Forums & Communities',
                        query: `"${username}" (site:reddit.com OR site:github.com OR site:stackoverflow.com OR site:discord.com)`
                    });

                    if (data.accountId) {
                        queries.push({
                            category: '🔗 Username + Account ID - Link Verification',
                            query: `("${username}" AND "${data.accountId}") (profile OR account OR user)`
                        });
                    }
                });
            }

            if (aliases.length > 0) {
                aliases.forEach(alias => {
                    queries.push({
                        category: '🎭 Alias/Nickname Search - All Platforms',
                        query: `"${alias}" (profile OR account OR user OR known as OR aka)`
                    });

                    queries.push({
                        category: '🎭 Alias/Nickname Search - Social Media',
                        query: `"${alias}" (site:facebook.com OR site:instagram.com OR site:twitter.com OR site:tiktok.com OR site:reddit.com)`
                    });

                    if (fullName) {
                        queries.push({
                            category: '🔗 Alias + Real Name - Identity Linking',
                            query: `("${alias}" AND "${fullName}") (profile OR account OR identity)`
                        });
                    }
                });
            }

            if (data.accountId) {
                queries.push({
                    category: '🆔 Account ID Search - All Platforms',
                    query: `"${data.accountId}" (user OR account OR profile OR uid OR user_id OR userid)`
                });

                queries.push({
                    category: '🆔 Account ID Search - Social Media',
                    query: `"${data.accountId}" (site:facebook.com OR site:instagram.com OR site:twitter.com OR site:tiktok.com OR site:snapchat.com)`
                });

                if (fullName) {
                    queries.push({
                        category: '🔗 Account ID + Name - Profile Verification',
                        query: `("${data.accountId}" AND "${fullName}")`
                    });
                }
            }

            // Cross-reference queries for sockpuppet detection (all usernames × all aliases)
            if (usernames.length > 0 && aliases.length > 0) {
                usernames.forEach(username => {
                    aliases.forEach(alias => {
                        queries.push({
                            category: '🕵️ Sockpuppet Detection - Username × Alias',
                            query: `("${username}" AND "${alias}") (same OR linked OR connected OR also known as)`
                        });
                    });
                });
            }

            // AUTO-GENERATED DOCUMENT SEARCHES (using name, username, email)
            const searchTerms = [fullName, ...usernames, ...aliases, data.email].filter(x => x);
            if (searchTerms.length > 0) {
                const docTypes = [
                    {ext: 'pdf', name: 'PDF Documents'},
                    {ext: 'doc', name: 'Word Documents'},
                    {ext: 'docx', name: 'Word Documents (DOCX)'},
                    {ext: 'xls', name: 'Excel Spreadsheets'},
                    {ext: 'xlsx', name: 'Excel Spreadsheets (XLSX)'},
                    {ext: 'ppt', name: 'PowerPoint Presentations'},
                    {ext: 'pptx', name: 'PowerPoint Presentations (PPTX)'},
                    {ext: 'txt', name: 'Text Files'},
                    {ext: 'csv', name: 'CSV Files'}
                ];

                searchTerms.forEach(term => {
                    docTypes.forEach(doc => {
                        queries.push({
                            category: `📄 ${doc.name} - Auto-Generated`,
                            query: `filetype:${doc.ext} "${term}"`
                        });
                    });
                });

                // Financial documents
                if (fullName) {
                    queries.push({
                        category: '💰 Financial Documents - Auto-Generated',
                        query: `(filetype:pdf OR filetype:xls OR filetype:xlsx) "${fullName}" (invoice OR receipt OR statement OR tax OR financial)`
                    });
                }

                // Legal documents
                if (fullName) {
                    queries.push({
                        category: '⚖️ Legal Documents - Auto-Generated',
                        query: `(filetype:pdf OR filetype:doc OR filetype:docx) "${fullName}" (contract OR agreement OR court OR legal OR compliance)`
                    });
                }
            }

            // AUTO-GENERATED PROPERTY & VEHICLE SEARCHES
            if (data.vehicleVin) {
                queries.push({
                    category: '🚗 Vehicle VIN - Auto-Generated',
                    query: `"${data.vehicleVin}" (vehicle OR VIN OR "vehicle identification" OR registration)`
                });
                queries.push({
                    category: '🚗 Vehicle VIN - Marketplaces',
                    query: `"${data.vehicleVin}" (site:ebay.com OR site:craigslist.org OR site:facebook.com OR site:offerup.com OR site:autotrader.com)`
                });
            }

            if (data.licensePlate) {
                const plateLocation = data.state || data.city || '';
                queries.push({
                    category: '🚗 License Plate - Auto-Generated',
                    query: `"${data.licensePlate}" ${plateLocation} (license OR plate OR vehicle OR registration)`
                });
                queries.push({
                    category: '🚗 License Plate - Images',
                    query: `"${data.licensePlate}" ${plateLocation} (photo OR image OR picture OR spotted)`
                });
            }

            if (data.vehicleMake && data.vehicleModel) {
                const vehicleDesc = `${data.vehicleYear || ''} ${data.vehicleMake} ${data.vehicleModel} ${data.vehicleColor || ''}`.trim();
                const searchLocation = [data.city, data.state].filter(x => x).join(', ');

                queries.push({
                    category: '🚗 Vehicle Make/Model - For Sale',
                    query: `"${vehicleDesc}" ${searchLocation} (for sale OR selling OR forsale)`
                });
                queries.push({
                    category: '🚗 Vehicle Make/Model - Marketplaces',
                    query: `"${vehicleDesc}" ${searchLocation} (site:craigslist.org OR site:facebook.com OR site:offerup.com OR site:letgo.com)`
                });
            }

            if (data.serialNumber) {
                queries.push({
                    category: '🔢 Serial Number - Auto-Generated',
                    query: `"${data.serialNumber}" ${data.propertyDescription || ''} (serial OR "serial number" OR product OR item)`
                });
                queries.push({
                    category: '🔢 Serial Number - Marketplaces',
                    query: `"${data.serialNumber}" (site:ebay.com OR site:craigslist.org OR site:facebook.com OR site:offerup.com OR site:mercari.com)`
                });
                queries.push({
                    category: '🔢 Serial Number - Stolen Property',
                    query: `"${data.serialNumber}" (stolen OR missing OR lost OR report OR police)`
                });
            }

            if (data.propertyAddress) {
                const ownerName = data.propertyOwner || fullName || '';
                queries.push({
                    category: '🏠 Property Address - Auto-Generated',
                    query: `"${data.propertyAddress}" ${ownerName ? `"${ownerName}"` : ''} (property OR real estate OR ownership OR deed OR tax)`
                });
                queries.push({
                    category: '🏠 Property Address - Public Records',
                    query: `"${data.propertyAddress}" ${data.city || ''} ${data.state || ''} (site:zillow.com OR site:realtor.com OR site:trulia.com OR site:redfin.com)`
                });
            }

            if (data.businessName && data.propertyAddress) {
                queries.push({
                    category: '🏢 Business at Property - Auto-Generated',
                    query: `"${data.businessName}" "${data.propertyAddress}" (business OR company OR LLC OR corporation)`
                });
            }

            if (data.miscMake && data.miscModel) {
                const itemDesc = `${data.miscMake} ${data.miscModel}`.trim();
                queries.push({
                    category: '📦 Misc Property Make/Model - Marketplaces',
                    query: `"${itemDesc}" ${data.serialNumber || ''} (site:ebay.com OR site:craigslist.org OR site:facebook.com OR site:offerup.com)`
                });
            }

            // International Domains
            if (isChecked('domains-all-global') && fullName) {
                const platforms = [
                    {site: 'facebook.com', name: 'Facebook'},
                    {site: 'instagram.com', name: 'Instagram'},
                    {site: 'twitter.com', name: 'Twitter'},
                    {site: 'tiktok.com', name: 'TikTok'},
                    {site: 'snapchat.com', name: 'Snapchat'}
                ];

                const searchTarget = fullName || data.username;
                if (searchTarget) {
                    platforms.forEach(platform => {
                        // 1. Basic profile search
                        queries.push({
                            category: `📱 ${platform.name} - Profile`,
                            query: `site:${platform.site} "${searchTarget}"`
                        });

                        // 2. Posts/Status search
                        queries.push({
                            category: `📱 ${platform.name} - Posts`,
                            query: `site:${platform.site} "${searchTarget}" (post OR status OR update OR published)`
                        });

                        // 3. Comments/Replies
                        queries.push({
                            category: `📱 ${platform.name} - Comments`,
                            query: `site:${platform.site} "${searchTarget}" (comment OR reply OR responded)`
                        });

                        // 4. Photos/Media
                        queries.push({
                            category: `📱 ${platform.name} - Photos/Media`,
                            query: `site:${platform.site} "${searchTarget}" (photo OR image OR video OR media)`
                        });

                        // 5. Friends/Followers
                        queries.push({
                            category: `📱 ${platform.name} - Connections`,
                            query: `site:${platform.site} "${searchTarget}" (friend OR follower OR following OR connection)`
                        });

                        // 6. Groups/Pages/Communities
                        if (platform.site === 'facebook.com') {
                            queries.push({
                                category: `📱 ${platform.name} - Groups/Pages`,
                                query: `site:${platform.site} "${searchTarget}" (group OR page OR community)`
                            });
                        }

                        // 7. Location-based (if location provided)
                        if (personLocation) {
                            queries.push({
                                category: `📱 ${platform.name} - Location`,
                                query: `site:${platform.site} "${searchTarget}" "${personLocation}"`
                            });
                        }
                    });
                }
            }

            // Professional Networks (AUTO-GENERATES ALL VARIATIONS)
            if (isChecked('social-professional') && fullName) {
                const platforms = [
                    {site: 'linkedin.com', name: 'LinkedIn'},
                    {site: 'indeed.com', name: 'Indeed'},
                    {site: 'glassdoor.com', name: 'Glassdoor'}
                ];

                platforms.forEach(platform => {
                    // Basic profile
                    queries.push({
                        category: `💼 ${platform.name} - Profile`,
                        query: `site:${platform.site} "${fullName}" ${data.occupation || data.employer || ''}`
                    });

                    // Posts/Activity
                    queries.push({
                        category: `💼 ${platform.name} - Activity`,
                        query: `site:${platform.site} "${fullName}" (post OR article OR activity OR shared)`
                    });

                    // Connections/Network
                    queries.push({
                        category: `💼 ${platform.name} - Network`,
                        query: `site:${platform.site} "${fullName}" (connection OR colleague OR recommendation)`
                    });

                    // Work history
                    if (data.employer) {
                        queries.push({
                            category: `💼 ${platform.name} - Employment`,
                            query: `site:${platform.site} "${fullName}" "${data.employer}"`
                        });
                    }
                });
            }

            // Video Platforms (AUTO-GENERATES ALL VARIATIONS)
            if (isChecked('social-video') && (fullName || data.username)) {
                const videoPlatforms = [
                    {site: 'youtube.com', name: 'YouTube'},
                    {site: 'twitch.tv', name: 'Twitch'},
                    {site: 'vimeo.com', name: 'Vimeo'},
                    {site: 'rumble.com', name: 'Rumble'}
                ];

                const searchTarget = fullName || data.username;
                videoPlatforms.forEach(platform => {
                    // Channel/Profile
                    queries.push({
                        category: `📹 ${platform.name} - Channel`,
                        query: `site:${platform.site} "${searchTarget}"`
                    });

                    // Videos/Content
                    queries.push({
                        category: `📹 ${platform.name} - Videos`,
                        query: `site:${platform.site} "${searchTarget}" (video OR stream OR uploaded)`
                    });

                    // Comments
                    queries.push({
                        category: `📹 ${platform.name} - Comments`,
                        query: `site:${platform.site} "${searchTarget}" (comment OR replied)`
                    });

                    // Subscribers/Followers
                    queries.push({
                        category: `📹 ${platform.name} - Subscribers`,
                        query: `site:${platform.site} "${searchTarget}" (subscriber OR follower OR following)`
                    });
                });
            }

            // Gaming Platforms (AUTO-GENERATES ALL VARIATIONS)
            if (isChecked('social-gaming') && data.username) {
                const gamingPlatforms = [
                    {site: 'discord.com', name: 'Discord'},
                    {site: 'steamcommunity.com', name: 'Steam'},
                    {site: 'xbox.com', name: 'Xbox Live'},
                    {site: 'playstation.com', name: 'PlayStation Network'}
                ];

                gamingPlatforms.forEach(platform => {
                    // Profile/Account
                    queries.push({
                        category: `🎮 ${platform.name} - Profile`,
                        query: `site:${platform.site} "${data.username}"`
                    });

                    // Activity/Games
                    queries.push({
                        category: `🎮 ${platform.name} - Activity`,
                        query: `site:${platform.site} "${data.username}" (game OR playing OR activity)`
                    });

                    // Friends/Community
                    queries.push({
                        category: `🎮 ${platform.name} - Friends`,
                        query: `site:${platform.site} "${data.username}" (friend OR clan OR guild OR team)`
                    });
                });
            }

            // Messaging Apps (AUTO-GENERATES ALL VARIATIONS)
            if (isChecked('social-messaging')) {
                const messagingApps = [
                    {site: 'web.whatsapp.com', name: 'WhatsApp'},
                    {site: 'telegram.org', name: 'Telegram'},
                    {site: 'signal.org', name: 'Signal'},
                    {site: 'viber.com', name: 'Viber'}
                ];

                const searchTarget = data.phone || data.username || fullName;
                if (searchTarget) {
                    messagingApps.forEach(platform => {
                        queries.push({
                            category: `💬 ${platform.name} - Search`,
                            query: `site:${platform.site} "${searchTarget}"`
                        });

                        queries.push({
                            category: `💬 ${platform.name} - Groups/Channels`,
                            query: `"${searchTarget}" (${platform.name} OR "group chat" OR channel)`
                        });
                    });
                }
            }

            // Dating Platforms (AUTO-GENERATES ALL VARIATIONS)
            if (isChecked('social-dating')) {
                const datingPlatforms = [
                    {site: 'tinder.com', name: 'Tinder'},
                    {site: 'bumble.com', name: 'Bumble'},
                    {site: 'match.com', name: 'Match'},
                    {site: 'hinge.co', name: 'Hinge'},
                    {site: 'okcupid.com', name: 'OKCupid'}
                ];

                const searchTarget = fullName || data.username;
                if (searchTarget) {
                    datingPlatforms.forEach(platform => {
                        queries.push({
                            category: `❤️ ${platform.name} - Profile`,
                            query: `site:${platform.site} "${searchTarget}"`
                        });

                        if (data.age || personLocation) {
                            queries.push({
                                category: `❤️ ${platform.name} - Detailed`,
                                query: `"${searchTarget}" ${platform.name} ${data.age || ''} ${personLocation || ''}`
                            });
                        }
                    });
                }
            }

            // Forums & Communities (AUTO-GENERATES ALL VARIATIONS)
            if (isChecked('social-forums')) {
                const forums = [
                    {site: 'reddit.com', name: 'Reddit'},
                    {site: '4chan.org', name: '4chan'},
                    {site: '8kun.top', name: '8kun'},
                    {site: 'quora.com', name: 'Quora'}
                ];

                const searchTarget = data.username || fullName;
                if (searchTarget) {
                    forums.forEach(platform => {
                        // User profile
                        queries.push({
                            category: `💭 ${platform.name} - User`,
                            query: `site:${platform.site} "${searchTarget}"`
                        });

                        // Posts/Comments
                        queries.push({
                            category: `💭 ${platform.name} - Posts`,
                            query: `site:${platform.site} "${searchTarget}" (post OR comment OR thread)`
                        });

                        // Subreddits/Communities (Reddit specific)
                        if (platform.site === 'reddit.com') {
                            queries.push({
                                category: `💭 ${platform.name} - Subreddits`,
                                query: `site:reddit.com/r/ "${searchTarget}"`
                            });
                        }
                    });
                }
            }

            // Creative Platforms (AUTO-GENERATES ALL VARIATIONS)
            if (isChecked('social-creative')) {
                const creativePlatforms = [
                    {site: 'pinterest.com', name: 'Pinterest'},
                    {site: 'deviantart.com', name: 'DeviantArt'},
                    {site: 'behance.net', name: 'Behance'},
                    {site: 'dribbble.com', name: 'Dribbble'}
                ];

                const searchTarget = data.username || fullName;
                if (searchTarget) {
                    creativePlatforms.forEach(platform => {
                        // Profile/Portfolio
                        queries.push({
                            category: `🎨 ${platform.name} - Profile`,
                            query: `site:${platform.site} "${searchTarget}"`
                        });

                        // Works/Creations
                        queries.push({
                            category: `🎨 ${platform.name} - Works`,
                            query: `site:${platform.site} "${searchTarget}" (portfolio OR artwork OR design OR created)`
                        });

                        // Followers/Following
                        queries.push({
                            category: `🎨 ${platform.name} - Network`,
                            query: `site:${platform.site} "${searchTarget}" (follower OR following OR collection)`
                        });
                    });
                }
            }

            // International Platforms (AUTO-GENERATES ALL VARIATIONS)
            if (isChecked('social-international')) {
                const intlPlatforms = [
                    {site: 'vk.com', name: 'VK (Russia)'},
                    {site: 'wechat.com', name: 'WeChat (China)'},
                    {site: 'qq.com', name: 'QQ (China)'},
                    {site: 'weibo.com', name: 'Weibo (China)'},
                    {site: 'line.me', name: 'LINE (Japan)'}
                ];

                const searchTarget = data.username || fullName;
                if (searchTarget) {
                    intlPlatforms.forEach(platform => {
                        // Profile
                        queries.push({
                            category: `🌏 ${platform.name} - Profile`,
                            query: `site:${platform.site} "${searchTarget}"`
                        });

                        // Posts/Activity
                        queries.push({
                            category: `🌏 ${platform.name} - Activity`,
                            query: `site:${platform.site} "${searchTarget}" (post OR status OR message)`
                        });
                    });
                }
            }

            // Alternative Platforms (AUTO-GENERATES ALL VARIATIONS)
            if (isChecked('social-alt')) {
                const altPlatforms = [
                    {site: 'parler.com', name: 'Parler'},
                    {site: 'gab.com', name: 'Gab'},
                    {site: 'truthsocial.com', name: 'Truth Social'},
                    {site: 'gettr.com', name: 'Gettr'}
                ];

                const searchTarget = data.username || fullName;
                if (searchTarget) {
                    altPlatforms.forEach(platform => {
                        // Profile
                        queries.push({
                            category: `🗣️ ${platform.name} - Profile`,
                            query: `site:${platform.site} "${searchTarget}"`
                        });

                        // Posts/Truth/Gabs
                        queries.push({
                            category: `🗣️ ${platform.name} - Posts`,
                            query: `site:${platform.site} "${searchTarget}" (post OR truth OR gab OR gettr)`
                        });

                        // Followers
                        queries.push({
                            category: `🗣️ ${platform.name} - Followers`,
                            query: `site:${platform.site} "${searchTarget}" (follower OR following)`
                        });
                    });
                }
            }

            // International Domains
            if (isChecked('domains-all-global') && fullName) {
                queries.push({
                    category: '🌍 International Search - All Domains',
                    query: `"${fullName}" (site:.uk OR site:.ca OR site:.au OR site:.de OR site:.fr OR site:.it OR site:.es OR site:.jp OR site:.cn OR site:.in)`
                });
            }

            // Document Searches
            if (isChecked('doc-all') && fullName) {
                queries.push({
                    category: '📄 Documents - All Types',
                    query: `"${fullName}" (filetype:pdf OR filetype:doc OR filetype:docx OR filetype:xls OR filetype:xlsx OR filetype:ppt OR filetype:pptx)`
                });
            }

            if (isChecked('doc-financial') && fullName) {
                queries.push({
                    category: '💰 Documents - Financial',
                    query: `"${fullName}" (filetype:pdf OR filetype:xls) (financial OR invoice OR statement OR tax)`
                });
            }

            // Criminal Records
            if (isChecked('criminal-all-records') && fullName) {
                queries.push({
                    category: '🚔 Criminal Records - All',
                    query: `"${fullName}" (arrest OR mugshot OR warrant OR court OR "criminal record") ${personLocation}`
                });
            }

            if (isChecked('crime-organized') && fullName) {
                queries.push({
                    category: '🎭 Organized Crime',
                    query: `"${fullName}" (gang OR cartel OR mafia OR "organized crime" OR syndicate)`
                });
            }

            // Property & Assets
            if (isChecked('property-real-estate') && fullName) {
                queries.push({
                    category: '🏡 Real Estate Records',
                    query: `"${fullName}" (property OR "real estate" OR deed OR title OR owner) ${data.address || personLocation}`
                });
            }

            if (isChecked('property-vehicles') && fullName) {
                queries.push({
                    category: '🚗 Vehicle Records',
                    query: `"${fullName}" (vehicle OR car OR VIN OR registration OR title OR DMV) ${data.state || ''}`
                });
            }

            // Technical Searches
            // IP Investigation - Person-focused only
            if (isChecked('tech-ip-all') && data.ipAddress) {
                queries.push({
                    category: '🌐 IP Investigation',
                    query: `"${data.ipAddress}" (WHOIS OR geolocation OR "reverse DNS" OR owner)`
                });
            }

            // Display results
            displayQueries(queries);

            } catch (error) {
                alert(`❌ ERROR: Failed to generate queries.\n\n${error.message}\n\nPlease check your inputs and try again.`);
                console.error('generateQueries error:', error);
            }
        }

        function displayQueries(queries) {
            const container = document.getElementById('queries-container');

            if (queries.length === 0) {
                container.innerHTML = '<p style="color: #888; text-align: center; padding: 40px;">⚠️ No queries generated.<br><br>Please enter at least a name or username and check some boxes.</p>';
                showTab('queries');
                return;
            }

            let html = '<div style="background: #0a0a0a; border: 2px solid #4bff21; border-radius: 5px; padding: 20px;">';
            html += `<p style="color: #4bff21; font-size: 1.1em; margin-bottom: 15px;">✅ ${queries.length} queries generated!</p>`;

            queries.forEach(q => {
                // Create Google search URL
                const googleUrl = `https://www.google.com/search?q=${encodeURIComponent(q.query)}`;

                html += `
                    <div style="background: #1a1a1a; border-left: 4px solid #00f0ff; padding: 15px; margin: 10px 0; border-radius: 3px;">
                        <div style="color: #f8e602; font-weight: bold; margin-bottom: 8px;">${q.category}</div>
                        <div style="color: #4bff21; font-family: monospace; background: #0a0a0a; padding: 10px; border-radius: 3px; word-break: break-all; margin-bottom: 8px;">${q.query}</div>
                        <a href="${googleUrl}" target="_blank" style="display: inline-block; background: #006600; color: #4bff21; padding: 8px 15px; border-radius: 3px; text-decoration: none; border: 1px solid #4bff21; font-size: 0.9em; transition: all 0.3s;">
                            🔍 Search on Google
                        </a>
                    </div>
                `;
            });

            html += '</div>';
            container.innerHTML = html;

            // Switch to Queries tab
            showTab('queries');
        }

        function copyAllQueries() {
            const container = document.getElementById('queries-container');
            const queryDivs = container.querySelectorAll('[style*="font-family: monospace"]');

            if (queryDivs.length === 0) {
                alert('⚠️ No queries to copy. Generate queries first!');
                return;
            }

            let text = '';
            queryDivs.forEach(q => {
                text += q.textContent.trim() + '\n\n';
            });

            navigator.clipboard.writeText(text).then(() => {
                alert(`✅ ${queryDivs.length} queries copied to clipboard!`);
            }).catch(() => {
                alert('❌ Failed to copy to clipboard. Please copy manually.');
            });
        }

        // REMOVED: saveInvestigation - Users now only save via "Save inputs as file" workflow
        // function saveInvestigation() { ... }

        function getAllFormData() {
            return {
                // Person Information
                firstName: document.getElementById('first-name').value,
                lastName: document.getElementById('last-name').value,
                middleName: document.getElementById('middle-name').value,
                aliases: document.getElementById('aliases').value,
                dob: document.getElementById('dob').value,
                age: document.getElementById('age').value,

                // Contact & Location
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                username: document.getElementById('username').value,
                address: document.getElementById('address').value,
                city: document.getElementById('city').value,
                state: document.getElementById('state').value,
                country: document.getElementById('country').value,
                zip: document.getElementById('zip').value,

                // Professional & Education
                occupation: document.getElementById('occupation').value,
                employer: document.getElementById('employer').value,
                school: document.getElementById('school').value,
                interests: document.getElementById('interests').value,

                // Investigation Social Media Accounts
                investigationSocialAccounts: collectInvestigationSocialAccounts()
            };
        }

        function getGeneratedQueries() {
            const queries = [];
            document.querySelectorAll('.query-item').forEach(item => {
                queries.push({
                    category: item.querySelector('.query-category').textContent,
                    query: item.querySelector('.query-text').textContent
                });
            });
            return queries;
        }

        function loadFiles() {
            const fileList = document.getElementById('file-list');
            const savedSubjects = JSON.parse(localStorage.getItem('daisys_subjects') || '[]');

            if (savedSubjects.length === 0) {
                fileList.innerHTML = '<p style="color: #888;">No saved subject files yet. Use "Save inputs as file" in the User Input tab to create files.</p>';
                return;
            }

            let html = '<p style="color: #4bff21; margin-bottom: 10px; font-size: 0.9em;">📁 Saved Subject Profiles:</p>';
            savedSubjects.forEach((subject, index) => {
                const subjectName = subject.name || subject.nickname || 'Unknown Subject';
                const category = subject.category ? ` (${subject.category})` : '';
                html += `
                    <div class="file-item">
                        <div class="file-name">${subjectName}${category} - ${new Date(subject.createdAt).toLocaleDateString()}</div>
                        <div class="file-actions">
                            <button class="file-btn" onclick="viewSubjectDetails('${subject.id}')">View</button>
                            <button class="file-btn" onclick="exportSubjectAsMarkdown('${subject.id}')">Export</button>
                            <button class="file-btn" onclick="deleteSubjectFromFiles('${subject.id}')">Delete</button>
                        </div>
                    </div>
                `;
            });

            fileList.innerHTML = html;
        }

        // Delete subject from file list
        function deleteSubjectFromFiles(subjectId) {
            if (!confirm('Are you sure you want to delete this subject profile?')) return;

            let subjects = JSON.parse(localStorage.getItem('daisys_subjects') || '[]');
            subjects = subjects.filter(s => s.id !== subjectId);
            localStorage.setItem('daisys_subjects', JSON.stringify(subjects));

            loadFiles();
            updateCategoryFilter();
            alert('✅ Subject profile deleted.');
        }

        // REMOVED: openFile - No longer needed with subject-only workflow
        function openFile(index) {
            const savedFiles = JSON.parse(localStorage.getItem('osintFiles') || '[]');
            const file = savedFiles[index];

            if (!file) return;

            // Load data into form
            document.getElementById('case-name').value = file.name || '';
            document.getElementById('investigation-notes').value = file.notes || '';

            if (file.data) {
                // Load regular form fields
                if (file.data.firstName) document.getElementById('first-name').value = file.data.firstName;
                if (file.data.lastName) document.getElementById('last-name').value = file.data.lastName;
                if (file.data.middleName) document.getElementById('middle-name').value = file.data.middleName;
                if (file.data.aliases) document.getElementById('aliases').value = file.data.aliases;
                if (file.data.dob) document.getElementById('dob').value = file.data.dob;
                if (file.data.age) document.getElementById('age').value = file.data.age;
                if (file.data.email) document.getElementById('email').value = file.data.email;
                if (file.data.phone) document.getElementById('phone').value = file.data.phone;
                if (file.data.username) document.getElementById('username').value = file.data.username;
                if (file.data.address) document.getElementById('address').value = file.data.address;
                if (file.data.city) document.getElementById('city').value = file.data.city;
                if (file.data.state) document.getElementById('state').value = file.data.state;
                if (file.data.country) document.getElementById('country').value = file.data.country;
                if (file.data.zip) document.getElementById('zip').value = file.data.zip;
                if (file.data.occupation) document.getElementById('occupation').value = file.data.occupation;
                if (file.data.employer) document.getElementById('employer').value = file.data.employer;
                if (file.data.school) document.getElementById('school').value = file.data.school;
                if (file.data.interests) document.getElementById('interests').value = file.data.interests;

                // Load investigation social accounts if present
                if (file.data.investigationSocialAccounts && Array.isArray(file.data.investigationSocialAccounts) && file.data.investigationSocialAccounts.length > 0) {
                    const invContainer = document.getElementById('investigation-social-accounts-container');
                    invContainer.innerHTML = '';
                    investigationSocialAccountCounter = 0;

                    file.data.investigationSocialAccounts.forEach(account => {
                        investigationSocialAccountCounter++;
                        const entryDiv = document.createElement('div');
                        entryDiv.className = 'social-account-entry';
                        entryDiv.id = `inv-social-entry-${investigationSocialAccountCounter}`;
                        entryDiv.innerHTML = `
                            ${investigationSocialAccountCounter > 1 ? '<hr style="border-color: #00f0ff; margin: 15px 0;">' : ''}
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Platform:</label>
                                    <input type="text" class="inv-social-platform" placeholder="Facebook, Instagram, Twitter..." data-entry="${investigationSocialAccountCounter}" value="${account.platform || ''}">
                                </div>
                                <div class="form-group">
                                    <label>Username/Handle:</label>
                                    <input type="text" class="inv-social-username" placeholder="@username" data-entry="${investigationSocialAccountCounter}" value="${account.username || ''}">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Account ID:</label>
                                    <input type="text" class="inv-social-account-id" placeholder="Numeric ID or unique identifier" data-entry="${investigationSocialAccountCounter}" value="${account.accountId || ''}">
                                </div>
                                <div class="form-group">
                                    <label>Profile URL:</label>
                                    <input type="text" class="inv-social-url" placeholder="https://..." data-entry="${investigationSocialAccountCounter}" value="${account.url || ''}">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Display Name:</label>
                                    <input type="text" class="inv-social-display-name" placeholder="Name shown on profile" data-entry="${investigationSocialAccountCounter}" value="${account.displayName || ''}">
                                </div>
                            </div>
                            ${investigationSocialAccountCounter > 1 ? `<button class="btn" style="background-color: #ff0000; margin-top: 5px;" onclick="removeInvestigationSocialAccount(${investigationSocialAccountCounter})">❌ Remove This Account</button>` : ''}
                        `;
                        invContainer.appendChild(entryDiv);
                    });
                }
            }

            alert(`✅ Loaded investigation: ${file.name}`);
            showTab('user-input');
        }

        function deleteFile(index) {
            if (!confirm('Are you sure you want to delete this file?')) return;

            let savedFiles = JSON.parse(localStorage.getItem('osintFiles') || '[]');
            savedFiles.splice(index, 1);
            localStorage.setItem('osintFiles', JSON.stringify(savedFiles));
            loadFiles();
        }

        // Get storage directory based on user selection
        function getStorageLocation() {
            const selection = document.getElementById('storage-location').value;

            if (typeof cordova === 'undefined' || !cordova.file) {
                console.log('Cordova file plugin not available, using default');
                return null;
            }

            switch(selection) {
                case 'downloads':
                    // Use Daisy/Downloads folder relative to HTML file
                    return getBaseDaisyPath() + 'Downloads/';
                case 'documents':
                    // Use Daisy/Documents folder relative to HTML file
                    return getBaseDaisyPath() + 'Documents/';
                case 'daisystracker':
                    // Use Daisy folder relative to HTML file
                    return getBaseDaisyPath();
                case 'custom':
                    return 'custom'; // Will trigger custom picker
                default:
                    // Default to Daisy/Downloads folder
                    return getBaseDaisyPath() + 'Downloads/';
            }
        }

        // Create folder on device file system
        function createFolderOnDevice() {
            const folderName = document.getElementById('folder-name').value.trim();
            if (!folderName) {
                alert('⚠️ Please enter a folder name');
                return;
            }

            const baseDir = getStorageLocation();

            if (!baseDir) {
                // Fallback to localStorage if Cordova not available
                createFolderLocalStorage(folderName);
                return;
            }

            if (baseDir === 'custom') {
                alert('📂 Custom location picker will be available in the full mobile app. For now, choose Downloads, Documents, or App Storage.');
                return;
            }

            // Create folder using Cordova File plugin
            window.resolveLocalFileSystemURL(baseDir, function(dirEntry) {
                dirEntry.getDirectory(folderName, { create: true, exclusive: false }, function(newDirEntry) {
                    alert(`✅ Folder "${folderName}" created at:\n${newDirEntry.nativeURL}`);
                    document.getElementById('folder-name').value = '';

                    // Also save to localStorage for tracking
                    let folders = JSON.parse(localStorage.getItem('osintFolders') || '[]');
                    const folderInfo = {
                        name: folderName,
                        path: newDirEntry.nativeURL,
                        created: new Date().toISOString()
                    };
                    folders.push(folderInfo);
                    localStorage.setItem('osintFolders', JSON.stringify(folders));
                }, function(error) {
                    alert(`❌ Error creating folder: ${error.code}`);
                });
            }, function(error) {
                alert(`❌ Error accessing storage: ${error.code}`);
            });
        }

        // Fallback: Create folder in localStorage (old method)
        function createFolderLocalStorage(folderName) {
            let folders = JSON.parse(localStorage.getItem('osintFolders') || '[]');
            if (!folders.some(f => f.name === folderName || f === folderName)) {
                folders.push({
                    name: folderName,
                    path: 'localStorage',
                    created: new Date().toISOString()
                });
                localStorage.setItem('osintFolders', JSON.stringify(folders));
                alert(`✅ Folder "${folderName}" created in app storage!`);
                document.getElementById('folder-name').value = '';
            } else {
                alert('⚠️ Folder already exists');
            }
        }

        // Old function kept for compatibility
        function createFolder() {
            createFolderOnDevice();
        }

        function exportMarkdown() {
            const caseName = document.getElementById('case-name').value.trim() || 'Investigation';
            const notes = document.getElementById('investigation-notes').value.trim();
            const queries = getGeneratedQueries();

            let markdown = `# OSINT Investigation: ${caseName}\n\n`;
            markdown += `**Date:** ${new Date().toLocaleDateString()}\n\n`;

            if (notes) {
                markdown += `## Investigation Notes\n\n${notes}\n\n`;
            }

            markdown += `## Generated Queries\n\n`;
            queries.forEach(q => {
                markdown += `### ${q.category}\n\`\`\`\n${q.query}\n\`\`\`\n\n`;
            });

            // Download as file
            const blob = new Blob([markdown], {type: 'text/markdown'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${caseName.replace(/\s+/g, '_')}_${Date.now()}.md`;
            a.click();
            URL.revokeObjectURL(url);
        }

        function clearAll() {
            if (!confirm('Are you sure you want to clear all data?')) return;

            document.querySelectorAll('input[type="text"], input[type="email"], input[type="tel"], textarea').forEach(el => {
                el.value = '';
            });

            document.querySelectorAll('input[type="checkbox"]').forEach(el => {
                el.checked = false;
            });

            // Re-check default checkboxes
            isChecked('base-general') = true;
            isChecked('base-records') = true;
            isChecked('base-news') = true;
            isChecked('base-government') = true;
            isChecked('social-all-major') = true;

            document.getElementById('queries-container').innerHTML = '';
            document.getElementById('results-display').classList.remove('active');
        }

        // ============================================================================
        // SUBJECT MANAGEMENT FUNCTIONS
        // ============================================================================

        let socialAccountCounter = 1;
        let subjectPhotos = []; // Array to store photo data URIs
        let currentEditingSubjectId = null;

        // Add another social media account entry
        function addSocialAccount() {
            socialAccountCounter++;
            const container = document.getElementById('social-accounts-container');
            const newEntry = document.createElement('div');
            newEntry.className = 'social-account-entry';
            newEntry.id = `social-entry-${socialAccountCounter}`;
            newEntry.innerHTML = `
                <hr style="border-color: #4bff21; margin: 15px 0;">
                <div class="form-row">
                    <div class="form-group">
                        <label>Platform:</label>
                        <input type="text" class="social-platform" placeholder="e.g., Facebook, Instagram, TikTok" data-entry="${socialAccountCounter}">
                    </div>
                    <div class="form-group">
                        <label>Username/Handle:</label>
                        <input type="text" class="social-username" placeholder="@username" data-entry="${socialAccountCounter}">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Account ID/URL:</label>
                        <input type="text" class="social-account-id" placeholder="Profile URL or account ID" data-entry="${socialAccountCounter}">
                    </div>
                    <div class="form-group">
                        <label>Display Name:</label>
                        <input type="text" class="social-display-name" placeholder="Name shown on profile" data-entry="${socialAccountCounter}">
                    </div>
                </div>
                <button class="btn" style="background-color: #ff0000; margin-top: 5px;" onclick="removeSocialAccount(${socialAccountCounter})">❌ Remove This Account</button>
            `;
            container.appendChild(newEntry);
        }

        // Remove social media account entry
        function removeSocialAccount(entryId) {
            const entry = document.getElementById(`social-entry-${entryId}`);
            if (entry) {
                entry.remove();
            }
        }

        // Handle photo selection from camera roll
        function handlePhotoSelection(event) {
            const files = event.target.files;
            const preview = document.getElementById('subject-photos-preview');

            for (let i = 0; i < files.length; i++) {
                const file = files[i];

                // Check file type
                if (!file.type.match('image/jpeg') && !file.type.match('image/png')) {
                    alert(`File "${file.name}" is not a JPEG or PNG image. Skipped.`);
                    continue;
                }

                // Read file as data URI
                const reader = new FileReader();
                reader.onload = function(e) {
                    const dataUri = e.target.result;
                    subjectPhotos.push({
                        filename: file.name,
                        dataUri: dataUri,
                        timestamp: new Date().toISOString()
                    });

                    // Create preview element
                    const photoDiv = document.createElement('div');
                    photoDiv.style.cssText = 'position: relative; border: 2px solid #4bff21; border-radius: 5px; overflow: hidden;';
                    photoDiv.innerHTML = `
                        <img src="${dataUri}" style="width: 100%; height: 150px; object-fit: cover;">
                        <button onclick="removePhoto(${subjectPhotos.length - 1})" style="position: absolute; top: 5px; right: 5px; background: red; color: white; border: none; border-radius: 3px; padding: 5px 8px; cursor: pointer; font-size: 12px;">❌</button>
                        <div style="padding: 5px; background: #0a0a0a; font-size: 0.75em; color: #888; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;">${file.name}</div>
                    `;
                    preview.appendChild(photoDiv);
                };
                reader.readAsDataURL(file);
            }
        }

        // Remove photo from preview
        function removePhoto(index) {
            subjectPhotos.splice(index, 1);
            // Rebuild preview
            const preview = document.getElementById('subject-photos-preview');
            preview.innerHTML = '';
            subjectPhotos.forEach((photo, idx) => {
                const photoDiv = document.createElement('div');
                photoDiv.style.cssText = 'position: relative; border: 2px solid #4bff21; border-radius: 5px; overflow: hidden;';
                photoDiv.innerHTML = `
                    <img src="${photo.dataUri}" style="width: 100%; height: 150px; object-fit: cover;">
                    <button onclick="removePhoto(${idx})" style="position: absolute; top: 5px; right: 5px; background: red; color: white; border: none; border-radius: 3px; padding: 5px 8px; cursor: pointer; font-size: 12px;">❌</button>
                    <div style="padding: 5px; background: #0a0a0a; font-size: 0.75em; color: #888; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;">${photo.filename}</div>
                `;
                preview.appendChild(photoDiv);
            });
        }

        // Collect social media accounts data
        function collectSocialAccounts() {
            const accounts = [];
            const platforms = document.querySelectorAll('.social-platform');

            platforms.forEach(input => {
                const entryId = input.getAttribute('data-entry');
                const platform = input.value.trim();
                const username = document.querySelector(`.social-username[data-entry="${entryId}"]`).value.trim();
                const accountId = document.querySelector(`.social-account-id[data-entry="${entryId}"]`).value.trim();
                const displayName = document.querySelector(`.social-display-name[data-entry="${entryId}"]`).value.trim();

                if (platform || username || accountId) {
                    accounts.push({
                        platform: platform,
                        username: username,
                        accountId: accountId,
                        displayName: displayName
                    });
                }
            });

            return accounts;
        }

        // Investigation Social Accounts Management
        let investigationSocialAccountCounter = 1;

        // Add another investigation social media account entry
        function addInvestigationSocialAccount() {
            investigationSocialAccountCounter++;
            const container = document.getElementById('investigation-social-accounts-container');
            const newEntry = document.createElement('div');
            newEntry.className = 'social-account-entry';
            newEntry.id = `inv-social-entry-${investigationSocialAccountCounter}`;
            newEntry.innerHTML = `
                <hr style="border-color: #00f0ff; margin: 15px 0;">
                <div class="form-row">
                    <div class="form-group">
                        <label>Platform:</label>
                        <input type="text" class="inv-social-platform" placeholder="Facebook, Instagram, Twitter..." data-entry="${investigationSocialAccountCounter}">
                    </div>
                    <div class="form-group">
                        <label>Username/Handle:</label>
                        <input type="text" class="inv-social-username" placeholder="@username" data-entry="${investigationSocialAccountCounter}">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Account ID:</label>
                        <input type="text" class="inv-social-account-id" placeholder="Numeric ID or unique identifier" data-entry="${investigationSocialAccountCounter}">
                    </div>
                    <div class="form-group">
                        <label>Profile URL:</label>
                        <input type="text" class="inv-social-url" placeholder="https://..." data-entry="${investigationSocialAccountCounter}">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Display Name:</label>
                        <input type="text" class="inv-social-display-name" placeholder="Name shown on profile" data-entry="${investigationSocialAccountCounter}">
                    </div>
                </div>
                <button class="btn" style="background-color: #ff0000; margin-top: 5px;" onclick="removeInvestigationSocialAccount(${investigationSocialAccountCounter})">❌ Remove This Account</button>
            `;
            container.appendChild(newEntry);
        }

        // Remove investigation social media account entry
        function removeInvestigationSocialAccount(entryId) {
            const entry = document.getElementById(`inv-social-entry-${entryId}`);
            if (entry) {
                entry.remove();
            }
        }

        // Collect investigation social media accounts data
        function collectInvestigationSocialAccounts() {
            const accounts = [];
            const platforms = document.querySelectorAll('.inv-social-platform');

            platforms.forEach(input => {
                const entryId = input.getAttribute('data-entry');
                const platform = input.value.trim();
                const username = document.querySelector(`.inv-social-username[data-entry="${entryId}"]`)?.value.trim() || '';
                const accountId = document.querySelector(`.inv-social-account-id[data-entry="${entryId}"]`)?.value.trim() || '';
                const url = document.querySelector(`.inv-social-url[data-entry="${entryId}"]`)?.value.trim() || '';
                const displayName = document.querySelector(`.inv-social-display-name[data-entry="${entryId}"]`)?.value.trim() || '';

                if (platform || username || accountId || url) {
                    accounts.push({
                        platform: platform,
                        username: username,
                        accountId: accountId,
                        url: url,
                        displayName: displayName
                    });
                }
            });

            return accounts;
        }

        // Save subject as markdown file to device
        function saveSubject() {
            // Collect data from main User Input form
            const firstName = document.getElementById('first-name').value.trim();
            const lastName = document.getElementById('last-name').value.trim();
            const middleName = document.getElementById('middle-name').value.trim();
            const aliases = document.getElementById('aliases').value.trim();
            const dob = document.getElementById('dob').value.trim();
            const age = document.getElementById('age').value.trim();
            const email = document.getElementById('email').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const username = document.getElementById('username').value.trim();
            const accountId = document.getElementById('account-id').value.trim();
            const address = document.getElementById('address').value.trim();
            const city = document.getElementById('city').value.trim();
            const state = document.getElementById('state').value.trim();
            const country = document.getElementById('country').value.trim();
            const zip = document.getElementById('zip').value.trim();
            const occupation = document.getElementById('occupation').value.trim();
            const employer = document.getElementById('employer').value.trim();
            const school = document.getElementById('school').value.trim();
            const interests = document.getElementById('interests').value.trim();

            // Property data
            const propertyAddress = document.getElementById('property-address')?.value.trim();
            const propertyType = document.getElementById('property-type')?.value.trim();
            const propertyOwner = document.getElementById('property-owner')?.value.trim();
            const businessName = document.getElementById('business-name')?.value.trim();

            // Vehicle data
            const vehicleVin = document.getElementById('vehicle-vin')?.value.trim();
            const licensePlate = document.getElementById('license-plate')?.value.trim();
            const vehicleMake = document.getElementById('vehicle-make')?.value.trim();
            const vehicleModel = document.getElementById('vehicle-model')?.value.trim();
            const vehicleYear = document.getElementById('vehicle-year')?.value.trim();
            const vehicleColor = document.getElementById('vehicle-color')?.value.trim();

            // Misc Property
            const serialNumber = document.getElementById('serial-number')?.value.trim();
            const miscMake = document.getElementById('misc-make')?.value.trim();
            const miscModel = document.getElementById('misc-model')?.value.trim();
            const propertyDescription = document.getElementById('property-description')?.value.trim();

            // Additional info
            const associates = document.getElementById('associates')?.value.trim();
            const ipAddress = document.getElementById('ip-address')?.value.trim();
            const domain = document.getElementById('domain')?.value.trim();
            const keywords = document.getElementById('keywords')?.value.trim();

            // Subject Profile data - pull from top investigation notes
            const category = document.getElementById('case-name').value.trim();
            const notes = document.getElementById('investigation-notes')?.value.trim();

            // Validation
            const fullName = [firstName, middleName, lastName].filter(x => x).join(' ');
            if (!fullName && !aliases && !username) {
                alert('⚠️ Please enter at least a name, alias, or username.');
                return;
            }

            // Collect Investigation Social Accounts from main User Input
            const investigationSocialAccounts = collectInvestigationSocialAccounts();

            // Build text content
            let textContent = '========================================\n';
            textContent += 'DAISY TRACKER - SUBJECT PROFILE\n';
            textContent += '========================================\n\n';
            textContent += `Generated: ${new Date().toLocaleString()}\n\n`;

            // Basic Information
            textContent += '--- BASIC INFORMATION ---\n';
            if (fullName) textContent += `Name: ${fullName}\n`;
            if (aliases) textContent += `Aliases/Nicknames: ${aliases}\n`;
            if (dob) textContent += `Date of Birth: ${dob}\n`;
            if (age) textContent += `Age: ${age}\n`;
            textContent += '\n';

            // Contact & Location
            if (email || phone || username || accountId || address || city || state || country || zip) {
                textContent += '--- CONTACT & LOCATION ---\n';
                if (email) textContent += `Email: ${email}\n`;
                if (phone) textContent += `Phone: ${phone}\n`;
                if (username) textContent += `Username/Handle: ${username}\n`;
                if (accountId) textContent += `Account ID: ${accountId}\n`;
                if (address) textContent += `Address: ${address}\n`;
                if (city) textContent += `City: ${city}\n`;
                if (state) textContent += `State: ${state}\n`;
                if (country) textContent += `Country: ${country}\n`;
                if (zip) textContent += `ZIP: ${zip}\n`;
                textContent += '\n';
            }

            // Professional & Education
            if (occupation || employer || school || interests) {
                textContent += '--- PROFESSIONAL & EDUCATION ---\n';
                if (occupation) textContent += `Occupation: ${occupation}\n`;
                if (employer) textContent += `Employer: ${employer}\n`;
                if (school) textContent += `School: ${school}\n`;
                if (interests) textContent += `Interests: ${interests}\n`;
                textContent += '\n';
            }

            // Property
            if (propertyAddress || propertyType || propertyOwner || businessName) {
                textContent += '--- PROPERTY (RESIDENCE/BUSINESS) ---\n';
                if (propertyAddress) textContent += `Property Address: ${propertyAddress}\n`;
                if (propertyType) textContent += `Property Type: ${propertyType}\n`;
                if (propertyOwner) textContent += `Property Owner: ${propertyOwner}\n`;
                if (businessName) textContent += `Business Name: ${businessName}\n`;
                textContent += '\n';
            }

            // Vehicles
            if (vehicleVin || licensePlate || vehicleMake || vehicleModel || vehicleYear || vehicleColor) {
                textContent += '--- VEHICLES ---\n';
                if (vehicleVin) textContent += `Vehicle VIN: ${vehicleVin}\n`;
                if (licensePlate) textContent += `License Plate: ${licensePlate}\n`;
                if (vehicleMake) textContent += `Vehicle Make: ${vehicleMake}\n`;
                if (vehicleModel) textContent += `Vehicle Model: ${vehicleModel}\n`;
                if (vehicleYear) textContent += `Vehicle Year: ${vehicleYear}\n`;
                if (vehicleColor) textContent += `Vehicle Color: ${vehicleColor}\n`;
                textContent += '\n';
            }

            // Misc Property
            if (serialNumber || miscMake || miscModel || propertyDescription) {
                textContent += '--- MISC PROPERTY ---\n';
                if (serialNumber) textContent += `Serial Number: ${serialNumber}\n`;
                if (miscMake) textContent += `Make: ${miscMake}\n`;
                if (miscModel) textContent += `Model: ${miscModel}\n`;
                if (propertyDescription) textContent += `Description: ${propertyDescription}\n`;
                textContent += '\n';
            }

            // Additional Information
            if (associates || ipAddress || domain || keywords) {
                textContent += '--- ADDITIONAL INFORMATION ---\n';
                if (associates) textContent += `Known Associates: ${associates}\n`;
                if (ipAddress) textContent += `IP Address: ${ipAddress}\n`;
                if (domain) textContent += `Domain/Website: ${domain}\n`;
                if (keywords) textContent += `Keywords: ${keywords}\n`;
                textContent += '\n';
            }

            // Case Name & Investigation Notes
            if (category || notes) {
                textContent += '--- INVESTIGATION DETAILS ---\n';
                if (category) textContent += `Case/Subject Name: ${category}\n`;
                if (notes) textContent += `\nInvestigation Notes:\n${notes}\n`;
                textContent += '\n';
            }

            // Investigation Social Accounts (from User Input section)
            if (investigationSocialAccounts.length > 0) {
                textContent += '--- SOCIAL MEDIA ACCOUNTS ---\n';
                investigationSocialAccounts.forEach((account, index) => {
                    textContent += `\nAccount ${index + 1}:\n`;
                    if (account.platform) textContent += `  Platform: ${account.platform}\n`;
                    if (account.username) textContent += `  Username: ${account.username}\n`;
                    if (account.accountId) textContent += `  Account ID: ${account.accountId}\n`;
                    if (account.url) textContent += `  URL: ${account.url}\n`;
                    if (account.displayName) textContent += `  Display Name: ${account.displayName}\n`;
                });
                textContent += '\n';
            }

            // Footer
            textContent += '========================================\n';
            textContent += 'Generated by Daisy Tracker\n';
            textContent += 'Daisy Chain Digital Footprints With Dorking\n';
            textContent += '========================================\n';

            // Create filename - use only first+last name OR username
            let filenamePart = 'Subject';
            if (firstName && lastName) {
                filenamePart = `${firstName}_${lastName}`;
            } else if (username) {
                filenamePart = username;
            }
            const sanitizedFilename = filenamePart.replace(/[^a-zA-Z0-9_]/g, '_');
            const timestamp = new Date().toISOString().replace(/[:.]/g, '-').split('T')[0];
            const filename = `${sanitizedFilename}_${timestamp}.txt`;

            // Save to device
            saveTextToDevice(textContent, filename);
        }

        // Save text file to device
        function saveTextToDevice(textContent, filename) {
            try {
                // Create blob with text content
                const blob = new Blob([textContent], { type: 'text/plain;charset=utf-8' });
                const url = URL.createObjectURL(blob);

                // Create temporary link element
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                a.style.display = 'none';

                // Trigger download
                document.body.appendChild(a);
                a.click();

                // Cleanup
                setTimeout(() => {
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                }, 100);

                alert(`✅ Subject Profile saved as ${filename}\n\nCheck your Downloads folder!`);
            } catch (error) {
                console.error('Save error:', error);
                alert(`⚠️ Error saving file: ${error.message}\n\nTry again or check browser permissions.`);
            }
        }

        // Handle storage location change
        function handleStorageLocationChange() {
            const storageSelection = document.getElementById('storage-location').value;

            if (storageSelection === 'custom') {
                // Open folder picker
                chooseCustomFolder();
            }
        }

        // Choose custom folder (works with or without Cordova)
        function chooseCustomFolder() {
            const folderPath = prompt('📂 Enter the full path to your custom folder:\n\nExample: /storage/emulated/0/MyFolder/\n\nNote: Path must end with /\n\n⚠️ Path will be saved as a preference. When used in Cordova app, files will save to this location. In browser mode, files will download normally.');

            if (folderPath && folderPath.trim()) {
                const trimmedPath = folderPath.trim();

                // Save the path (will be used when Cordova is available)
                localStorage.setItem('daisy_custom_storage_path', trimmedPath);

                const displayDiv = document.getElementById('custom-path-display');
                displayDiv.textContent = `📂 Custom Path: ${trimmedPath}`;
                displayDiv.style.display = 'block';

                if (typeof cordova !== 'undefined' && cordova.file) {
                    // If Cordova is available, verify the path exists
                    window.resolveLocalFileSystemURL(trimmedPath, function(dirEntry) {
                        alert(`✅ Custom folder verified and set!\n\n${trimmedPath}`);
                    }, function(error) {
                        alert(`⚠️ Path saved, but could not verify folder existence.\n\nError code: ${error.code}\n\nFiles will attempt to save here when you use the Cordova app.`);
                    });
                } else {
                    // Browser mode - just save the preference
                    alert(`✅ Custom path saved as preference!\n\n${trimmedPath}\n\n📱 In browser mode, files will download normally.\n🔧 In Cordova app, files will save to this location.`);
                }
            } else {
                // User cancelled, revert to downloads
                document.getElementById('storage-location').value = 'downloads';
            }
        }

        // Set default storage location
        function setDefaultStorageLocation() {
            const storageSelection = document.getElementById('storage-location').value;

            if (storageSelection === 'custom') {
                const customPath = localStorage.getItem('daisy_custom_storage_path');
                if (!customPath) {
                    alert('⚠️ Please choose a custom folder first before setting it as default.');
                    return;
                }
            }

            localStorage.setItem('daisy_default_storage', storageSelection);

            const info = document.getElementById('storage-location-info');
            info.textContent = `⭐ Default storage set to: ${document.getElementById('storage-location').selectedOptions[0].text}`;
            info.style.color = '#f8e602';

            setTimeout(() => {
                info.textContent = 'Select where to save your files and folders';
                info.style.color = '#888';
            }, 3000);

            alert('⭐ Default storage location saved!');
        }

        // Clear default storage location
        function clearDefaultStorageLocation() {
            localStorage.removeItem('daisy_default_storage');

            const info = document.getElementById('storage-location-info');
            info.textContent = '✅ Default storage cleared!';
            info.style.color = '#4bff21';

            setTimeout(() => {
                info.textContent = 'Select where to save your files and folders';
                info.style.color = '#888';
            }, 3000);

            alert('✅ Default storage location cleared!');
        }

        // Load default storage location on page load
        function loadDefaultStorageLocation() {
            const defaultStorage = localStorage.getItem('daisy_default_storage');

            if (defaultStorage) {
                document.getElementById('storage-location').value = defaultStorage;

                // If custom, load and display the custom path
                if (defaultStorage === 'custom') {
                    const customPath = localStorage.getItem('daisy_custom_storage_path');
                    if (customPath) {
                        const displayDiv = document.getElementById('custom-path-display');
                        displayDiv.textContent = `📂 Custom Path: ${customPath}`;
                        displayDiv.style.display = 'block';
                    }
                }
            }
        }

        // ==========================================
        // UNIVERSAL FILE SYSTEM ACCESS
        // Works on: Windows, Mac, Linux, Android, iOS
        // ==========================================

        // Store the user's chosen directory handle (File System Access API)
        let userDirectoryHandle = null;

        // Check if File System Access API is available (Chrome, Edge, modern browsers)
        function isFileSystemAccessSupported() {
            return 'showDirectoryPicker' in window;
        }

        // Let user pick a save directory with native OS dialog (UNIVERSAL - works on ALL platforms!)
        async function pickSaveDirectory() {
            try {
                if (isFileSystemAccessSupported()) {
                    // Show native directory picker dialog (adapts to Windows/Mac/Linux/Android/iOS automatically)
                    const pickerOptions = {
                        mode: 'readwrite'
                    };

                    // Try to suggest a starting location (works on supported platforms, ignored on others)
                    try {
                        pickerOptions.startIn = 'documents';
                    } catch (e) {
                        // Platform doesn't support startIn - that's fine, picker will use default location
                    }

                    userDirectoryHandle = await window.showDirectoryPicker(pickerOptions);

                    // Create Daisy folder inside the chosen directory
                    const daisyFolder = await userDirectoryHandle.getDirectoryHandle('Daisy', { create: true });
                    userDirectoryHandle = daisyFolder;

                    // Save to localStorage for persistence
                    localStorage.setItem('daisy_directory_chosen', 'true');

                    alert(`✅ Save location set!\n\nFolder: ${userDirectoryHandle.name}\n\nAll files will be saved here across all sessions.`);

                    // Update UI
                    updateSaveLocationDisplay();
                    return true;
                } else {
                    // Browser doesn't support File System Access API - use fallback
                    alert('⚠️ Directory picker not available on this browser.\n\nDon\'t worry! Files will automatically download to your Downloads folder instead.\n\nThis works on all devices - phone, tablet, or computer.');
                    return false;
                }
            } catch (error) {
                if (error.name !== 'AbortError') {
                    console.error('Error picking directory:', error);
                    alert('❌ Could not access directory: ' + error.message);
                }
                return false;
            }
        }

        // Check and display browser compatibility (UNIVERSAL - no browser detection needed!)
        function checkBrowserCompatibility() {
            const statusElement = document.getElementById('browser-status');
            if (!statusElement) return;

            // Detect platform (mobile vs desktop) without checking specific browsers
            const isMobile = /Android|iPhone|iPad|iPod|Mobile/i.test(navigator.userAgent);
            const platform = isMobile ? '📱 Mobile' : '💻 Desktop';

            // Check capabilities (works for ANY browser - current or future!)
            if (isFileSystemAccessSupported()) {
                // File System Access API is available (works in ANY browser that supports it)
                statusElement.innerHTML = `✅ <strong style="color: #4bff21;">FULL SUPPORT!</strong> (${platform})<br>Native file picker available - works on this browser!`;
                statusElement.style.color = '#4bff21';
            } else if (typeof cordova !== 'undefined') {
                // Cordova mobile app detected
                statusElement.innerHTML = `✅ <strong style="color: #f8e602;">MOBILE APP MODE</strong> (${platform})<br>Files will save to app directory automatically`;
                statusElement.style.color = '#f8e602';
            } else {
                // Fallback mode (still works, just downloads files)
                statusElement.innerHTML = `⚠️ <strong style="color: #ff9500;">DOWNLOAD MODE</strong> (${platform})<br>Files will download to your Downloads folder - still works!`;
                statusElement.style.color = '#ff9500';
            }
        }

        // Update the UI to show current save location
        function updateSaveLocationDisplay() {
            const displayElement = document.getElementById('current-save-location');
            if (displayElement) {
                if (userDirectoryHandle) {
                    displayElement.textContent = `📂 Saving to: Daisy folder (user-selected location)`;
                    displayElement.style.color = '#4bff21';
                } else if (typeof cordova !== 'undefined') {
                    displayElement.textContent = `📂 Saving to: Daisy folder (app directory)`;
                    displayElement.style.color = '#f8e602';
                } else {
                    displayElement.textContent = `📂 No save location selected - files will download`;
                    displayElement.style.color = '#888';
                }
            }

            // Also update browser compatibility status
            checkBrowserCompatibility();
        }

        // Universal save function - works on ALL platforms
        async function saveFileUniversal(content, filename, subfolder = '') {
            // METHOD 1: File System Access API (Windows, Mac, Linux, Android Chrome, etc.)
            if (userDirectoryHandle) {
                try {
                    // Navigate to subfolder if specified (e.g., 'Downloads', 'Documents')
                    let targetFolder = userDirectoryHandle;
                    if (subfolder) {
                        targetFolder = await userDirectoryHandle.getDirectoryHandle(subfolder, { create: true });
                    }

                    // Create the file
                    const fileHandle = await targetFolder.getFileHandle(filename, { create: true });
                    const writable = await fileHandle.createWritable();
                    await writable.write(content);
                    await writable.close();

                    alert(`✅ File saved successfully!\n\n📁 ${subfolder ? subfolder + '/' : ''}${filename}`);
                    return true;
                } catch (error) {
                    console.error('File System Access API error:', error);
                    alert(`⚠️ Could not save to selected folder.\n\nTrying fallback method...\n\nError: ${error.message}`);
                    // Fall through to next method
                }
            }

            // METHOD 2: Cordova File API (Mobile apps)
            if (typeof cordova !== 'undefined' && cordova.file) {
                return saveToCordova(content, filename, subfolder);
            }

            // METHOD 3: Traditional browser download (fallback for all platforms)
            return saveToBrowserDownload(content, filename);
        }

        // Cordova save method
        function saveToCordova(content, filename, subfolder) {
            const basePath = getBaseDaisyPath();
            const targetPath = basePath + (subfolder ? subfolder + '/' : '');

            window.resolveLocalFileSystemURL(targetPath, function(dirEntry) {
                dirEntry.getFile(filename, { create: true, exclusive: false }, function(fileEntry) {
                    fileEntry.createWriter(function(fileWriter) {
                        fileWriter.onwriteend = function() {
                            alert(`✅ File saved!\n\n📍 ${fileEntry.nativeURL}`);
                        };
                        fileWriter.onerror = function(e) {
                            alert(`❌ Error: ${e.toString()}`);
                        };
                        const blob = new Blob([content], { type: 'text/markdown' });
                        fileWriter.write(blob);
                    });
                });
            }, function(error) {
                alert(`❌ Storage error: ${error.code}`);
            });
            return true;
        }

        // Browser download fallback
        function saveToBrowserDownload(content, filename) {
            const blob = new Blob([content], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            alert(`📥 File downloaded!\n\n${filename}\n\n(Check your Downloads folder)`);
            return true;
        }

        // Get the base directory where the HTML file is located (Cordova - works on ANY mobile platform)
        function getBaseDaisyPath() {
            if (typeof cordova !== 'undefined' && cordova.file) {
                // Automatically adapts to iOS, Android, or any other Cordova-supported platform
                // Priority:
                // 1. External data directory (user-accessible on Android, iOS app documents)
                // 2. Data directory (app-private storage as fallback)
                const basePath = cordova.file.externalDataDirectory || cordova.file.dataDirectory;

                // Create Daisy folder inside the base path
                // Path separator is handled automatically by Cordova for each platform
                return basePath + 'Daisy/';
            }
            return null;
        }

        // Save markdown file to device storage (UNIVERSAL - all platforms)
        async function saveMarkdownToDevice(markdownContent, filename) {
            const storageSelection = document.getElementById('storage-location').value;

            // Determine subfolder based on user selection
            let subfolder = '';
            switch(storageSelection) {
                case 'downloads':
                    subfolder = 'Downloads';
                    break;
                case 'documents':
                    subfolder = 'Documents';
                    break;
                case 'daisystracker':
                    subfolder = '';
                    break;
                case 'custom':
                    // For custom, check if user has picked a directory
                    if (!userDirectoryHandle && isFileSystemAccessSupported()) {
                        const picked = await pickSaveDirectory();
                        if (!picked) {
                            // User cancelled or browser doesn't support - use download fallback
                            saveToBrowserDownload(markdownContent, filename);
                            return;
                        }
                    }
                    break;
            }

            // Use universal save function (works on ALL platforms)
            const success = await saveFileUniversal(markdownContent, filename, subfolder);

            if (success) {
                // Clear the subject profile fields after successful save
                const categoryField = document.getElementById('subject-category');
                if (categoryField) {
                    categoryField.value = '';
                    document.getElementById('subject-gang').value = '';
                    document.getElementById('subject-priors').value = '';
                    document.getElementById('subject-mo').value = '';

                    // Hide the subject profile section again
                    document.getElementById('subject-profile-fields').style.display = 'none';
                    document.getElementById('save-inputs-btn').style.display = 'block';
                }
            }
        }

        // Browser download fallback
        function useBrowserDownload(markdownContent, filename) {
                const blob = new Blob([markdownContent], { type: 'text/markdown' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                alert(`✅ Subject Profile downloaded!\n\nFilename: ${filename}\n\n(Browser download - in the mobile app this will save to your selected device location)`);

                // Clear the subject profile fields after successful save
                document.getElementById('subject-category').value = '';
                document.getElementById('subject-gang').value = '';
                document.getElementById('subject-priors').value = '';
                document.getElementById('subject-mo').value = '';

                // Hide the subject profile section again
                document.getElementById('subject-profile-fields').style.display = 'none';
                document.getElementById('save-inputs-btn').style.display = 'block';
        }

        // Clear subject profile fields - no longer needed since using top fields
        function clearSubjectFields() {
            if (!confirm('🗑️ This button is deprecated. Use the main form fields at the top instead.')) return;
            alert('ℹ️ The Case Name and Investigation Notes are now at the top of the User Input tab.');
        }

        // Clear subject form (OLD - for backward compatibility)
        function clearSubjectForm() {
            document.getElementById('subject-category').value = '';
            const subjectName = document.getElementById('subject-name');
            if (subjectName) subjectName.value = '';
            const subjectNickname = document.getElementById('subject-nickname');
            if (subjectNickname) subjectNickname.value = '';
            const subjectDob = document.getElementById('subject-dob');
            if (subjectDob) subjectDob.value = '';
            const subjectScope = document.getElementById('subject-scope');
            if (subjectScope) subjectScope.value = '';
            const subjectDlid = document.getElementById('subject-dlid');
            if (subjectDlid) subjectDlid.value = '';
            const subjectSsn = document.getElementById('subject-ssn');
            if (subjectSsn) subjectSsn.value = '';
            const subjectPhone = document.getElementById('subject-phone');
            if (subjectPhone) subjectPhone.value = '';
            const subjectEmail = document.getElementById('subject-email');
            if (subjectEmail) subjectEmail.value = '';
            const subjectAddress = document.getElementById('subject-address');
            if (subjectAddress) subjectAddress.value = '';
            document.getElementById('subject-gang').value = '';
            document.getElementById('subject-priors').value = '';
            document.getElementById('subject-mo').value = '';
            const subjectNotes = document.getElementById('subject-notes');
            if (subjectNotes) subjectNotes.value = '';
            const subjectInvestigation = document.getElementById('subject-investigation');
            if (subjectInvestigation) subjectInvestigation.value = '';

            // Clear social accounts (keep only first one)
            const container = document.getElementById('social-accounts-container');
            container.innerHTML = `
                <div class="social-account-entry" id="social-entry-1">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Platform:</label>
                            <input type="text" class="social-platform" placeholder="e.g., Facebook, Instagram, TikTok" data-entry="1">
                        </div>
                        <div class="form-group">
                            <label>Username/Handle:</label>
                            <input type="text" class="social-username" placeholder="@username" data-entry="1">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Account ID/URL:</label>
                            <input type="text" class="social-account-id" placeholder="Profile URL or account ID" data-entry="1">
                        </div>
                        <div class="form-group">
                            <label>Display Name:</label>
                            <input type="text" class="social-display-name" placeholder="Name shown on profile" data-entry="1">
                        </div>
                    </div>
                </div>
            `;
            socialAccountCounter = 1;

            // Clear photos
            subjectPhotos = [];
            document.getElementById('subject-photos-preview').innerHTML = '';
            document.getElementById('subject-photo-input').value = '';

            currentEditingSubjectId = null;
        }

        // View subjects list
        function viewSubjectsList() {
            const subjects = JSON.parse(localStorage.getItem('daisys_subjects') || '[]');
            const listContainer = document.getElementById('subjects-list-container');
            const listSection = document.getElementById('subjects-list');

            if (subjects.length === 0) {
                listContainer.innerHTML = '<p style="color: #888;">No subjects saved yet. Add your first subject above!</p>';
                listSection.style.display = 'block';
                return;
            }

            displaySubjects(subjects);
            listSection.style.display = 'block';

            // Scroll to list
            listSection.scrollIntoView({ behavior: 'smooth' });
        }

        // Display subjects
        function displaySubjects(subjects) {
            const listContainer = document.getElementById('subjects-list-container');

            if (subjects.length === 0) {
                listContainer.innerHTML = '<p style="color: #888;">No subjects found matching your search.</p>';
                return;
            }

            let html = '';
            subjects.forEach((subject, index) => {
                const displayName = subject.name || subject.nickname || 'Unknown';
                const categoryBadge = subject.category ? `<span style="background: #f8e602; color: #000; padding: 2px 8px; border-radius: 3px; font-size: 0.85em; font-weight: bold;">${subject.category}</span>` : '';
                const gangBadge = subject.gang ? `<span style="background: #ff0000; color: #fff; padding: 2px 8px; border-radius: 3px; font-size: 0.85em; margin-left: 5px;">🚩 Gang: ${subject.gang}</span>` : '';

                const photoCount = subject.photos ? subject.photos.length : 0;
                const socialCount = subject.socialAccounts ? subject.socialAccounts.length : 0;

                html += `
                    <div style="background: #1a1a1a; border: 2px solid #4bff21; border-radius: 5px; padding: 15px; margin-bottom: 15px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <div>
                                <h4 style="color: #00f0ff; margin: 0;">${displayName}</h4>
                                ${categoryBadge} ${gangBadge}
                            </div>
                            <div>
                                <button class="btn" onclick="exportSubjectAsMarkdown('${subject.id}')" style="background: #f8e602; color: #000; margin-right: 5px;">📄 Export</button>
                                <button class="btn" onclick="editSubject('${subject.id}')" style="background: #00f0ff; margin-right: 5px;">✏️ Edit</button>
                                <button class="btn" onclick="deleteSubject('${subject.id}')" style="background: #ff0000;">🗑️ Delete</button>
                            </div>
                        </div>

                        <div style="color: #888; font-size: 0.9em; margin-top: 10px;">
                            ${subject.nickname ? `<div><strong>Nickname:</strong> ${subject.nickname}</div>` : ''}
                            ${subject.dob ? `<div><strong>DOB:</strong> ${subject.dob}</div>` : ''}
                            ${subject.phone ? `<div><strong>Phone:</strong> ${subject.phone}</div>` : ''}
                            ${subject.email ? `<div><strong>Email:</strong> ${subject.email}</div>` : ''}
                            ${subject.address ? `<div><strong>Address:</strong> ${subject.address}</div>` : ''}
                            ${subject.priors ? `<div style="color: #ffcc99;"><strong>Priors:</strong> ${subject.priors.substring(0, 100)}${subject.priors.length > 100 ? '...' : ''}</div>` : ''}
                            <div style="margin-top: 10px;">
                                <span style="background: #0a0a0a; padding: 5px 10px; border-radius: 3px; margin-right: 10px;">📱 ${socialCount} Social Accounts</span>
                                <span style="background: #0a0a0a; padding: 5px 10px; border-radius: 3px;">📸 ${photoCount} Photos</span>
                            </div>
                            ${subject.createdAt ? `<div style="margin-top: 5px; font-size: 0.8em;">Added: ${new Date(subject.createdAt).toLocaleString()}</div>` : ''}
                        </div>

                        <button class="btn" onclick="viewSubjectDetails('${subject.id}')" style="margin-top: 10px; background: #772289;">👁️ View Full Details</button>
                    </div>
                `;
            });

            listContainer.innerHTML = html;
        }

        // Search subjects
        function searchSubjects() {
            const searchTerm = document.getElementById('subjects-search').value.toLowerCase();
            const subjects = JSON.parse(localStorage.getItem('daisys_subjects') || '[]');

            const filtered = subjects.filter(subject => {
                return (
                    (subject.name && subject.name.toLowerCase().includes(searchTerm)) ||
                    (subject.nickname && subject.nickname.toLowerCase().includes(searchTerm)) ||
                    (subject.category && subject.category.toLowerCase().includes(searchTerm)) ||
                    (subject.gang && subject.gang.toLowerCase().includes(searchTerm)) ||
                    (subject.phone && subject.phone.includes(searchTerm)) ||
                    (subject.email && subject.email.toLowerCase().includes(searchTerm)) ||
                    (subject.address && subject.address.toLowerCase().includes(searchTerm)) ||
                    (subject.priors && subject.priors.toLowerCase().includes(searchTerm)) ||
                    (subject.notes && subject.notes.toLowerCase().includes(searchTerm))
                );
            });

            displaySubjects(filtered);
        }

        // Filter subjects by category
        function filterSubjectsByCategory() {
            const category = document.getElementById('subjects-category-filter').value;
            const subjects = JSON.parse(localStorage.getItem('daisys_subjects') || '[]');

            if (!category) {
                displaySubjects(subjects);
                return;
            }

            const filtered = subjects.filter(subject => subject.category === category);
            displaySubjects(filtered);
        }

        // Update category filter dropdown
        function updateCategoryFilter() {
            const subjects = JSON.parse(localStorage.getItem('daisys_subjects') || '[]');
            const categories = [...new Set(subjects.map(s => s.category).filter(c => c))];

            const select = document.getElementById('subjects-category-filter');
            select.innerHTML = '<option value="">All Categories</option>';

            categories.sort().forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category;
                select.appendChild(option);
            });
        }

        // Edit subject
        function editSubject(subjectId) {
            const subjects = JSON.parse(localStorage.getItem('daisys_subjects') || '[]');
            const subject = subjects.find(s => s.id === subjectId);

            if (!subject) {
                alert('Subject not found!');
                return;
            }

            // Populate form
            document.getElementById('subject-category').value = subject.category || '';
            document.getElementById('subject-name').value = subject.name || '';
            document.getElementById('subject-nickname').value = subject.nickname || '';
            document.getElementById('subject-dob').value = subject.dob || '';
            document.getElementById('subject-scope').value = subject.scope || '';
            document.getElementById('subject-dlid').value = subject.dlid || '';
            document.getElementById('subject-ssn').value = subject.ssn || '';
            document.getElementById('subject-phone').value = subject.phone || '';
            document.getElementById('subject-email').value = subject.email || '';
            document.getElementById('subject-address').value = subject.address || '';
            document.getElementById('subject-gang').value = subject.gang || '';
            document.getElementById('subject-priors').value = subject.priors || '';
            document.getElementById('subject-mo').value = subject.mo || '';
            document.getElementById('subject-notes').value = subject.notes || '';
            document.getElementById('subject-investigation').value = subject.investigationLink || '';

            // Populate social accounts
            const container = document.getElementById('social-accounts-container');
            container.innerHTML = '';
            socialAccountCounter = 0;

            if (subject.socialAccounts && subject.socialAccounts.length > 0) {
                subject.socialAccounts.forEach((account, index) => {
                    socialAccountCounter++;
                    const entryDiv = document.createElement('div');
                    entryDiv.className = 'social-account-entry';
                    entryDiv.id = `social-entry-${socialAccountCounter}`;
                    entryDiv.innerHTML = `
                        ${index > 0 ? '<hr style="border-color: #4bff21; margin: 15px 0;">' : ''}
                        <div class="form-row">
                            <div class="form-group">
                                <label>Platform:</label>
                                <input type="text" class="social-platform" placeholder="e.g., Facebook, Instagram, TikTok" data-entry="${socialAccountCounter}" value="${account.platform || ''}">
                            </div>
                            <div class="form-group">
                                <label>Username/Handle:</label>
                                <input type="text" class="social-username" placeholder="@username" data-entry="${socialAccountCounter}" value="${account.username || ''}">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Account ID/URL:</label>
                                <input type="text" class="social-account-id" placeholder="Profile URL or account ID" data-entry="${socialAccountCounter}" value="${account.accountId || ''}">
                            </div>
                            <div class="form-group">
                                <label>Display Name:</label>
                                <input type="text" class="social-display-name" placeholder="Name shown on profile" data-entry="${socialAccountCounter}" value="${account.displayName || ''}">
                            </div>
                        </div>
                        ${index > 0 ? `<button class="btn" style="background-color: #ff0000; margin-top: 5px;" onclick="removeSocialAccount(${socialAccountCounter})">❌ Remove This Account</button>` : ''}
                    `;
                    container.appendChild(entryDiv);
                });
            } else {
                // Add default empty entry
                socialAccountCounter = 1;
                container.innerHTML = `
                    <div class="social-account-entry" id="social-entry-1">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Platform:</label>
                                <input type="text" class="social-platform" placeholder="e.g., Facebook, Instagram, TikTok" data-entry="1">
                            </div>
                            <div class="form-group">
                                <label>Username/Handle:</label>
                                <input type="text" class="social-username" placeholder="@username" data-entry="1">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Account ID/URL:</label>
                                <input type="text" class="social-account-id" placeholder="Profile URL or account ID" data-entry="1">
                            </div>
                            <div class="form-group">
                                <label>Display Name:</label>
                                <input type="text" class="social-display-name" placeholder="Name shown on profile" data-entry="1">
                            </div>
                        </div>
                    </div>
                `;
            }

            // Populate photos
            subjectPhotos = subject.photos || [];
            const preview = document.getElementById('subject-photos-preview');
            preview.innerHTML = '';
            subjectPhotos.forEach((photo, idx) => {
                const photoDiv = document.createElement('div');
                photoDiv.style.cssText = 'position: relative; border: 2px solid #4bff21; border-radius: 5px; overflow: hidden;';
                photoDiv.innerHTML = `
                    <img src="${photo.dataUri}" style="width: 100%; height: 150px; object-fit: cover;">
                    <button onclick="removePhoto(${idx})" style="position: absolute; top: 5px; right: 5px; background: red; color: white; border: none; border-radius: 3px; padding: 5px 8px; cursor: pointer; font-size: 12px;">❌</button>
                    <div style="padding: 5px; background: #0a0a0a; font-size: 0.75em; color: #888; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;">${photo.filename}</div>
                `;
                preview.appendChild(photoDiv);
            });

            currentEditingSubjectId = subjectId;

            // Scroll to top of subjects tab
            showTab('subjects');
            window.scrollTo(0, 0);

            alert(`📝 Now editing: ${subject.name || subject.nickname}`);
        }

        // Delete subject
        function deleteSubject(subjectId) {
            const subjects = JSON.parse(localStorage.getItem('daisys_subjects') || '[]');
            const subject = subjects.find(s => s.id === subjectId);

            if (!subject) {
                alert('Subject not found!');
                return;
            }

            const confirmDelete = confirm(`⚠️ Are you sure you want to delete "${subject.name || subject.nickname}"?\n\nThis action cannot be undone.`);

            if (confirmDelete) {
                const filtered = subjects.filter(s => s.id !== subjectId);
                localStorage.setItem('daisys_subjects', JSON.stringify(filtered));
                alert('✅ Subject deleted successfully.');
                viewSubjectsList();
                updateCategoryFilter();
            }
        }

        // View full subject details
        function viewSubjectDetails(subjectId) {
            const subjects = JSON.parse(localStorage.getItem('daisys_subjects') || '[]');
            const subject = subjects.find(s => s.id === subjectId);

            if (!subject) {
                alert('Subject not found!');
                return;
            }

            let details = `═══════════════════════════════════════\n`;
            details += `👤 SUBJECT DETAILS\n`;
            details += `═══════════════════════════════════════\n\n`;

            if (subject.category) details += `📂 CATEGORY: ${subject.category}\n\n`;

            details += `👤 PERSONAL INFORMATION:\n`;
            details += `─────────────────────────\n`;
            if (subject.name) details += `Name: ${subject.name}\n`;
            if (subject.nickname) details += `Nickname/AKA: ${subject.nickname}\n`;
            if (subject.dob) details += `DOB: ${subject.dob}\n`;
            if (subject.scope) details += `SCOPE: ${subject.scope}\n`;
            if (subject.dlid) details += `DL/ID: ${subject.dlid}\n`;
            if (subject.ssn) details += `SSN: ${subject.ssn}\n`;
            if (subject.phone) details += `Phone: ${subject.phone}\n`;
            if (subject.email) details += `Email: ${subject.email}\n`;
            if (subject.address) details += `Address: ${subject.address}\n`;

            if (subject.socialAccounts && subject.socialAccounts.length > 0) {
                details += `\n📱 SOCIAL MEDIA ACCOUNTS:\n`;
                details += `─────────────────────────\n`;
                subject.socialAccounts.forEach((account, index) => {
                    details += `\n[${index + 1}] ${account.platform || 'Unknown Platform'}\n`;
                    if (account.username) details += `  Username: ${account.username}\n`;
                    if (account.accountId) details += `  Account ID/URL: ${account.accountId}\n`;
                    if (account.displayName) details += `  Display Name: ${account.displayName}\n`;
                });
            }

            if (subject.gang) {
                details += `\n🚩 GANG AFFILIATION:\n`;
                details += `─────────────────────────\n`;
                details += `${subject.gang}\n`;
            }

            if (subject.priors) {
                details += `\n⚠️ PRIORS / CRIMINAL HISTORY:\n`;
                details += `─────────────────────────\n`;
                details += `${subject.priors}\n`;
            }

            if (subject.mo) {
                details += `\n🎯 MODUS OPERANDI:\n`;
                details += `─────────────────────────\n`;
                details += `${subject.mo}\n`;
            }

            if (subject.notes) {
                details += `\n📝 INVESTIGATION NOTES:\n`;
                details += `─────────────────────────\n`;
                details += `${subject.notes}\n`;
            }

            if (subject.photos && subject.photos.length > 0) {
                details += `\n📸 ATTACHED PHOTOS: ${subject.photos.length}\n`;
            }

            if (subject.createdAt) {
                details += `\n⏰ Created: ${new Date(subject.createdAt).toLocaleString()}\n`;
            }
            if (subject.updatedAt) {
                details += `Updated: ${new Date(subject.updatedAt).toLocaleString()}\n`;
            }

            details += `\n═══════════════════════════════════════`;

            alert(details);
        }

        // Hide subjects list
        function hideSubjectsList() {
            document.getElementById('subjects-list').style.display = 'none';
        }

        // Export subject as markdown
        function exportSubjectAsMarkdown(subjectId) {
            const subjects = JSON.parse(localStorage.getItem('daisys_subjects') || '[]');
            const subject = subjects.find(s => s.id === subjectId);

            if (!subject) {
                alert('Subject not found!');
                return;
            }

            // Build markdown content
            let markdown = `# ${subject.name || subject.nickname || 'Unknown Subject'}\n\n`;

            if (subject.category) {
                markdown += `**Category:** ${subject.category}\n\n`;
            }

            markdown += `## Personal Information\n\n`;
            if (subject.name) markdown += `- **Full Name:** ${subject.name}\n`;
            if (subject.nickname) markdown += `- **Nickname/AKA:** ${subject.nickname}\n`;
            if (subject.dob) markdown += `- **Date of Birth:** ${subject.dob}\n`;
            if (subject.scope) markdown += `- **SCOPE ID:** ${subject.scope}\n`;
            if (subject.dlid) markdown += `- **DL/ID Number:** ${subject.dlid}\n`;
            if (subject.ssn) markdown += `- **SSN:** ${subject.ssn}\n`;
            if (subject.phone) markdown += `- **Phone:** ${subject.phone}\n`;
            if (subject.email) markdown += `- **Email:** ${subject.email}\n`;
            if (subject.address) markdown += `- **Address:** ${subject.address}\n`;

            if (subject.socialAccounts && subject.socialAccounts.length > 0) {
                markdown += `\n## Social Media Accounts\n\n`;
                subject.socialAccounts.forEach((account, index) => {
                    markdown += `### ${index + 1}. ${account.platform || 'Unknown Platform'}\n\n`;
                    if (account.username) markdown += `- **Username:** ${account.username}\n`;
                    if (account.accountId) markdown += `- **Account ID/URL:** ${account.accountId}\n`;
                    if (account.displayName) markdown += `- **Display Name:** ${account.displayName}\n`;
                    markdown += `\n`;
                });
            }

            if (subject.gang) {
                markdown += `## Gang Affiliation\n\n${subject.gang}\n\n`;
            }

            if (subject.priors) {
                markdown += `## Priors / Criminal History\n\n${subject.priors}\n\n`;
            }

            if (subject.mo) {
                markdown += `## Modus Operandi\n\n${subject.mo}\n\n`;
            }

            if (subject.notes) {
                markdown += `## Investigation Notes\n\n${subject.notes}\n\n`;
            }

            if (subject.photos && subject.photos.length > 0) {
                markdown += `## Attached Photos\n\n`;
                markdown += `Total photos: ${subject.photos.length}\n\n`;
                subject.photos.forEach((photo, index) => {
                    markdown += `- Photo ${index + 1}: ${photo.filename}\n`;
                });
                markdown += `\n`;
            }

            markdown += `---\n\n`;
            if (subject.createdAt) {
                markdown += `*Created: ${new Date(subject.createdAt).toLocaleString()}*\n\n`;
            }
            if (subject.updatedAt) {
                markdown += `*Updated: ${new Date(subject.updatedAt).toLocaleString()}*\n\n`;
            }

            // Add metadata at end for import
            markdown += `<!-- DAISY_TRACKER_METADATA\n`;
            markdown += JSON.stringify(subject, null, 2);
            markdown += `\n-->\n`;

            // Filename
            const filename = `${(subject.name || subject.nickname || 'Subject').replace(/[^a-z0-9]/gi, '_')}_${subject.id}.md`;

            // Save to device file system if Cordova is available
            const baseDir = getStorageLocation();

            if (baseDir && baseDir !== 'custom' && typeof cordova !== 'undefined') {
                saveMarkdownToDevice(markdown, filename, baseDir);
            } else {
                // Fallback: Download as blob (works in browser)
                const blob = new Blob([markdown], { type: 'text/markdown' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                alert(`✅ Subject exported as markdown file!`);
            }
        }

        // Save markdown to device file system
        function saveMarkdownToDevice(content, filename, baseDir) {
            window.resolveLocalFileSystemURL(baseDir, function(dirEntry) {
                dirEntry.getFile(filename, { create: true, exclusive: false }, function(fileEntry) {
                    fileEntry.createWriter(function(fileWriter) {
                        fileWriter.onwriteend = function() {
                            alert(`✅ Subject exported to:\n${fileEntry.nativeURL}`);
                        };

                        fileWriter.onerror = function(e) {
                            alert(`❌ Error writing file: ${e.toString()}`);
                        };

                        const blob = new Blob([content], { type: 'text/markdown' });
                        fileWriter.write(blob);
                    }, function(error) {
                        alert(`❌ Error creating file writer: ${error.code}`);
                    });
                }, function(error) {
                    alert(`❌ Error creating file: ${error.code}`);
                });
            }, function(error) {
                alert(`❌ Error accessing directory: ${error.code}`);
            });
        }

        // Import subject from markdown
        function importSubjectFromMarkdown(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                const content = e.target.result;

                // Check if this is a Daisy Tracker generated file
                if (!content.includes('DAISY TRACKER - SUBJECT PROFILE') && !content.includes('Generated by Daisy Tracker')) {
                    alert('⚠️ This file does not appear to be a Daisy Tracker subject profile. Cannot import.');
                    return;
                }

                try {
                    // Parse the plain text format
                    const data = {};

                    // Helper function to extract value after label
                    function extractValue(label) {
                        const regex = new RegExp(`${label}:\\s*(.+)`, 'i');
                        const match = content.match(regex);
                        return match ? match[1].trim() : '';
                    }

                    // Extract all fields from the text file
                    data.name = extractValue('Name');
                    data.aliases = extractValue('Aliases/Nicknames');
                    data.dob = extractValue('Date of Birth');
                    data.age = extractValue('Age');
                    data.email = extractValue('Email');
                    data.phone = extractValue('Phone');
                    data.username = extractValue('Username/Handle');
                    data.accountId = extractValue('Account ID');
                    data.address = extractValue('Address(?!:)'); // Avoid matching "Property Address"
                    data.city = extractValue('City');
                    data.state = extractValue('State');
                    data.country = extractValue('Country');
                    data.zip = extractValue('ZIP');
                    data.occupation = extractValue('Occupation');
                    data.employer = extractValue('Employer');
                    data.school = extractValue('School');
                    data.interests = extractValue('Interests');
                    data.propertyAddress = extractValue('Property Address');
                    data.propertyType = extractValue('Property Type');
                    data.propertyOwner = extractValue('Property Owner');
                    data.businessName = extractValue('Business Name');
                    data.vehicleVin = extractValue('Vehicle VIN');
                    data.licensePlate = extractValue('License Plate');
                    data.vehicleMake = extractValue('Vehicle Make');
                    data.vehicleModel = extractValue('Vehicle Model');
                    data.vehicleYear = extractValue('Vehicle Year');
                    data.vehicleColor = extractValue('Vehicle Color');
                    data.serialNumber = extractValue('Serial Number');
                    data.miscMake = extractValue('Make');
                    data.miscModel = extractValue('Model');
                    data.propertyDescription = extractValue('Description');
                    data.associates = extractValue('Known Associates');
                    data.ipAddress = extractValue('IP Address');
                    data.domain = extractValue('Domain/Website');
                    data.keywords = extractValue('Keywords');
                    data.caseName = extractValue('Case/Subject Name');

                    // Extract investigation notes (multi-line)
                    const notesMatch = content.match(/Investigation Notes:\n([\s\S]*?)\n\n/);
                    data.investigationNotes = notesMatch ? notesMatch[1].trim() : '';

                    // Populate form fields
                    const nameParts = data.name.split(' ');
                    if (nameParts.length >= 2) {
                        document.getElementById('first-name').value = nameParts[0] || '';
                        document.getElementById('last-name').value = nameParts[nameParts.length - 1] || '';
                        if (nameParts.length > 2) {
                            document.getElementById('middle-name').value = nameParts.slice(1, -1).join(' ') || '';
                        }
                    }

                    document.getElementById('aliases').value = data.aliases || '';
                    document.getElementById('dob').value = data.dob || '';
                    document.getElementById('age').value = data.age || '';
                    document.getElementById('email').value = data.email || '';
                    document.getElementById('phone').value = data.phone || '';
                    document.getElementById('username').value = data.username || '';
                    document.getElementById('account-id').value = data.accountId || '';
                    document.getElementById('address').value = data.address || '';
                    document.getElementById('city').value = data.city || '';
                    document.getElementById('state').value = data.state || '';
                    document.getElementById('country').value = data.country || '';
                    document.getElementById('zip').value = data.zip || '';
                    document.getElementById('occupation').value = data.occupation || '';
                    document.getElementById('employer').value = data.employer || '';
                    document.getElementById('school').value = data.school || '';
                    document.getElementById('interests').value = data.interests || '';

                    // Property fields
                    const propertyAddressField = document.getElementById('property-address');
                    if (propertyAddressField) propertyAddressField.value = data.propertyAddress || '';
                    const propertyTypeField = document.getElementById('property-type');
                    if (propertyTypeField) propertyTypeField.value = data.propertyType || '';
                    const propertyOwnerField = document.getElementById('property-owner');
                    if (propertyOwnerField) propertyOwnerField.value = data.propertyOwner || '';
                    const businessNameField = document.getElementById('business-name');
                    if (businessNameField) businessNameField.value = data.businessName || '';

                    // Vehicle fields
                    const vehicleVinField = document.getElementById('vehicle-vin');
                    if (vehicleVinField) vehicleVinField.value = data.vehicleVin || '';
                    const licensePlateField = document.getElementById('license-plate');
                    if (licensePlateField) licensePlateField.value = data.licensePlate || '';
                    const vehicleMakeField = document.getElementById('vehicle-make');
                    if (vehicleMakeField) vehicleMakeField.value = data.vehicleMake || '';
                    const vehicleModelField = document.getElementById('vehicle-model');
                    if (vehicleModelField) vehicleModelField.value = data.vehicleModel || '';
                    const vehicleYearField = document.getElementById('vehicle-year');
                    if (vehicleYearField) vehicleYearField.value = data.vehicleYear || '';
                    const vehicleColorField = document.getElementById('vehicle-color');
                    if (vehicleColorField) vehicleColorField.value = data.vehicleColor || '';

                    // Misc property fields
                    const serialNumberField = document.getElementById('serial-number');
                    if (serialNumberField) serialNumberField.value = data.serialNumber || '';
                    const miscMakeField = document.getElementById('misc-make');
                    if (miscMakeField) miscMakeField.value = data.miscMake || '';
                    const miscModelField = document.getElementById('misc-model');
                    if (miscModelField) miscModelField.value = data.miscModel || '';
                    const propertyDescriptionField = document.getElementById('property-description');
                    if (propertyDescriptionField) propertyDescriptionField.value = data.propertyDescription || '';

                    // Additional fields
                    const associatesField = document.getElementById('associates');
                    if (associatesField) associatesField.value = data.associates || '';
                    const ipAddressField = document.getElementById('ip-address');
                    if (ipAddressField) ipAddressField.value = data.ipAddress || '';
                    const domainField = document.getElementById('domain');
                    if (domainField) domainField.value = data.domain || '';
                    const keywordsField = document.getElementById('keywords');
                    if (keywordsField) keywordsField.value = data.keywords || '';

                    // Case name and investigation notes (top fields)
                    document.getElementById('case-name').value = data.caseName || '';
                    document.getElementById('investigation-notes').value = data.investigationNotes || '';

                    alert(`✅ Subject profile imported successfully!\n\nName: ${data.name || data.username || 'Unknown'}\n\nAll fields have been populated in the User Input form.`);

                    // Switch to User Input tab to show the imported data
                    showTab('user-input');

                } catch (error) {
                    alert(`❌ Error importing subject: ${error.message}\n\nPlease make sure this is a valid Daisy Tracker TXT file.`);
                    console.error('Import error:', error);
                }
            };

            reader.readAsText(file);

            // Clear file input
            event.target.value = '';
        }

        // Toggle Subject Profile section visibility
        // Show save inputs form - redirects user to subject profile section
        function showSaveInputsForm() {
            const fieldsDiv = document.getElementById('subject-profile-fields');
            const btn = document.getElementById('save-inputs-btn');
            const section = document.getElementById('save-inputs-section');

            // Show the subject profile fields
            fieldsDiv.style.display = 'block';

            // Hide the "Save inputs as file" button
            btn.style.display = 'none';

            // Scroll to the section
            section.scrollIntoView({ behavior: 'smooth', block: 'start' });

            // Show a message
            setTimeout(() => {
                alert('✏️ Fill out the Subject Profile fields below, then click "Save as Subject Profile (MD File)" at the bottom.');
            }, 500);
        }

        // Clear only subject-specific fields (not main investigation fields)
        function clearSubjectFields() {
            // Clear subject-specific inputs
            document.getElementById('subject-category').value = '';
            document.getElementById('subject-gang').value = '';
            document.getElementById('subject-priors').value = '';
            document.getElementById('subject-mo').value = '';

            // Reset social accounts to single empty entry
            const container = document.getElementById('social-accounts-container');
            socialAccountCounter = 1;
            container.innerHTML = `
                <div class="social-account-entry" id="social-entry-1">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Platform:</label>
                            <input type="text" class="social-platform" placeholder="Facebook, Instagram..." data-entry="1">
                        </div>
                        <div class="form-group">
                            <label>Username:</label>
                            <input type="text" class="social-username" placeholder="@username" data-entry="1">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>URL/ID:</label>
                            <input type="text" class="social-account-id" placeholder="Profile URL" data-entry="1">
                        </div>
                        <div class="form-group">
                            <label>Display Name:</label>
                            <input type="text" class="social-display-name" placeholder="Profile name" data-entry="1">
                        </div>
                    </div>
                </div>
            `;

            // Clear photos
            subjectPhotos = [];
            document.getElementById('subject-photos-preview').innerHTML = '';
            document.getElementById('subject-photo-input').value = '';

            // Hide the subject profile fields section
            document.getElementById('subject-profile-fields').style.display = 'none';

            // Show the "Save inputs as file" button again
            document.getElementById('save-inputs-btn').style.display = 'block';

            alert('✅ Subject fields cleared! Investigation fields remain unchanged.');
        }

        // Initialize category filter on page load
        window.addEventListener('load', function() {
            updateCategoryFilter();
        });

        // Load files on page load
        window.addEventListener('load', loadFiles);

        // Load default storage location on page load
        window.addEventListener('load', loadDefaultStorageLocation);

        // Update save location display on page load
        window.addEventListener('load', updateSaveLocationDisplay);

        // ==========================================
        // PWA SERVICE WORKER - Makes app work offline and installable
        // ==========================================
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('service-worker.js')
                    .then(function(registration) {
                        console.log('✅ PWA Service Worker registered! App is now installable.');
                    })
                    .catch(function(error) {
                        console.log('⚠️ Service Worker registration failed (app still works):', error);
                    });
            });
        }
    </script>
</body>
</html>
